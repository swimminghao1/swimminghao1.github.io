<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>超详细从0开始搭建 Spring Boot 项目 | swimminghao</title><meta name=keywords content="SpringBoot"><meta name=description content="超详细从0开始搭建 Spring Boot 项目 这个项目，我是打算作为种子项目的，作为种子项目，必须的“开箱即用”，必须要包含大部分 web 开发的相关功能，后期所有的 Spring"><meta name=author content="swimminghao"><link rel=canonical href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_04_spring/%E8%B6%85%E8%AF%A6%E7%BB%86%E4%BB%8E0%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BAspring-boot-%E9%A1%B9%E7%9B%AE/><meta name=yandex-verification content="73b1a797f62c0e98"><meta name=baidu-site-verification content="code-gnOrbP1RyC"><meta name=baidu_union_verify content="4c552c344295cb984c46ebe74962b067"><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/satouriko/LxgwWenKai_Webfonts@v1.101/dist/LXGWWenKai-Light.css><link crossorigin=anonymous href=/assets/css/stylesheet.min.0a5d9aa21e56d0b7d41b1d4b56af0b911caf526faf5060a8d3717579bf27cb93.css integrity="sha256-Cl2aoh5W0LfUGx1LVq8LkRyvUm+vUGCo03F1eb8ny5M=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://swimminghao1.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://swimminghao1.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://swimminghao1.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://swimminghao1.github.io/apple-touch-icon.png><link rel=mask-icon href=https://swimminghao1.github.io/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.97.0"><link rel=manifest href=/manifest.json><script type=text/javascript>function downloadJSAtOnload(){var e=document.createElement("script");e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7296634171837358",document.body.appendChild(e)}window.addEventListener?window.addEventListener("load",downloadJSAtOnload,!1):window.attachEvent?window.attachEvent("onload",downloadJSAtOnload):window.onload=downloadJSAtOnload</script><script async defer data-website-id=3d947a98-2774-46b0-805f-fe2e4877a1d7 src=https://umami.frytea.com/umami.js></script>
<script async src=https://swimminghao1.github.io/js/busuanzi.pure.mini.js></script>
<link rel=stylesheet href=/libs/font-awesome-4.7.0/css/font-awesome.min.css><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script src=https://swimminghao1.github.io/js/mermaid.min.js crossorigin=anonymous></script>
<script>const config={startOnLoad:!0,theme:"forest",themeVariables:{lineColor:"#fafafa"},flowchart:{useMaxWidth:!1,htmlLabels:!0}};mermaid.initialize(config),window.onload=()=>{window.mermaid.init(void 0,document.querySelectorAll(".language-mermaid"))}</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?c49e2f5be5e009382be07455c33b1394",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-136094326-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="超详细从0开始搭建 Spring Boot 项目"><meta property="og:description" content="超详细从0开始搭建 Spring Boot 项目 这个项目，我是打算作为种子项目的，作为种子项目，必须的“开箱即用”，必须要包含大部分 web 开发的相关功能，后期所有的 Spring"><meta property="og:type" content="article"><meta property="og:url" content="https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_04_spring/%E8%B6%85%E8%AF%A6%E7%BB%86%E4%BB%8E0%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BAspring-boot-%E9%A1%B9%E7%9B%AE/"><meta property="og:image" content="https://swimminghao1.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-03-14T17:11:00+00:00"><meta property="article:modified_time" content="2022-03-14T17:11:00+00:00"><meta property="og:site_name" content="swimminghao"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://swimminghao1.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="超详细从0开始搭建 Spring Boot 项目"><meta name=twitter:description content="超详细从0开始搭建 Spring Boot 项目 这个项目，我是打算作为种子项目的，作为种子项目，必须的“开箱即用”，必须要包含大部分 web 开发的相关功能，后期所有的 Spring"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"📚文章","item":"https://swimminghao1.github.io/post/"},{"@type":"ListItem","position":2,"name":"超详细从0开始搭建 Spring Boot 项目","item":"https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_04_spring/%E8%B6%85%E8%AF%A6%E7%BB%86%E4%BB%8E0%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BAspring-boot-%E9%A1%B9%E7%9B%AE/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"超详细从0开始搭建 Spring Boot 项目","name":"超详细从0开始搭建 Spring Boot 项目","description":"超详细从0开始搭建 Spring Boot 项目 这个项目，我是打算作为种子项目的，作为种子项目，必须的“开箱即用”，必须要包含大部分 web 开发的相关功能，后期所有的 Spring","keywords":["SpringBoot"],"articleBody":"超详细从0开始搭建 Spring Boot 项目 这个项目，我是打算作为种子项目的，作为种子项目，必须的“开箱即用”，必须要包含大部分 web 开发的相关功能，后期所有的 Spring Boot 项目都是将这个项目拿来，简单修改一下配置，就可以快速开发了。\n源码 Github\n1.0.0 创建项目 我使用的是 idea\n创建项目 选择 Spring initializr ，如果点Next一直在转圈，可能是 start.spring.io/ 在国外，访问比较慢。可以科学上网或者，使用自定义的 start.spring.io/ 主要改以下组织名称、项目名称和项目描述就好了 我创建项目的时候， Spring Boot 最新稳定版是 2.1.9 。要用就用最新的！！！ 依赖先都不勾选，后期一项一项加\n项目文件夹名称以及存放位置 添加maven镜像 添加maven镜像加快依赖下载速度\n    华为maven仓库  huawei  https://mirrors.huaweicloud.com/repository/maven/         华为maven插件仓库  huawei_plugin  https://mirrors.huaweicloud.com/repository/maven/    pom 文件 整体 .pom 文件内容如下\n  xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"  4.0.0     org.springframework.boot  spring-boot-starter-parent  2.1.9.RELEASE       com.wqlm  boot  0.0.1-SNAPSHOT  boot  Spring Boot Demo     1.8         org.springframework.boot  spring-boot-starter       org.springframework.boot  spring-boot-starter-test  test             org.springframework.boot  spring-boot-maven-plugin             华为maven仓库  huawei  https://mirrors.huaweicloud.com/repository/maven/           华为maven插件仓库  huawei_plugin  https://mirrors.huaweicloud.com/repository/maven/       依赖结构图 番外 观察仔细的人应该发现了，spring-boot-starter 和 spring-boot-starter-test 都没有指定版本，那它们是怎么确定版本的？\n 参考 为什么 maven 依赖可以不指定版本\n 1.1.0 添加 web 模块 在 pom 文件中添加 web 模块\n org.springframework.boot spring-boot-starter-web  由于 spring-boot-starter-web 包含 spring-boot-starter 建议删掉如下 spring-boot-starter 依赖，以保证依赖的干净整洁\n org.springframework.boot spring-boot-starter  作用 引入 spring-boot-starter-web 后，我们可以\n 编写 web 应用 不需要配置容器即可运行 web 应用 对请求参数进行校验 将业务结果对象转换成 josn 返回  依赖结构图 从图中我们可以看到 spring-boot-starter-web 引入了几个关键的依赖\n  spring-boot-starter\n  spring-boot-starter-tomcat：spring boot 不需要 tomcat 也能启动就是因为它\n  spring-webmvc\n  spring-web\n  spring-boot-starter-json\n： 有了它，就可以使用 @ResponseBody 返回 json 数据\n jackson ：spring boot 默认的 json 解析工具    hibernate-validator\n：提供参数校验的注解，如\n@Range、@Length\n javax.validation：提供参数校验的注解，如 @NotBlank、@NotNull、@Pattern    关于参数校验请参考 参数校验 Hibernate-Validator\n1.2.0 集成 mysql Spring Boot 集成 mysql 需要 JDBC 驱动 和 mysql 驱动\n引入依赖    org.springframework.boot  spring-boot-starter-jdbc      mysql  mysql-connector-java  版本号可以不用填，spring boot 配置了默认的版本号。例如 spring boot 2.1.9.RELEASE 对应的 mysql-connector-java 版本为 8.0.17\n配置 mysql 根据 mysql-connector-java 版本不同，配置的内容也有些许差异\n# mysql-connector-java 6.0.x 以下版本配置 spring.datasource.driverClassName=com.mysql.jdbc.Driver spring.datasource.url=jdbc:mysql://localhost:3306/boot?useUnicode=true\u0026characterEncoding=utf-8\u0026useSSL=false spring.datasource.username=root spring.datasource.password=123456 # mysql-connector-java 6.0.x 及以上版本配置 spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver spring.datasource.url=jdbc:mysql://localhost:3306/boot?useUnicode=true\u0026characterEncoding=utf-8\u0026useSSL=false\u0026serverTimezone=Asia/Shanghai spring.datasource.username=root spring.datasource.password=123456 如下图，spring boot 2.1.9.RELEASE 对应的 mysql-connector-java 版本为 8.0.17 更多请参考MySQL JDBC 连接\n创建示例数据库和表 -- 创建 boot 数据库 CREATE DATABASE IF NOT EXISTS boot DEFAULT CHARSET utf8 COLLATE utf8_bin; -- 选择 boot 数据库 USE boot; -- 创建 user 表 SET NAMES utf8mb4; SET FOREIGN_KEY_CHECKS = 0; DROP TABLE IF EXISTS `user`; CREATE TABLE `user` ( `id` INT ( 11 ) NOT NULL AUTO_INCREMENT, `user_name` VARCHAR ( 255 ) COLLATE utf8_bin NOT NULL, `pasword` VARCHAR ( 255 ) COLLATE utf8_bin NOT NULL, `salt` VARCHAR ( 255 ) COLLATE utf8_bin NOT NULL, PRIMARY KEY ( `id` ) ) ENGINE = INNODB DEFAULT CHARSET = utf8 COLLATE = utf8_bin; SET FOREIGN_KEY_CHECKS = 1; 1.3.0 多环境配置 详细参考spring profile 与 maven profile 多环境管理\nspring 多环境配置 配置一个 dev 环境\n创建 application-dev.properties 文件，并将 mysql 相关配置迁移过来 使用 dev 环境\n在 application-dev.properties 指定要使用的环境\nspring.profiles.active=dev  同理你也可以创建 test、prod 环境，但一般公共配置还是会放在 application.properties 中，只有非公共配置才会放在各自的环境中\n maven 多环境配置 spring boot 多环境配置有两个缺点\n 每次切换环境要手动修改 spring.profiles.active 的值 打包的时候，要手动删除其它环境的配置文件，不然其它环境的敏感信息就都打包进去了  而 maven 的 profile 可以解决这两个问题\n第一个问题 “每次切换环境要手动修改spring.profiles.active的值”\n这个问题就可以通过配置 profile 解决，在pom的根节点下添加\n    dev      true          dev        test    test        prod    prod      如上，定义了三套环境，其中id为dev的是默认环境，三套环境中定义了叫 env的“变量”\n如果你用的是idea编辑器，添加好后，maven控件窗口应该会多出一个 Profiles,其中默认值就是上面配置的dev\n最小化的 profiles 已经配置好了，通过勾选上图中的Profiles，就可以快速切换 maven的 profile 环境。\n现在 maven profile 可以通过 勾选上图中的Profiles 快速切换环境\nSpring Profile 还得通过 手动修改spring.profiles.active的值来切环境\n现在的问题是怎样让 maven profile的环境与Spring Profile一一对应，达到切换maven profile环境时，Spring Profile环境也被切换了\n还记得maven profile 中定义的 env “变量\"吗,现在只需要把\nspring.profiles.active=dev 改成\nspring.profiles.active=@env@ 就将maven profile 与 Spring Profile 环境关联起来了\n当maven profile 将 环境切换成 test 时，在pom中定义的id为test的profile环境将被激活，在该环境下env的值是test，maven插件会将 @env@ 替换为 test，这样Spring Profile的环境也随之发生了改变。从上面可以看出，自定义的\"变量\"env的值还不能乱写，要与Spring Profile的环境相对应。\n总结\n 第一步，在pom文件中配置 profiles 第二步，在application.properties配置文件中添加 spring.profiles.active=@env@  第二个问题 打包的时候，要手动删除其它环境的配置文件，不然其它环境的敏感信息就都打包进去了\n解决这个问题需要在pom根节点下中配置 build 信息\n      src/main/resources      application*.yml        src/main/resources  配置文件中的@env@ 这个maven`变量`替换成当前环境的对应值 --  true      application.yml  application-${env}.yml         directory：资源文件所在目录 includes：需要包含的文件列表 excludes：需要排除的文件列表  如上，配置了两个 ，第一个先排除了src/main/resources目录下所有 application 开头是配置文件，第二个在第一个的基础上添加了所需的配置文件。注意 application-${env}.yml,它是一个动态变化的值，随着当前环境的改变而改变，假如当前环境是 id叫 dev的 profile，那么env的值为 dev。\n这样配置后，maven在build时，就会根据配置先排除掉指定的配置文件，然后根据当前环境添加所需要的配置文件。\npom 文件 4.0.0  org.springframework.boot spring-boot-starter-parent 2.1.9.RELEASE   com.wqlm boot 0.0.1-SNAPSHOT boot Spring Boot Demo  UTF-8 UTF-8 1.8    dev  true   dev    test  test    prod  prod       org.springframework.boot spring-boot-starter-web    mysql mysql-connector-java    org.mybatis.spring.boot mybatis-spring-boot-starter 2.1.0    org.springframework.boot spring-boot-starter-test test      org.springframework.boot spring-boot-maven-plugin     src/main/resources   application*.yml    src/main/resources true   application.yml application-${env}.yml       华为maven仓库 huawei https://mirrors.huaweicloud.com/repository/maven/     华为maven插件仓库 huawei_plugin https://mirrors.huaweicloud.com/repository/maven/    1.4.0 多模块配置 稍微大一点的项目一般都会采用多模块的形式管理项目，将一个大型项目升级成多模块项目，一般需要两大步骤\n 拆分现有项目 进行 maven 多模块配置   关于如何拆分现有项目和maven 多模块配置的详细介绍请参考 Maven 多模块配置、管理\n 拆分现有项目 我是按照功能拆分项目的，但由于该项目本身不大，所以我简单的拆分为 user 模块和 common 模块\n在boot下创建两个新的模块 子模块的pom 此时，父模块的pom内容也发生了改变，添加了如下三行 再来创建 common 模块，创建过程同上，我就不演示了,创建好之后，pom如下 整个项目结构如下 下一步进行迁移工作，将原先 src 目录下面的内容迁移到对于的子模块中 这里我放到 user 模块中，迁移过程中注意路径和命名规范，过程就不展示了，迁移之后，结构如下。 多模块配置 多模块配置遵守以下原则\n 公共、通用配置一定要配置在父pom中 版本号由父 pom 统一管理  如下图，蓝色背景的元素都会被子项目全部继承 由于目前，只有 user 模块用到了如下依赖项，而 common 模块不需要用到这些依赖，所以，将依赖复制到 user 模块下，后删掉依赖 build中的配置目前也是只有 user 模块用到，也复制到 user 模块下，后删掉 父项目已经配置完成了，接下来配置 user 模块，如下 common 模块用到的时候在配置\n多模块管理 多模块环境管理 我们在父 pom 中配置了 maven 多环境，子模块会继承这些配置。之后，我们只需要在 maven 插件中切换环境，所有的子模块的 maven 环境都会被切换 多模块构建管理 在 maven 插件中，通过 boot 项目对所以子模块进行、编译、测试、打包、清理… 1.5.0 集成 mybatis 集成 mybatis 一般需要5步\n 引入依赖 创建 PO 层，存放我们的数据持久化对象 创建 DAO 层，存放数据库的增删改查方法 创建 mapper.xml 层, 对应增删改查语句 在启动类上配置 @MapperScan 其他。如配置 MyBatis Generator，用来帮我们生成 PO、DAO、Mapper.xml  添加依赖 在多模块项目中添加依赖要注意一下几点\n 不要将依赖直接添加到父 pom 中，这样所以子模块都会继承该依赖 多个模块引用了统一个依赖，最好保证依赖的版本一致  maven dependencyManagement 可以非常方便的管理多模块的依赖\n 关于 maven dependencyManagement 请参考 maven 依赖版本管理\n 这里我就不在解释，直接应用了\n  在父 pom 的根节点下, properties 里，定义mybatis-spring-boot-starter 版本号的变量\n2.1.0   在父 pom 的根节点下，申明 mybatis 依赖\n      org.mybatis.spring.boot  mybatis-spring-boot-starter  ${mybatis-spring-boot-starter.version}        在 user 模块的 pom 文件中引入 mybatis 依赖\n  org.mybatis.spring.boot  mybatis-spring-boot-starter    由于 mybatis-spring-boot-starter 包含 spring-boot-starter-jdbc ，所以删除spring-boot-starter-jdbc依赖，保证依赖的整洁\n  依赖结构图 创建对应的文件夹 如图\ncom.wqlm.boot\n controller ：控制层 po : 存放与数据库中表相对应的java对象 dto : 存放数据传输对象，比如注册时，注册的信息可以用一个 dto 对象来接收 dao : 存放操作数据库的接口 service : 业务层 vo : 存放业务返回结果对象 qo : 封装了查询参数的对象  resources\n mapper : 存放mapper.xml 文件  配置 mybatis mybatis 需要知道有那些类是 mapper！有两种方式可以告诉 mybatis。\n第一种\n在启动类上配置 @MapperScan\n# 指定你的 mapper接口所在的 package @MapperScan(\"com.wqlm.boot.user.dao\") 第二种 在接口上加 @Mapper 注解，如下  要我选我肯定选第一种配置方式，一劳永逸\n 除此之外，还要告诉 mybatis ，你的 mapper.xml 文件在哪\n# mybatis # mapper.xml文件的位置 mybatis.mapper-locations=classpath*:mapper/*.xml 由于这里的配置跟环境无关,所以应该配置在 application.properties 中 1.5.1 配置 MyBatis Generator MyBatis Generator 是 MyBatis 提供的一个代码生成工具。可以帮我们生成 表对应的持久化对象(po)、操作数据库的接口(dao)、CRUD sql的xml(mapper)。\n使用方法主要分为三步\n 引入并配置 MyBatis Generator 插件 配置 MyBatis Generator Config 文件 使用 MyBatis Generator 插件  详细说明请参考 MyBatis Generator 超详细配置\n这里只给出一种最终配置\n引入并配置 MyBatis Generator 插件 在user项目的pom文件的根节点下添加如下配置\n      org.mybatis.generator  mybatis-generator-maven-plugin  1.3.7      src/main/resources/mybatis-generator-config.xml    true    true--        --  org.mybatis.generator--  mybatis-generator-core--  1.3.7--  --      mysql  mysql-connector-java  8.0.17          配置 MyBatis Generator Config 文件 在user项目的 resources 目录下，创建mybatis-generator-config.xml，内容如下\n  PUBLIC \"-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN\" \"http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd\"       resource=\"application-dev.properties\"/   property*,plugin*,commentGenerator?,jdbcConnection,javaTypeResolver?, javaModelGenerator,sqlMapGenerator?,javaClientGenerator?,table+ --   id=\"myContext\" targetRuntime=\"MyBatis3\" defaultModelType=\"flat\"     --          name=\"suppressAllComments\" value=\"true\"/    --    --         driverClass=\"${spring.datasource.driverClassName}\"  connectionURL=\"${spring.datasource.url}\"  userId=\"${spring.datasource.username}\"  password=\"${spring.datasource.password}\"     name=\"nullCatalogMeansCurrent\" value=\"true\"/         false，把JDBC DECIMAL 和 NUMERIC 类型解析为 Integer true，把JDBC DECIMAL 和 NUMERIC 类型解析为java.math.BigDecimal--   name=\"forceBigDecimals\" value=\"true\"/  false，将所有 JDBC 的时间类型解析为 java.util.Date true，将 JDBC 的时间类型按如下规则解析 DATE\t- java.time.LocalDate TIME\t- java.time.LocalTime TIMESTAMP - java.time.LocalDateTime TIME_WITH_TIMEZONE - java.time.OffsetTime TIMESTAMP_WITH_TIMEZONE\t- java.time.OffsetDateTime --  --        targetPackage=\"com.wqlm.boot.user.po\" targetProject=\"src/main/java\"    --     name=\"trimStrings\" value=\"true\"/         targetPackage=\"mapper\" targetProject=\"src/main/resources\"  --        targetPackage=\"com.wqlm.boot.user.dao\" targetProject=\"src/main/java\" type=\"XMLMAPPER\"  --      tableName为对应的数据库表名 domainObjectName 是要生成的实体类名(可以不指定，默认按帕斯卡命名法将表名转换成类名) enableXXXByExample 默认为 true， 为 true 会生成一个对应Example帮助类，帮助你进行条件查询，不想要可以设为false --   schema=\"\" tableName=\"user\" domainObjectName=\"User\"  enableCountByExample=\"false\" enableDeleteByExample=\"false\" enableSelectByExample=\"false\"  enableUpdateByExample=\"false\" selectByExampleQueryId=\"false\"    --      application-dev.properties 的配置 MyBatis Generator Config 引用的外部配置文件内容如下\n# mysql spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver spring.datasource.url=jdbc:mysql://localhost:3306/boot?useUnicode=true\u0026characterEncoding=utf-8\u0026useSSL=false\u0026serverTimezone=Asia/Shanghai spring.datasource.username=root spring.datasource.password=123456 使用 MyBatis Generator 插件 配置好后，双击 maven 中的 MyBatis Generator 运行 1.5.2 集成 tk.mybatis (通用mapper) 上一节中，MyBatis Generator 为我们生成了一些常用的操作数据库的方法。其实我们也可以通过 集成 tk.mybatis (通用mapper) 来实现，集成之后，会有更多的通用方法，并且这些通用方法是不用配置mapper.xml 的。\nspringboot 集成 tk.mybatis (通用mapper) 一般需要3步\n 引入依赖 配置 tk.mybatis 的 MyBatis Generator 插件 启动类上配置要扫描的 dao 路径 配置通用 Mapper   tk.mybatis 的 GitHub\n 引入依赖 老规矩，还是在父 pom 中配置 tk.mybatis 的版本并申明 tk.mybatis 的依赖   2.1.5            tk.mybatis  mapper-spring-boot-starter  ${tk.mybatis.mapper-spring-boot-starter.version}      然后在 user 模块的 pom 中引入依赖\n      tk.mybatis  mapper-spring-boot-starter    配置 tk.mybatis 的 MyBatis Generator 插件 tk.mybatis 为 MyBatis Generator 开发了一个插件，用于改变 MyBatis Generator 的原始生成策略，配置好之后，生成出来的文件更加精练、注释更加有意义。\n整个配置过程分两步\n 引入插件依赖 修改 MyBatis Generator Config  引入插件依赖 在原来的 MyBatis Generator 插件的 dependencies 里面添加如下依赖    tk.mybatis  mapper  4.1.5  修改 MyBatis Generator Config 主要有一下几点改动\n首先是 targetRuntime 的值改为 MyBatis3Simple，defaultModelType 设置为 flat 如果 targetRuntime=\"MyBatis3\" 的话，生成出来的 mapper.xml 会多出一段无用代码，如下 然后添加 tk.mybatis 插件\n type=\"tk.mybatis.mapper.generator.MapperPlugin\"     name=\"mappers\" value=\"tk.mybatis.mapper.common.Mapper\"/     name=\"caseSensitive\" value=\"true\"/  其他地方都不需要改动，配置好之后，运行 MyBatis Generator 插件，生成出来的文件如下\npo 可以看到，相比与 MyBatis Generator 生成的注释，tk.mybatis 生成的注解跟简洁易懂。除此之外，它还多了几个注解\n @Table(name = “user”)：意思是该po对应数据库的user表 @Id：表示该属性对应user表的主键 @Column(name = “user_name”)：表示该属性对应user表的 user_name 字段  dao 相比于 MyBatis Generator 生成的代码，少了很多接口，但多继承了一个类，这个类就是你在 tk.mybatis 插件里面配置的类 你可能猜到了，少的那些接口，都在继承的这个tk.mybatis.mapper.common.Mapper类中有，如下图，userMapper 继承了这么多方法，而且这些方法都是可以直接使用的 mapper.xml 相比于 MyBatis Generator 少了很多代码\n启动类上配置要扫描的 dao 路径 这一步我们在集成 mybatis 时已经配置过了 但是集成 tk.mybatis 后，需要使用 tk.mybatis 包下的 @MapperScan ,因此需要修改一下 @MapperScan 的包路径 ![img](/Users/xh/Library/Application Support/typora-user-images/image-20220315161228552.png)\nimport tk.mybatis.spring.annotation.MapperScan; 配置通用 Mapper # 通用 mapper # 主键自增回写方法,默认值MYSQL mapper.identity=MYSQL # 设置 insert 和 update 中，字符串类型!=\"\"才插入/更新,默认false #mapper.not-empty=true tk.mybatis 至此就全部集成完了\n1.5.3 集成 pagehelper 分页插件 分页查询是web开发中一个很常见的功能，mybatis 虽然也可以实现分页，但那是基于内存的分页，即把数据一次性全查出来，然后放在内存中分多次返回。\n而 pagehelper 分页插件是物理分页，是通过 sql 关键字来实现的。例如mysql中的limit，oracle中的rownum等。\n pagehelper 分页插件和 tk.mybatis 是通一个作者写的pagehelper项目地址\n 集成 pagehelper 需要两步\n 引入 pagehelper 依赖 配置 pagehelper  引入 pagehelper 依赖 老规矩，父pom中定义依赖版本，并申明依赖   1.2.12         com.github.pagehelper  pagehelper-spring-boot-starter  ${pagehelper-spring-boot-starter.version}      子模块中引入依赖     com.github.pagehelper  pagehelper-spring-boot-starter    配置 pagehelper # 使用的sql方言 pagehelper.helperDialect=mysql # 是否启用合理化，默认false，启用合理化时，如果 pageNumpages会查询最后一页 pagehelper.reasonable=true # 是否支持通过Mapper接口参数来传递分页参数，默认false #pagehelper.supportMethodsArguments=true pagehelper.params=count=countSql 更多配置请参考官网\n1.6.0 引入 lombok 插件 lombok 是一个简化代码的插件，能通过一个注解帮你生成 get、set、tostring、hash… 方法。\n集成 lombok 十分简单\n 引入 lombok 依赖 安装 ide 对应的 lombok 插件  lombok 使用方法参考这篇文章 lombok 插件\n引入 lombok 依赖 由于 spring-boot-starter-parent 中已经申明了lombok 依赖，我们只需要在子模块中引入就好了\n   org.projectlombok  lombok  安装 ide 对应的 lombok 插件 1.7.0 集成 redis 作为最常用的 nosql 数据库，Spring Boot 对 redis 做了非常好对支持，集成起来也很简单，只需要4步\n 引入依赖 配置 redis 自定义 RedisTemplate (推荐) 自定义 redis 操作类 (推荐)  详细的集成步骤我单独提出来写了篇文章，地址如下\n Spring Boot 2.0 集成 redis\n 1.7.1 集成 spring cache Spring Cache 是 Spring 为缓存场景提供的一套解决方案。通过使用 @CachePut、@CacheEvict、@Cacheable等注解实现对缓存的，存储、查询、删除等操作\n由于我们已经引入 redis ，所以只需要简单配置一下，就可以使用 spring cache\n详细的集成步骤我单独提出来写了篇文章，地址如下(在 Spring Cache 那一节)\n Spring Boot 2.0 集成 redis\n  当然，不用也可以选择不去集成\n 1.8.0 开发用户模块 不同的系统对应不同的用户设计，掘金的用户系统和淘宝的用户系统肯定是不一样的，所以，该项目虽然是一个种子项目，但很难给出通用的用户模块设计。\n因此，我转变思路，并不去追求什么通用的用户模块，而是力求在该模块中，将上面集成的技术，全部都应用起来。\n这样，在以后使用到上面的某项技术的时候，也有一个参照。\n用户表 建表语句在 配置 mysql 那一章\n添加 controller 、service 、dto 先创建 controller 、service 、dto 目录 先从注册接口开始写\n注意校验参数一定要加 @Valid 注解 其中 @Data 用到了 lombok 插件 数据库存的是密码加盐后的hash，也就是说就连我们自己也看不到用户的密码 1.8.1 自定义全局状态码和业务结果类 虽然向上面这样直接返回 注册成功、注册失败 也没有什么问题，但却不太优雅，因为其他接口返回的可能不是简单的字符串。\n我们其实可以自定义一个业务结果类，所有的接口，都返回该业务结果对象，这个业务结果类，除了有业务结果外，还有业务执行状态、业务消息等。\n除了业务结果类，我还建议创建全局状态码类，就想蚂蚁金服的api接口一样，调用失败会返回一个状态码，方便错误排查\n自定义全局状态码 新建 enums 目录 创建 ApplicationEnum 全局状态码类，我这里只写了几个，之后可以往里面加 创建业务结果类 如下，在 vo 目录下下创建 result 目录，并在里面创建业务结果类 为了方便使用，再创建一个 SuccessResult 和一个 FailResult 改造注册接口 1.8.2 统一异常处理 业务执行过程中会产生的各种异常，对其进行统一处理是所有web项目的通用需求。Spring 提供了 @RestControllerAdvice、@ExceptionHandler 注解来帮助我们处理异常。\n具体的异常处理该如何设计没有统一的标准，下面是我给出的设计，仅供参考。\n我的做法是自定义一个异常类，然后在业务出错时抛出，最后在自定义异常处理类中处理。\n 更多内容请参考 基于spring 的统一异常处理\n 自定义异常类 每一种异常都对于一种ApplicationEnum 自定义异常处理类 如果一个异常能匹配多个 @ExceptionHandler 时，选择匹配深度最小的Exception(即最匹配的Exception)\n使用自定义异常 1.8.3 参数校验及异常处理 参数校验 首先在要校验的对象前加上 @valid 注解 然后在要校验的对象中使用适当的注解 详细内容请参考\n 参数校验 Hibernate-Validator Spring 参数校验详解\n 异常处理 如果参数绑定不成功或者校验不通过，就会抛出异常！但是默认抛出的异常包含很多敏感信息，如下： 因此我们应该对常见的异常进行捕获后再封装。\nextends ResponseEntityExceptionHandler` 是为了重写几个常见异常的默认处理方式。当然，你也可以直接通过 `@ExceptionHandler()` 拦截，这样就不用`extends ResponseEntityExceptionHandler 一般只需要处理这三个异常就可以覆盖大部分需要手动处理参数异常的场景\n org.springframework.validation.BindException org.springframework.web.bind.MethodArgumentNotValidException javax.validation.ConstraintViolationException  详细内容请参考\n Spring 参数校验的异常处理\n 1.8.4 添加登陆、修改密码、获取用户信息的接口 主要是些业务逻辑，没有什么指的说的，具体代码参考项目源码！唯一指的提一嘴的是 使用 @Value(\"${}\") 注解获取配置文件中的属性 1.8.5 添加认证拦截器 有些接口我们希望只有登陆的用户能访问，解决方案一般是添加一个登陆拦截器。\n方法也很简单，主要分为3步\n 定义哪些接口需要认证(登陆后才能访问)，或者哪些接口不需要认证 自定义 HandlerInterceptor , 在访问接口前进行拦截处理 自定义 WebMvcConfigurer ，定义哪些接口需要拦截  1.确定免认证url 2.自定义 HandlerInterceptor ，对拦截到的请求进行token有效性校验 3.自定义 WebMvcConfigurer ，拦截除免认证url列表之外的所有请求 1.8.6 统一映射自定义配置 之前我们都是哪里需要用到 properties 中的配置，就在那里使用 @Value(\"${}\") 来获取。如下 我们也可以创建一个自定义配置类，将所有 properties 中的自定义属性全部映射到对应的属性上，如下 然后使用时，直接访问该类 1.9.0 配置日志 spring boot 已经对日志系统进行了默认的配置，但是如果你想显示 sql 或将日志输出到文件就需要进行进一步配置。\n详细内容请参考\n java 生态下的日志框架 Java 日志实现框架 Logback Logback 配置样例 Spring Boot Logging\n 显示 sql 在 application.properties 中配置\n# dao(com.wqlm.boot.user.dao) 层设置成 debug 级别以显示sql logging.level.com.wqlm.boot.user.dao=debug 输出日志到文件 在 application.properties 中配置\n# 当前活动的日志文件名 logging.file.name=logs/user/user.log # 最多保留多少天的日志 logging.file.max-history=30 # 单个日志文件最大容量 logging.file.max-size=10MB 精细化配置 在 application.properties 中只能进行有限的配置，如果想进一步配置，就需要使用对应日志框架的配置文件了！\nspring boot 使用 logback 作为日志实现框架，spring boot 推荐使用 logback-spring.xml 作为配置文件的名称。\n以下是一个参考的配置样例\n    scan=\"true\" scanPeriod=\"300 seconds\"      conversionWord=\"clr\" converterClass=\"org.springframework.boot.logging.logback.ColorConverter\"/      name=\"env\" scope=\"context\" source=\"spring.profiles.active\" defaultValue=\"env\"/      name=\"APP_NAME\" value=\"user\"/   %date：日期，默认格式 yyyy-MM-dd hhh:mm:ss,SSS 默认使用本机时区，通过 %d{yyyy-MM-dd hhh:mm:ss,SSS} 来自定义 %-5level：5个占位符的日志级别，例如\" info\"、\"error\" %thread : 输出日志的线程 %class : 输出日志的类的完全限定名，效率低 %method : 输出日志的方法名 %line : 输出日志的行号，效率低 %msg : 日志消息内容 %n : 换行 --   name=\"LOG_PATTERN\" value=\"%date %-5level ${PID:- } --- [%thread] %class.%method/%line : %msg%n\"/      name=\"LOG_PATTERN_COLOUR\"  value=\"${env} %date %clr(%-5level) %magenta(${PID:- }) --- [%thread] %cyan(%class.%method/%line) : %msg%n\"/       name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"      ${LOG_PATTERN_COLOUR}    UTF-8          name=\"ROLLING\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"    logs/${APP_NAME}/${APP_NAME}.log     class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\"  %d : 日期，默认格式 yyyy-MM-dd，通过 %d{yyyy-MM-dd hhh:mm:ss} 来自定义格式。logback 就是通过 %d 知道了触发滚动的时机 %i : 单个滚动周期内的日志文件的序列号 .zip : 将日志文件压缩成zip。不想压缩，可以使用.log 结尾 如下每天0点以后的第一日志请求触发滚动，将前一天的日志打成 zip 压缩包存放在 logs/app1/backup 下，并命名为 app1_%d_%i.zip --  logs/${APP_NAME}/backup/${APP_NAME}_%d{yyyy-MM-dd}_%i.zip     10MB     30    1GB        ${LOG_PATTERN}    UTF-8           name=\"!prod\"     name=\"com.wqlm.boot.dao\" level=\"debug\" additivity=\"false\"   ref=\"STDOUT\"/   ref=\"ROLLING\"/           level=\"info\"     ref=\"STDOUT\"/   ref=\"ROLLING\"/    相对路径的位置 ","wordCount":"9862","inLanguage":"zh","datePublished":"2022-03-14T17:11:00Z","dateModified":"2022-03-14T17:11:00Z","author":{"@type":"Person","name":"swimminghao"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_04_spring/%E8%B6%85%E8%AF%A6%E7%BB%86%E4%BB%8E0%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BAspring-boot-%E9%A1%B9%E7%9B%AE/"},"publisher":{"@type":"Organization","name":"swimminghao","logo":{"@type":"ImageObject","url":"https://swimminghao1.github.io/favicon.ico"}}}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://swimminghao1.github.io/ accesskey=h title="🍀 swimminghao (Alt + H)">🍀 swimminghao</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://swimminghao1.github.io/categories/ title="🗂 归类"><span>🗂 归类</span></a></li><li><a href=https://swimminghao1.github.io/tags/ title="🏷️ 标签"><span>🏷️ 标签</span></a></li><li><a href=https://swimminghao1.github.io/archives/ title="⏱️ 时间轴"><span>⏱️ 时间轴</span></a></li><li><a href=https://swimminghao1.github.io/search/ title="🔍 索引 (Alt + /)" accesskey=/><span>🔍 索引</span></a></li><li><a href=https://swimminghao1.github.io/friends title="🧑‍🤝‍🧑 友链"><span>🧑‍🤝‍🧑 友链</span></a></li><li><a href=https://www.travellings.cn/go.html title=🚇><span>🚇</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://swimminghao1.github.io/>主页</a>&nbsp;»&nbsp;<a href=https://swimminghao1.github.io/post/>📚文章</a></div><h1 class=post-title><a href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_04_spring/%E8%B6%85%E8%AF%A6%E7%BB%86%E4%BB%8E0%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BAspring-boot-%E9%A1%B9%E7%9B%AE/>超详细从0开始搭建 Spring Boot 项目</a></h1><div class=post-meta>March 14, 2022&nbsp;·&nbsp;20 分钟&nbsp;·&nbsp;9862 字&nbsp;·&nbsp;swimminghao&nbsp;|&nbsp;<a href=https://github.com/songtianlun/songtianlun.github.io/edit/main/content/post/02%e4%b8%aa%e4%ba%ba%e5%ad%a6%e4%b9%a0/06_04_spring/%e8%b6%85%e8%af%a6%e7%bb%86%e4%bb%8e0%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%baSpring%20Boot%20%e9%a1%b9%e7%9b%ae.md rel="noopener noreferrer" target=_blank>PR</a>
<span>| <span class=waline-pageview-count data-path=/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_04_spring/%E8%B6%85%E8%AF%A6%E7%BB%86%E4%BB%8E0%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BAspring-boot-%E9%A1%B9%E7%9B%AE/><i class="fa fa-spinner fa-spin"></i></span> Hits</span></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e8%b6%85%e8%af%a6%e7%bb%86%e4%bb%8e0%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba-spring-boot-%e9%a1%b9%e7%9b%ae aria-label="超详细从0开始搭建 Spring Boot 项目">超详细从0开始搭建 Spring Boot 项目</a></li><li><a href=#%e6%ba%90%e7%a0%81 aria-label=源码>源码</a></li><li><a href=#100-%e5%88%9b%e5%bb%ba%e9%a1%b9%e7%9b%ae aria-label="1.0.0 创建项目">1.0.0 创建项目</a><ul><li><a href=#%e6%b7%bb%e5%8a%a0maven%e9%95%9c%e5%83%8f aria-label=添加maven镜像>添加maven镜像</a></li><li><a href=#pom-%e6%96%87%e4%bb%b6 aria-label="pom 文件">pom 文件</a></li><li><a href=#%e4%be%9d%e8%b5%96%e7%bb%93%e6%9e%84%e5%9b%be aria-label=依赖结构图>依赖结构图</a></li></ul></li><li><a href=#%e7%95%aa%e5%a4%96 aria-label=番外>番外</a></li><li><a href=#110-%e6%b7%bb%e5%8a%a0-web-%e6%a8%a1%e5%9d%97 aria-label="1.1.0 添加 web 模块">1.1.0 添加 web 模块</a><ul><li><a href=#%e4%bd%9c%e7%94%a8 aria-label=作用>作用</a></li><li><a href=#%e4%be%9d%e8%b5%96%e7%bb%93%e6%9e%84%e5%9b%be-1 aria-label=依赖结构图>依赖结构图</a></li></ul></li><li><a href=#120-%e9%9b%86%e6%88%90-mysql aria-label="1.2.0 集成 mysql">1.2.0 集成 mysql</a><ul><li><a href=#%e5%bc%95%e5%85%a5%e4%be%9d%e8%b5%96 aria-label=引入依赖>引入依赖</a></li><li><a href=#%e9%85%8d%e7%bd%ae-mysql aria-label="配置 mysql">配置 mysql</a></li><li><a href=#%e5%88%9b%e5%bb%ba%e7%a4%ba%e4%be%8b%e6%95%b0%e6%8d%ae%e5%ba%93%e5%92%8c%e8%a1%a8 aria-label=创建示例数据库和表>创建示例数据库和表</a></li></ul></li><li><a href=#130-%e5%a4%9a%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae aria-label="1.3.0 多环境配置">1.3.0 多环境配置</a><ul><li><a href=#spring-%e5%a4%9a%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae aria-label="spring 多环境配置">spring 多环境配置</a></li><li><a href=#maven-%e5%a4%9a%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae aria-label="maven 多环境配置">maven 多环境配置</a><ul><li><a href=#%e7%ac%ac%e4%b8%80%e4%b8%aa%e9%97%ae%e9%a2%98 aria-label=第一个问题>第一个问题</a></li><li><a href=#%e7%ac%ac%e4%ba%8c%e4%b8%aa%e9%97%ae%e9%a2%98 aria-label=第二个问题>第二个问题</a></li></ul></li><li><a href=#pom-%e6%96%87%e4%bb%b6-1 aria-label="pom 文件">pom 文件</a></li></ul></li><li><a href=#140-%e5%a4%9a%e6%a8%a1%e5%9d%97%e9%85%8d%e7%bd%ae aria-label="1.4.0 多模块配置">1.4.0 多模块配置</a><ul><li><a href=#%e6%8b%86%e5%88%86%e7%8e%b0%e6%9c%89%e9%a1%b9%e7%9b%ae aria-label=拆分现有项目>拆分现有项目</a></li><li><a href=#%e5%a4%9a%e6%a8%a1%e5%9d%97%e9%85%8d%e7%bd%ae aria-label=多模块配置>多模块配置</a></li><li><a href=#%e5%a4%9a%e6%a8%a1%e5%9d%97%e7%ae%a1%e7%90%86 aria-label=多模块管理>多模块管理</a></li></ul></li><li><a href=#150-%e9%9b%86%e6%88%90-mybatis aria-label="1.5.0 集成 mybatis">1.5.0 集成 mybatis</a><ul><li><a href=#%e6%b7%bb%e5%8a%a0%e4%be%9d%e8%b5%96 aria-label=添加依赖>添加依赖</a></li><li><a href=#%e4%be%9d%e8%b5%96%e7%bb%93%e6%9e%84%e5%9b%be-2 aria-label=依赖结构图>依赖结构图</a></li><li><a href=#%e5%88%9b%e5%bb%ba%e5%af%b9%e5%ba%94%e7%9a%84%e6%96%87%e4%bb%b6%e5%a4%b9 aria-label=创建对应的文件夹>创建对应的文件夹</a></li><li><a href=#%e9%85%8d%e7%bd%ae-mybatis aria-label="配置 mybatis">配置 mybatis</a></li></ul></li><li><a href=#151-%e9%85%8d%e7%bd%ae-mybatis-generator aria-label="1.5.1 配置 MyBatis Generator">1.5.1 配置 MyBatis Generator</a><ul><li><a href=#%e5%bc%95%e5%85%a5%e5%b9%b6%e9%85%8d%e7%bd%ae-mybatis-generator-%e6%8f%92%e4%bb%b6 aria-label="引入并配置 MyBatis Generator 插件">引入并配置 MyBatis Generator 插件</a></li><li><a href=#%e9%85%8d%e7%bd%ae-mybatis-generator-config-%e6%96%87%e4%bb%b6 aria-label="配置 MyBatis Generator Config 文件">配置 MyBatis Generator Config 文件</a><ul><li><a href=#application-devproperties-%e7%9a%84%e9%85%8d%e7%bd%ae aria-label="application-dev.properties 的配置">application-dev.properties 的配置</a></li></ul></li><li><a href=#%e4%bd%bf%e7%94%a8-mybatis-generator-%e6%8f%92%e4%bb%b6 aria-label="使用 MyBatis Generator 插件">使用 MyBatis Generator 插件</a></li></ul></li><li><a href=#152-%e9%9b%86%e6%88%90-tkmybatis-%e9%80%9a%e7%94%a8mapper aria-label="1.5.2 集成 tk.mybatis (通用mapper)">1.5.2 集成 tk.mybatis (通用mapper)</a><ul><li><a href=#%e5%bc%95%e5%85%a5%e4%be%9d%e8%b5%96-1 aria-label=引入依赖>引入依赖</a></li><li><a href=#%e9%85%8d%e7%bd%ae-tkmybatis-%e7%9a%84-mybatis-generator-%e6%8f%92%e4%bb%b6 aria-label="配置 tk.mybatis 的 MyBatis Generator 插件">配置 tk.mybatis 的 MyBatis Generator 插件</a><ul><li><a href=#%e5%bc%95%e5%85%a5%e6%8f%92%e4%bb%b6%e4%be%9d%e8%b5%96 aria-label=引入插件依赖>引入插件依赖</a></li><li><a href=#%e4%bf%ae%e6%94%b9-mybatis-generator-config aria-label="修改 MyBatis Generator Config">修改 MyBatis Generator Config</a></li></ul></li><li><a href=#%e5%90%af%e5%8a%a8%e7%b1%bb%e4%b8%8a%e9%85%8d%e7%bd%ae%e8%a6%81%e6%89%ab%e6%8f%8f%e7%9a%84-dao-%e8%b7%af%e5%be%84 aria-label="启动类上配置要扫描的 dao 路径">启动类上配置要扫描的 dao 路径</a></li><li><a href=#%e9%85%8d%e7%bd%ae%e9%80%9a%e7%94%a8-mapper aria-label="配置通用 Mapper">配置通用 Mapper</a></li></ul></li><li><a href=#153-%e9%9b%86%e6%88%90-pagehelper-%e5%88%86%e9%a1%b5%e6%8f%92%e4%bb%b6 aria-label="1.5.3 集成 pagehelper 分页插件">1.5.3 集成 pagehelper 分页插件</a><ul><li><a href=#%e5%bc%95%e5%85%a5-pagehelper-%e4%be%9d%e8%b5%96 aria-label="引入 pagehelper 依赖">引入 pagehelper 依赖</a></li><li><a href=#%e9%85%8d%e7%bd%ae-pagehelper aria-label="配置 pagehelper">配置 pagehelper</a></li></ul></li><li><a href=#160-%e5%bc%95%e5%85%a5-lombok-%e6%8f%92%e4%bb%b6 aria-label="1.6.0 引入 lombok 插件">1.6.0 引入 lombok 插件</a><ul><li><a href=#%e5%bc%95%e5%85%a5-lombok-%e4%be%9d%e8%b5%96 aria-label="引入 lombok 依赖">引入 lombok 依赖</a></li><li><a href=#%e5%ae%89%e8%a3%85-ide-%e5%af%b9%e5%ba%94%e7%9a%84-lombok-%e6%8f%92%e4%bb%b6 aria-label="安装 ide 对应的 lombok 插件">安装 ide 对应的 lombok 插件</a></li></ul></li><li><a href=#170-%e9%9b%86%e6%88%90-redis aria-label="1.7.0 集成 redis">1.7.0 集成 redis</a></li><li><a href=#171-%e9%9b%86%e6%88%90-spring-cache aria-label="1.7.1 集成 spring cache">1.7.1 集成 spring cache</a></li><li><a href=#180-%e5%bc%80%e5%8f%91%e7%94%a8%e6%88%b7%e6%a8%a1%e5%9d%97 aria-label="1.8.0 开发用户模块">1.8.0 开发用户模块</a><ul><li><a href=#%e7%94%a8%e6%88%b7%e8%a1%a8 aria-label=用户表>用户表</a></li><li><a href=#%e6%b7%bb%e5%8a%a0-controller-service-dto aria-label="添加 controller 、service 、dto">添加 controller 、service 、dto</a></li></ul></li><li><a href=#181-%e8%87%aa%e5%ae%9a%e4%b9%89%e5%85%a8%e5%b1%80%e7%8a%b6%e6%80%81%e7%a0%81%e5%92%8c%e4%b8%9a%e5%8a%a1%e7%bb%93%e6%9e%9c%e7%b1%bb aria-label="1.8.1 自定义全局状态码和业务结果类">1.8.1 自定义全局状态码和业务结果类</a><ul><li><a href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%85%a8%e5%b1%80%e7%8a%b6%e6%80%81%e7%a0%81 aria-label=自定义全局状态码>自定义全局状态码</a></li><li><a href=#%e5%88%9b%e5%bb%ba%e4%b8%9a%e5%8a%a1%e7%bb%93%e6%9e%9c%e7%b1%bb aria-label=创建业务结果类>创建业务结果类</a></li><li><a href=#%e6%94%b9%e9%80%a0%e6%b3%a8%e5%86%8c%e6%8e%a5%e5%8f%a3 aria-label=改造注册接口>改造注册接口</a></li></ul></li><li><a href=#182-%e7%bb%9f%e4%b8%80%e5%bc%82%e5%b8%b8%e5%a4%84%e7%90%86 aria-label="1.8.2 统一异常处理">1.8.2 统一异常处理</a><ul><li><a href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%bc%82%e5%b8%b8%e7%b1%bb aria-label=自定义异常类>自定义异常类</a></li><li><a href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%bc%82%e5%b8%b8%e5%a4%84%e7%90%86%e7%b1%bb aria-label=自定义异常处理类>自定义异常处理类</a></li><li><a href=#%e4%bd%bf%e7%94%a8%e8%87%aa%e5%ae%9a%e4%b9%89%e5%bc%82%e5%b8%b8 aria-label=使用自定义异常>使用自定义异常</a></li></ul></li><li><a href=#183-%e5%8f%82%e6%95%b0%e6%a0%a1%e9%aa%8c%e5%8f%8a%e5%bc%82%e5%b8%b8%e5%a4%84%e7%90%86 aria-label="1.8.3 参数校验及异常处理">1.8.3 参数校验及异常处理</a><ul><li><a href=#%e5%8f%82%e6%95%b0%e6%a0%a1%e9%aa%8c aria-label=参数校验>参数校验</a></li><li><a href=#%e5%bc%82%e5%b8%b8%e5%a4%84%e7%90%86 aria-label=异常处理>异常处理</a></li></ul></li><li><a href=#184-%e6%b7%bb%e5%8a%a0%e7%99%bb%e9%99%86%e4%bf%ae%e6%94%b9%e5%af%86%e7%a0%81%e8%8e%b7%e5%8f%96%e7%94%a8%e6%88%b7%e4%bf%a1%e6%81%af%e7%9a%84%e6%8e%a5%e5%8f%a3 aria-label="1.8.4 添加登陆、修改密码、获取用户信息的接口">1.8.4 添加登陆、修改密码、获取用户信息的接口</a></li><li><a href=#185-%e6%b7%bb%e5%8a%a0%e8%ae%a4%e8%af%81%e6%8b%a6%e6%88%aa%e5%99%a8 aria-label="1.8.5 添加认证拦截器">1.8.5 添加认证拦截器</a></li><li><a href=#186-%e7%bb%9f%e4%b8%80%e6%98%a0%e5%b0%84%e8%87%aa%e5%ae%9a%e4%b9%89%e9%85%8d%e7%bd%ae aria-label="1.8.6 统一映射自定义配置">1.8.6 统一映射自定义配置</a></li><li><a href=#190-%e9%85%8d%e7%bd%ae%e6%97%a5%e5%bf%97 aria-label="1.9.0 配置日志">1.9.0 配置日志</a><ul><li><a href=#%e6%98%be%e7%a4%ba-sql aria-label="显示 sql">显示 sql</a></li><li><a href=#%e8%be%93%e5%87%ba%e6%97%a5%e5%bf%97%e5%88%b0%e6%96%87%e4%bb%b6 aria-label=输出日志到文件>输出日志到文件</a></li><li><a href=#%e7%b2%be%e7%bb%86%e5%8c%96%e9%85%8d%e7%bd%ae aria-label=精细化配置>精细化配置</a></li></ul></li></ul></div><div><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-7296634171837358 data-ad-slot=9161921641 data-ad-format=auto data-full-width-responsive=true></ins></div><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></details></div><div class=post-content><blockquote style=margin-top:8px><p style=text-align:center;text-indent:0><a href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_04_spring/%E8%B6%85%E8%AF%A6%E7%BB%86%E4%BB%8E0%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BAspring-boot-%E9%A1%B9%E7%9B%AE/>本文</a>
首发于
<a href=https://swimminghao1.github.io/>🍀 永浩</a>，
<a href=/disclaimer/>转载</a> 请注明
<a href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_04_spring/%E8%B6%85%E8%AF%A6%E7%BB%86%E4%BB%8E0%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BAspring-boot-%E9%A1%B9%E7%9B%AE/>来源</a>。</p></blockquote><h1 id=超详细从0开始搭建-spring-boot-项目>超详细从0开始搭建 Spring Boot 项目<a hidden class=anchor aria-hidden=true href=#超详细从0开始搭建-spring-boot-项目>#</a></h1><p>这个项目，我是打算作为种子项目的，作为种子项目，必须的“开箱即用”，必须要包含大部分 web 开发的相关功能，后期所有的 Spring Boot 项目都是将这个项目拿来，简单修改一下配置，就可以快速开发了。</p><h1 id=源码>源码<a hidden class=anchor aria-hidden=true href=#源码>#</a></h1><p><a href=https://github.com/wqlm/boot>Github</a></p><h1 id=100-创建项目>1.0.0 创建项目<a hidden class=anchor aria-hidden=true href=#100-创建项目>#</a></h1><p>我使用的是 idea</p><p>创建项目 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/w8NHXh.png alt=img></p><p>选择 Spring initializr ，如果点Next一直在转圈，可能是 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fstart.spring.io%2F">start.spring.io/</a> 在国外，访问比较慢。可以科学上网或者，使用自定义的 <a href="https://link.juejin.cn/?target=http%3A%2F%2Fstart.spring.io%2F">start.spring.io/</a> <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/T8zrCm.png alt=img></p><p>主要改以下组织名称、项目名称和项目描述就好了 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/JQ1yll.png alt=img></p><p>我创建项目的时候， Spring Boot 最新稳定版是 2.1.9 。要用就用最新的！！！ 依赖先都不勾选，后期一项一项加</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/2PU7rC.png alt=img></p><p>项目文件夹名称以及存放位置 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/ejmw40.png alt=img></p><h2 id=添加maven镜像>添加maven镜像<a hidden class=anchor aria-hidden=true href=#添加maven镜像>#</a></h2><p>添加maven镜像加快依赖下载速度</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;repositories&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;repository&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;name&gt;</span>华为maven仓库<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;id&gt;</span>huawei<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;url&gt;</span>https://mirrors.huaweicloud.com/repository/maven/<span style=color:#f92672>&lt;/url&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/repository&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/repositories&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;pluginRepositories&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;pluginRepository&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;name&gt;</span>华为maven插件仓库<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;id&gt;</span>huawei_plugin<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;url&gt;</span>https://mirrors.huaweicloud.com/repository/maven/<span style=color:#f92672>&lt;/url&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/pluginRepository&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/pluginRepositories&gt;</span>
</span></span></code></pre></div><h2 id=pom-文件>pom 文件<a hidden class=anchor aria-hidden=true href=#pom-文件>#</a></h2><p>整体 .pom 文件内容如下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;project</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://maven.apache.org/POM/4.0.0&#34;</span> <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;modelVersion&gt;</span>4.0.0<span style=color:#f92672>&lt;/modelVersion&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;parent&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.boot<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>spring-boot-starter-parent<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;version&gt;</span>2.1.9.RELEASE<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;relativePath/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/parent&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>com.wqlm<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>boot<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>0.0.1-SNAPSHOT<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;name&gt;</span>boot<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;description&gt;</span>Spring Boot Demo<span style=color:#f92672>&lt;/description&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;java.version&gt;</span>1.8<span style=color:#f92672>&lt;/java.version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.boot<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>spring-boot-starter<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.boot<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>spring-boot-starter-test<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;scope&gt;</span>test<span style=color:#f92672>&lt;/scope&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;build&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;plugins&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.boot<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;artifactId&gt;</span>spring-boot-maven-plugin<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/plugin&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/plugins&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/build&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;repositories&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;repository&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;name&gt;</span>华为maven仓库<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;id&gt;</span>huawei<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;url&gt;</span>https://mirrors.huaweicloud.com/repository/maven/<span style=color:#f92672>&lt;/url&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/repository&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/repositories&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;pluginRepositories&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;pluginRepository&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;name&gt;</span>华为maven插件仓库<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;id&gt;</span>huawei_plugin<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;url&gt;</span>https://mirrors.huaweicloud.com/repository/maven/<span style=color:#f92672>&lt;/url&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/pluginRepository&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/pluginRepositories&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/project&gt;</span>
</span></span></code></pre></div><h2 id=依赖结构图>依赖结构图<a hidden class=anchor aria-hidden=true href=#依赖结构图>#</a></h2><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/123.png alt=img></p><h1 id=番外>番外<a hidden class=anchor aria-hidden=true href=#番外>#</a></h1><p>观察仔细的人应该发现了，<strong>spring-boot-starter</strong> 和 <strong>spring-boot-starter-test</strong> 都没有指定版本，那它们是怎么确定版本的？</p><blockquote><p>参考 <a href=https://juejin.cn/post/6844903965444816903>为什么 maven 依赖可以不指定版本</a></p></blockquote><h1 id=110-添加-web-模块>1.1.0 添加 web 模块<a hidden class=anchor aria-hidden=true href=#110-添加-web-模块>#</a></h1><p>在 pom 文件中添加 web 模块</p><pre tabindex=0><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><p>由于 <strong>spring-boot-starter-web</strong> 包含 <strong>spring-boot-starter</strong> <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/JFwFNq.png alt=img></p><p>建议删掉如下 <strong>spring-boot-starter</strong> 依赖，以保证依赖的干净整洁</p><pre tabindex=0><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><h2 id=作用>作用<a hidden class=anchor aria-hidden=true href=#作用>#</a></h2><p>引入 <strong>spring-boot-starter-web</strong> 后，我们可以</p><ul><li>编写 web 应用</li><li>不需要配置容器即可运行 web 应用</li><li>对请求参数进行校验</li><li>将业务结果对象转换成 josn 返回</li></ul><h2 id=依赖结构图-1>依赖结构图<a hidden class=anchor aria-hidden=true href=#依赖结构图-1>#</a></h2><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/SpringBootWeb.png alt=img>
从图中我们可以看到 <strong>spring-boot-starter-web</strong> 引入了几个关键的依赖</p><ul><li><p>spring-boot-starter</p></li><li><p><strong>spring-boot-starter-tomcat</strong>：spring boot 不需要 tomcat 也能启动就是因为它</p></li><li><p>spring-webmvc</p></li><li><p>spring-web</p></li><li><p>spring-boot-starter-json</p><p>： 有了它，就可以使用 @ResponseBody 返回 json 数据</p><ul><li><strong>jackson</strong> ：spring boot 默认的 json 解析工具</li></ul></li><li><p>hibernate-validator</p><p>：提供参数校验的注解，如</p><p>@Range、@Length</p><ul><li><strong>javax.validation</strong>：提供参数校验的注解，如 <strong>@NotBlank、@NotNull、@Pattern</strong></li></ul></li></ul><p>关于参数校验请参考 <a href=https://juejin.cn/post/6844903961581846535#heading-4>参数校验 Hibernate-Validator</a></p><h1 id=120-集成-mysql>1.2.0 集成 mysql<a hidden class=anchor aria-hidden=true href=#120-集成-mysql>#</a></h1><p>Spring Boot 集成 mysql 需要 <strong>JDBC 驱动</strong> 和 <strong>mysql 驱动</strong></p><h2 id=引入依赖>引入依赖<a hidden class=anchor aria-hidden=true href=#引入依赖>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;!--JDBC--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.springframework.boot<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>spring-boot-starter-jdbc<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--mysql--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>mysql<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>mysql-connector-java<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></div><p>版本号可以不用填，spring boot 配置了默认的版本号。例如 spring boot 2.1.9.RELEASE 对应的 mysql-connector-java 版本为 8.0.17</p><h2 id=配置-mysql>配置 mysql<a hidden class=anchor aria-hidden=true href=#配置-mysql>#</a></h2><p>根据 <strong>mysql-connector-java</strong> 版本不同，配置的内容也有些许差异</p><pre tabindex=0><code># mysql-connector-java 6.0.x 以下版本配置
spring.datasource.driverClassName=com.mysql.jdbc.Driver
spring.datasource.url=jdbc:mysql://localhost:3306/boot?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false
spring.datasource.username=root
spring.datasource.password=123456


# mysql-connector-java 6.0.x 及以上版本配置
spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://localhost:3306/boot?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai
spring.datasource.username=root
spring.datasource.password=123456
</code></pre><p>如下图，<strong>spring boot 2.1.9.RELEASE</strong> 对应的 <strong>mysql-connector-java</strong> 版本为 8.0.17 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/UqEhk0.png alt=img></p><p>更多请参考<a href=https://juejin.cn/post/6844903965713252360>MySQL JDBC 连接</a></p><h2 id=创建示例数据库和表>创建示例数据库和表<a hidden class=anchor aria-hidden=true href=#创建示例数据库和表>#</a></h2><pre tabindex=0><code>-- 创建 boot 数据库
CREATE DATABASE
IF
	NOT EXISTS boot DEFAULT CHARSET utf8 COLLATE utf8_bin;

-- 选择 boot 数据库
USE boot;

-- 创建 user 表
SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;
DROP TABLE
IF
	EXISTS `user`;
CREATE TABLE `user` (
	`id` INT ( 11 ) NOT NULL AUTO_INCREMENT,
	`user_name` VARCHAR ( 255 ) COLLATE utf8_bin NOT NULL,
	`pasword` VARCHAR ( 255 ) COLLATE utf8_bin NOT NULL,
	`salt` VARCHAR ( 255 ) COLLATE utf8_bin NOT NULL,
	PRIMARY KEY ( `id` ) 
) ENGINE = INNODB DEFAULT CHARSET = utf8 COLLATE = utf8_bin;
SET FOREIGN_KEY_CHECKS = 1;
</code></pre><h1 id=130-多环境配置>1.3.0 多环境配置<a hidden class=anchor aria-hidden=true href=#130-多环境配置>#</a></h1><p>详细参考<a href=https://juejin.cn/post/6844903891763625998>spring profile 与 maven profile 多环境管理</a></p><h2 id=spring-多环境配置>spring 多环境配置<a hidden class=anchor aria-hidden=true href=#spring-多环境配置>#</a></h2><p><strong>配置一个 dev 环境</strong></p><p>创建 <code>application-dev.properties</code> 文件，并将 mysql 相关配置迁移过来 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/TlaIN7.png alt=img></p><p><strong>使用 dev 环境</strong></p><p>在 <code>application-dev.properties</code> 指定要使用的环境</p><pre tabindex=0><code class=language-properties data-lang=properties>spring.profiles.active=dev
</code></pre><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/PKG3wR.png alt=img></p><blockquote><p>同理你也可以创建 test、prod 环境，但一般公共配置还是会放在 application.properties 中，只有非公共配置才会放在各自的环境中</p></blockquote><h2 id=maven-多环境配置>maven 多环境配置<a hidden class=anchor aria-hidden=true href=#maven-多环境配置>#</a></h2><p>spring boot 多环境配置有两个缺点</p><ol><li>每次切换环境要手动修改 <code>spring.profiles.active</code> 的值</li><li>打包的时候，要手动删除其它环境的配置文件，不然其它环境的敏感信息就都打包进去了</li></ol><p>而 maven 的 profile 可以解决这两个问题</p><h3 id=第一个问题>第一个问题<a hidden class=anchor aria-hidden=true href=#第一个问题>#</a></h3><p><em><strong>&ldquo;每次切换环境要手动修改<code>spring.profiles.active</code>的值&rdquo;</strong></em></p><p>这个问题就可以通过配置 profile 解决，在pom的根节点下添加</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;profiles&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;profile&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;id&gt;</span>dev<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;activation&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- activeByDefault 为 true 表示，默认激活 id为dev 的profile--&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;activeByDefault&gt;</span>true<span style=color:#f92672>&lt;/activeByDefault&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/activation&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- properties 里面可以添加自定义节点，如下添加了一个env节点 --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 这个节点的值可以在maven的其他地方引用，可以简单理解为定义了一个叫env的变量 --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;env&gt;</span>dev<span style=color:#f92672>&lt;/env&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/profile&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;profile&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;id&gt;</span>test<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;env&gt;</span>test<span style=color:#f92672>&lt;/env&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/profile&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;profile&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;id&gt;</span>prod<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;env&gt;</span>prod<span style=color:#f92672>&lt;/env&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/profile&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/profiles&gt;</span>
</span></span></code></pre></div><p>如上，定义了三套环境，其中id为dev的是默认环境，三套环境中定义了叫 env的“变量”</p><p>如果你用的是idea编辑器，添加好后，maven控件窗口应该会多出一个 Profiles,其中默认值就是上面配置的dev</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/XvL7nF.png alt=img></p><p>最小化的 profiles 已经配置好了，通过勾选上图中的Profiles，就可以快速切换 maven的 profile 环境。</p><p>现在 maven profile 可以通过 勾选上图中的Profiles 快速切换环境</p><p>Spring Profile 还得通过 手动修改<code>spring.profiles.active</code>的值来切环境</p><p>现在的问题是怎样让 maven profile的环境与Spring Profile一一对应，达到切换maven profile环境时，Spring Profile环境也被切换了</p><p>还记得maven profile 中定义的 env &ldquo;变量"吗,现在只需要把</p><pre tabindex=0><code>spring.profiles.active=dev
</code></pre><p>改成</p><pre tabindex=0><code>spring.profiles.active=@env@
</code></pre><p>就将maven profile 与 Spring Profile 环境关联起来了</p><p>当maven profile 将 环境切换成 test 时，在pom中定义的id为test的profile环境将被激活，在该环境下env的值是test，maven插件会将 @env@ 替换为 test，这样Spring Profile的环境也随之发生了改变。从上面可以看出，自定义的"变量"env的值还不能乱写，要与Spring Profile的环境相对应。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/q13RBD.png alt=img></p><p><strong>总结</strong></p><ul><li>第一步，在<code>pom</code>文件中配置 profiles</li><li>第二步，在<code>application.properties</code>配置文件中添加 <code>spring.profiles.active=@env@</code></li></ul><h3 id=第二个问题>第二个问题<a hidden class=anchor aria-hidden=true href=#第二个问题>#</a></h3><p><em><strong>打包的时候，要手动删除其它环境的配置文件，不然其它环境的敏感信息就都打包进去了</strong></em></p><p>解决这个问题需要在pom根节点下中配置 build 信息</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;build&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;resources&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;resource&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;directory&gt;</span>src/main/resources<span style=color:#f92672>&lt;/directory&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;excludes&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>&lt;!--先排除application开头的配置文件--&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;exclude&gt;</span>application*.yml<span style=color:#f92672>&lt;/exclude&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/excludes&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/resource&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;resource&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;directory&gt;</span>src/main/resources<span style=color:#f92672>&lt;/directory&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--filtering 需要设置为 true，这样在include的时候，才会把
</span></span></span><span style=display:flex><span><span style=color:#75715e>            配置文件中的@env@ 这个maven`变量`替换成当前环境的对应值  --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;filtering&gt;</span>true<span style=color:#f92672>&lt;/filtering&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;includes&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>&lt;!--引入所需环境的配置文件--&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;include&gt;</span>application.yml<span style=color:#f92672>&lt;/include&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;include&gt;</span>application-${env}.yml<span style=color:#f92672>&lt;/include&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/includes&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/resource&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/resources&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/build&gt;</span>
</span></span></code></pre></div><ul><li>directory：资源文件所在目录</li><li>includes：需要包含的文件列表</li><li>excludes：需要排除的文件列表</li></ul><p>如上，配置了两个 <code>&lt;resource></code>，第一个先排除了src/main/resources目录下所有 application 开头是配置文件，第二个在第一个的基础上添加了所需的配置文件。注意 <code>application-${env}.yml</code>,它是一个动态变化的值，随着当前环境的改变而改变，假如当前环境是 id叫 dev的 profile，那么env的值为 dev。</p><p>这样配置后，maven在build时，就会根据配置先排除掉指定的配置文件，然后根据当前环境添加所需要的配置文件。</p><h2 id=pom-文件-1>pom 文件<a hidden class=anchor aria-hidden=true href=#pom-文件-1>#</a></h2><pre tabindex=0><code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&lt;project xmlns=&#34;http://maven.apache.org/POM/4.0.0&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
         xsi:schemaLocation=&#34;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&#34;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.1.9.RELEASE&lt;/version&gt;
        &lt;relativePath/&gt;
    &lt;/parent&gt;

    &lt;groupId&gt;com.wqlm&lt;/groupId&gt;
    &lt;artifactId&gt;boot&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;boot&lt;/name&gt;
    &lt;description&gt;Spring Boot Demo&lt;/description&gt;

    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;/properties&gt;

    &lt;!--maven 多环境--&gt;
    &lt;profiles&gt;
        &lt;profile&gt;
            &lt;id&gt;dev&lt;/id&gt;
            &lt;activation&gt;
                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt; &lt;!-- 为 true 表示，默认激活该 profile--&gt;
            &lt;/activation&gt;

            &lt;properties&gt; &lt;!-- properties 里面可以添加自定义节点，如下添加了一个env节点 --&gt;
                &lt;env&gt;dev&lt;/env&gt; &lt;!-- 这个节点的值可以在maven的其他地方引用，可以简单理解为定义了一个叫env的变量 --&gt;
            &lt;/properties&gt;
        &lt;/profile&gt;

        &lt;profile&gt;
            &lt;id&gt;test&lt;/id&gt;
            &lt;properties&gt;
                &lt;env&gt;test&lt;/env&gt;
            &lt;/properties&gt;
        &lt;/profile&gt;

        &lt;profile&gt;
            &lt;id&gt;prod&lt;/id&gt;
            &lt;properties&gt;
                &lt;env&gt;prod&lt;/env&gt;
            &lt;/properties&gt;
        &lt;/profile&gt;
    &lt;/profiles&gt;

    &lt;dependencies&gt;
        &lt;!--web--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;!--mysql--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;!--mybatis--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;2.1.0&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!--test--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
        &lt;resources&gt;
            &lt;resource&gt;
                &lt;directory&gt;src/main/resources&lt;/directory&gt;
                &lt;excludes&gt;
                    &lt;!--先排除application开头的配置文件--&gt;
                    &lt;exclude&gt;application*.yml&lt;/exclude&gt;
                &lt;/excludes&gt;
            &lt;/resource&gt;
            &lt;resource&gt;
                &lt;directory&gt;src/main/resources&lt;/directory&gt;
                &lt;!--filtering 需要设置为 true，这样在include的时候，才会把配置文件中的@env@ 这个maven`变量`替换成当前环境的对应值--&gt;
                &lt;filtering&gt;true&lt;/filtering&gt;
                &lt;includes&gt;
                    &lt;!--引入所需环境的配置文件--&gt;
                    &lt;include&gt;application.yml&lt;/include&gt;
                    &lt;include&gt;application-${env}.yml&lt;/include&gt;
                &lt;/includes&gt;
            &lt;/resource&gt;
        &lt;/resources&gt;
    &lt;/build&gt;

    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;name&gt;华为maven仓库&lt;/name&gt;
            &lt;id&gt;huawei&lt;/id&gt;
            &lt;url&gt;https://mirrors.huaweicloud.com/repository/maven/&lt;/url&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;

    &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
            &lt;name&gt;华为maven插件仓库&lt;/name&gt;
            &lt;id&gt;huawei_plugin&lt;/id&gt;
            &lt;url&gt;https://mirrors.huaweicloud.com/repository/maven/&lt;/url&gt;
        &lt;/pluginRepository&gt;
    &lt;/pluginRepositories&gt;
&lt;/project&gt;
</code></pre><h1 id=140-多模块配置>1.4.0 多模块配置<a hidden class=anchor aria-hidden=true href=#140-多模块配置>#</a></h1><p>稍微大一点的项目一般都会采用多模块的形式管理项目，将一个大型项目升级成多模块项目，一般需要两大步骤</p><ol><li>拆分现有项目</li><li>进行 <strong>maven 多模块配置</strong></li></ol><blockquote><p>关于<strong>如何拆分现有项目</strong>和<strong>maven 多模块配置</strong>的详细介绍请参考 <a href=https://juejin.cn/post/6844903970024980488>Maven 多模块配置、管理</a></p></blockquote><h2 id=拆分现有项目>拆分现有项目<a hidden class=anchor aria-hidden=true href=#拆分现有项目>#</a></h2><p>我是按照功能拆分项目的，但由于该项目本身不大，所以我简单的拆分为 <strong>user 模块和 common 模块</strong></p><p>在boot下创建两个新的模块 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/jIfN1z.png alt=img></p><p>子模块的pom <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/26QxUd.png alt=img></p><p>此时，父模块的pom内容也发生了改变，添加了如下三行 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/D8QTvR.png alt=img></p><p>再来创建 common 模块，创建过程同上，我就不演示了,创建好之后，pom如下 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/9w9MDz.png alt=img></p><p>整个项目结构如下 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/u6PtzJ.png alt=img></p><p>下一步进行迁移工作，将原先 src 目录下面的内容迁移到对于的子模块中 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/cwvRoe.png alt=img></p><p>这里我放到 user 模块中，迁移过程中注意路径和命名规范，过程就不展示了，迁移之后，结构如下。 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/tbuJkH.png alt=img></p><h2 id=多模块配置>多模块配置<a hidden class=anchor aria-hidden=true href=#多模块配置>#</a></h2><p>多模块配置遵守以下原则</p><ul><li>公共、通用配置一定要配置在父pom中</li><li>版本号由父 pom 统一管理</li></ul><p>如下图，蓝色背景的元素都会被子项目全部继承 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/jsOsQG.png alt=img></p><p>由于目前，只有 user 模块用到了如下依赖项，而 common 模块不需要用到这些依赖，所以，将依赖复制到 user 模块下，后删掉依赖 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/P84pRC.png alt=img></p><p><strong>build</strong>中的配置目前也是只有 user 模块用到，也复制到 user 模块下，后删掉 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/9Tnf3i.png alt=img></p><p>父项目已经配置完成了，接下来配置 user 模块，如下 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/jIFFov.png alt=img></p><p>common 模块用到的时候在配置</p><h2 id=多模块管理>多模块管理<a hidden class=anchor aria-hidden=true href=#多模块管理>#</a></h2><p><strong>多模块环境管理</strong> 我们在父 pom 中配置了 maven 多环境，子模块会继承这些配置。之后，我们只需要在 maven 插件中切换环境，所有的子模块的 maven 环境都会被切换 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/14/pAe8jr.png alt=img></p><p><strong>多模块构建管理</strong> 在 maven 插件中，通过 boot 项目对所以子模块进行、编译、测试、打包、清理&mldr; <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/94zsV0.png alt=img></p><h1 id=150-集成-mybatis>1.5.0 集成 mybatis<a hidden class=anchor aria-hidden=true href=#150-集成-mybatis>#</a></h1><p>集成 mybatis 一般需要5步</p><ol><li>引入依赖</li><li>创建 PO 层，存放我们的数据持久化对象</li><li>创建 DAO 层，存放数据库的增删改查方法</li><li>创建 mapper.xml 层, 对应增删改查语句</li><li>在启动类上配置 @MapperScan</li><li>其他。如配置 MyBatis Generator，用来帮我们生成 PO、DAO、Mapper.xml</li></ol><h2 id=添加依赖>添加依赖<a hidden class=anchor aria-hidden=true href=#添加依赖>#</a></h2><p>在多模块项目中添加依赖要注意一下几点</p><ul><li>不要将依赖直接添加到父 pom 中，这样所以子模块都会继承该依赖</li><li>多个模块引用了统一个依赖，最好保证依赖的版本一致</li></ul><p>maven dependencyManagement 可以非常方便的管理多模块的依赖</p><blockquote><p>关于 maven dependencyManagement 请参考 <a href=https://juejin.cn/post/6844903965444816903>maven 依赖版本管理</a></p></blockquote><p>这里我就不在解释，直接应用了</p><ol><li><p>在父 pom 的根节点下, <strong>properties</strong> 里，定义mybatis-spring-boot-starter 版本号的变量</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;mybatis-spring-boot-starter.version&gt;</span>2.1.0<span style=color:#f92672>&lt;/mybatis-spring-boot-starter.version&gt;</span>
</span></span></code></pre></div><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/dz72JN.png alt=img></p></li><li><p>在父 pom 的根节点下，<strong>申明</strong> mybatis 依赖</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependencyManagement&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>org.mybatis.spring.boot<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>mybatis-spring-boot-starter<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>${mybatis-spring-boot-starter.version}<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependencyManagement&gt;</span>
</span></span></code></pre></div><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/ZKQezo.png alt=img></p></li><li><p>在 user 模块的 pom 文件中引入 mybatis 依赖</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.mybatis.spring.boot<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>mybatis-spring-boot-starter<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></div></li><li><p>由于 <strong>mybatis-spring-boot-starter</strong> 包含 <strong>spring-boot-starter-jdbc</strong> ，所以删除<strong>spring-boot-starter-jdbc</strong>依赖，保证依赖的整洁</p></li></ol><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/Udl9pr.png alt=img></p><h2 id=依赖结构图-2>依赖结构图<a hidden class=anchor aria-hidden=true href=#依赖结构图-2>#</a></h2><p><img loading=lazy src=https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1280fbe2516d4464acf313c5fd450c90~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp alt=img></p><h2 id=创建对应的文件夹>创建对应的文件夹<a hidden class=anchor aria-hidden=true href=#创建对应的文件夹>#</a></h2><p>如图</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/dYdApC.png alt=img></p><p><strong>com.wqlm.boot</strong></p><ul><li><strong>controller</strong> ：控制层</li><li><strong>po</strong> : 存放与数据库中表相对应的java对象</li><li><strong>dto</strong> : 存放数据传输对象，比如注册时，注册的信息可以用一个 dto 对象来接收</li><li><strong>dao</strong> : 存放操作数据库的接口</li><li><strong>service</strong> : 业务层</li><li><strong>vo</strong> : 存放业务返回结果对象</li><li><strong>qo</strong> : 封装了查询参数的对象</li></ul><p><strong>resources</strong></p><ul><li><strong>mapper</strong> : 存放mapper.xml 文件</li></ul><h2 id=配置-mybatis>配置 mybatis<a hidden class=anchor aria-hidden=true href=#配置-mybatis>#</a></h2><p>mybatis 需要知道有那些类是 <strong>mapper</strong>！有两种方式可以告诉 mybatis。</p><p><strong>第一种</strong></p><p>在启动类上配置 <strong>@MapperScan</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> 指定你的 mapper接口所在的 <span style=color:#f92672>package</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span>MapperScan<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.wqlm.boot.user.dao&#34;</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/SNZ4na.png alt=img></p><p><strong>第二种</strong> 在接口上加 <code>@Mapper</code> 注解，如下 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/hWTvLA.png alt=img></p><blockquote><p>要我选我肯定选第一种配置方式，一劳永逸</p></blockquote><p>除此之外，还要告诉 mybatis ，你的 mapper.xml 文件在哪</p><pre tabindex=0><code># mybatis
# mapper.xml文件的位置
mybatis.mapper-locations=classpath*:mapper/*.xml
</code></pre><p>由于这里的配置跟环境无关,所以应该配置在 <strong>application.properties</strong> 中 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/93Lrt4.png alt=img></p><h1 id=151-配置-mybatis-generator>1.5.1 配置 MyBatis Generator<a hidden class=anchor aria-hidden=true href=#151-配置-mybatis-generator>#</a></h1><p>MyBatis Generator 是 MyBatis 提供的一个代码生成工具。可以帮我们生成 表对应的持久化对象(po)、操作数据库的接口(dao)、CRUD sql的xml(mapper)。</p><p>使用方法主要分为三步</p><ol><li>引入并配置 MyBatis Generator 插件</li><li>配置 MyBatis Generator Config 文件</li><li>使用 MyBatis Generator 插件</li></ol><p>详细说明请参考 <a href=https://juejin.im/editor/posts/5db694e3e51d452a2e25ba45>MyBatis Generator 超详细配置</a></p><p>这里只给出一种最终配置</p><h2 id=引入并配置-mybatis-generator-插件>引入并配置 MyBatis Generator 插件<a hidden class=anchor aria-hidden=true href=#引入并配置-mybatis-generator-插件>#</a></h2><p>在user项目的pom文件的根节点下添加如下配置</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;build&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;plugins&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>org.mybatis.generator<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>mybatis-generator-maven-plugin<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>1.3.7<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>&lt;!--mybatis的代码生成器的配置文件--&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;configurationFile&gt;</span>src/main/resources/mybatis-generator-config.xml<span style=color:#f92672>&lt;/configurationFile&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>&lt;!--允许覆盖生成的文件--&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;overwrite&gt;</span>true<span style=color:#f92672>&lt;/overwrite&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>&lt;!--将当前pom的依赖项添加到生成器的类路径中--&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>&lt;!--&lt;includeCompileDependencies&gt;true&lt;/includeCompileDependencies&gt;--&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>&lt;!--mybatis-generator插件的依赖包--&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>&lt;!--&lt;dependency&gt;--&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#75715e>&lt;!--&lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;--&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#75715e>&lt;!--&lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt;--&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#75715e>&lt;!--&lt;version&gt;1.3.7&lt;/version&gt;--&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>&lt;!--&lt;/dependency&gt;--&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>&lt;!-- mysql的JDBC驱动 --&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;groupId&gt;</span>mysql<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;artifactId&gt;</span>mysql-connector-java<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>                    <span style=color:#f92672>&lt;version&gt;</span>8.0.17<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/plugin&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/plugins&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;build&gt;</span>
</span></span></code></pre></div><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/3kZllK.png alt=img></p><h2 id=配置-mybatis-generator-config-文件>配置 MyBatis Generator Config 文件<a hidden class=anchor aria-hidden=true href=#配置-mybatis-generator-config-文件>#</a></h2><p>在user项目的 <strong>resources</strong> 目录下，创建<strong>mybatis-generator-config.xml</strong>，内容如下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--mybatis的代码生成器相关配置--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE generatorConfiguration
</span></span></span><span style=display:flex><span><span style=color:#75715e>        PUBLIC &#34;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>        &#34;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&#34;&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;generatorConfiguration&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 引入配置文件 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;properties</span> <span style=color:#a6e22e>resource=</span><span style=color:#e6db74>&#34;application-dev.properties&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 一个数据库一个context,context的子元素必须按照它给出的顺序
</span></span></span><span style=display:flex><span><span style=color:#75715e>        property*,plugin*,commentGenerator?,jdbcConnection,javaTypeResolver?,
</span></span></span><span style=display:flex><span><span style=color:#75715e>        javaModelGenerator,sqlMapGenerator?,javaClientGenerator?,table+
</span></span></span><span style=display:flex><span><span style=color:#75715e>    --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;context</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;myContext&#34;</span> <span style=color:#a6e22e>targetRuntime=</span><span style=color:#e6db74>&#34;MyBatis3&#34;</span> <span style=color:#a6e22e>defaultModelType=</span><span style=color:#e6db74>&#34;flat&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- 这个插件给生成的Java模型对象增加了equals和hashCode方法 --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--&lt;plugin type=&#34;org.mybatis.generator.plugins.EqualsHashCodePlugin&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- 注释 --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;commentGenerator&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 是否不生成注释 --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;suppressAllComments&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;true&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 不希望生成的注释中包含时间戳 --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--&lt;property name=&#34;suppressDate&#34; value=&#34;true&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 添加 db 表中字段的注释，只有suppressAllComments为false时才生效--&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--&lt;property name=&#34;addRemarkComments&#34; value=&#34;true&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/commentGenerator&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- jdbc连接 --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;jdbcConnection</span> <span style=color:#a6e22e>driverClass=</span><span style=color:#e6db74>&#34;${spring.datasource.driverClassName}&#34;</span>
</span></span><span style=display:flex><span>                        <span style=color:#a6e22e>connectionURL=</span><span style=color:#e6db74>&#34;${spring.datasource.url}&#34;</span>
</span></span><span style=display:flex><span>                        <span style=color:#a6e22e>userId=</span><span style=color:#e6db74>&#34;${spring.datasource.username}&#34;</span>
</span></span><span style=display:flex><span>                        <span style=color:#a6e22e>password=</span><span style=color:#e6db74>&#34;${spring.datasource.password}&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--高版本的 mysql-connector-java 需要设置 nullCatalogMeansCurrent=true--&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;nullCatalogMeansCurrent&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;true&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/jdbcConnection&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- 类型转换 --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;javaTypeResolver&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--是否使用bigDecimal，默认false。
</span></span></span><span style=display:flex><span><span style=color:#75715e>                false，把JDBC DECIMAL 和 NUMERIC 类型解析为 Integer
</span></span></span><span style=display:flex><span><span style=color:#75715e>                true，把JDBC DECIMAL 和 NUMERIC 类型解析为java.math.BigDecimal--&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;forceBigDecimals&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;true&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--默认false
</span></span></span><span style=display:flex><span><span style=color:#75715e>                false，将所有 JDBC 的时间类型解析为 java.util.Date
</span></span></span><span style=display:flex><span><span style=color:#75715e>                true，将 JDBC 的时间类型按如下规则解析
</span></span></span><span style=display:flex><span><span style=color:#75715e>                    DATE	                -&gt; java.time.LocalDate
</span></span></span><span style=display:flex><span><span style=color:#75715e>                    TIME	                -&gt; java.time.LocalTime
</span></span></span><span style=display:flex><span><span style=color:#75715e>                    TIMESTAMP               -&gt; java.time.LocalDateTime
</span></span></span><span style=display:flex><span><span style=color:#75715e>                    TIME_WITH_TIMEZONE  	-&gt; java.time.OffsetTime
</span></span></span><span style=display:flex><span><span style=color:#75715e>                    TIMESTAMP_WITH_TIMEZONE	-&gt; java.time.OffsetDateTime
</span></span></span><span style=display:flex><span><span style=color:#75715e>                --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--&lt;property name=&#34;useJSR310Types&#34; value=&#34;false&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/javaTypeResolver&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- 生成实体类地址 --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;javaModelGenerator</span> <span style=color:#a6e22e>targetPackage=</span><span style=color:#e6db74>&#34;com.wqlm.boot.user.po&#34;</span> <span style=color:#a6e22e>targetProject=</span><span style=color:#e6db74>&#34;src/main/java&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 是否让 schema 作为包的后缀，默认为false --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--&lt;property name=&#34;enableSubPackages&#34; value=&#34;false&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 是否针对string类型的字段在set方法中进行修剪，默认false --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;trimStrings&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;true&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/javaModelGenerator&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- 生成Mapper.xml文件 --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;sqlMapGenerator</span> <span style=color:#a6e22e>targetPackage=</span><span style=color:#e6db74>&#34;mapper&#34;</span> <span style=color:#a6e22e>targetProject=</span><span style=color:#e6db74>&#34;src/main/resources&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--&lt;property name=&#34;enableSubPackages&#34; value=&#34;false&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/sqlMapGenerator&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- 生成 XxxMapper.java 接口--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;javaClientGenerator</span> <span style=color:#a6e22e>targetPackage=</span><span style=color:#e6db74>&#34;com.wqlm.boot.user.dao&#34;</span> <span style=color:#a6e22e>targetProject=</span><span style=color:#e6db74>&#34;src/main/java&#34;</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;XMLMAPPER&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--&lt;property name=&#34;enableSubPackages&#34; value=&#34;false&#34;/&gt;--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/javaClientGenerator&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- schema为数据库名，oracle需要配置，mysql不需要配置。
</span></span></span><span style=display:flex><span><span style=color:#75715e>             tableName为对应的数据库表名
</span></span></span><span style=display:flex><span><span style=color:#75715e>             domainObjectName 是要生成的实体类名(可以不指定，默认按帕斯卡命名法将表名转换成类名)
</span></span></span><span style=display:flex><span><span style=color:#75715e>             enableXXXByExample 默认为 true， 为 true 会生成一个对应Example帮助类，帮助你进行条件查询，不想要可以设为false
</span></span></span><span style=display:flex><span><span style=color:#75715e>             --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;table</span> <span style=color:#a6e22e>schema=</span><span style=color:#e6db74>&#34;&#34;</span> <span style=color:#a6e22e>tableName=</span><span style=color:#e6db74>&#34;user&#34;</span> <span style=color:#a6e22e>domainObjectName=</span><span style=color:#e6db74>&#34;User&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>enableCountByExample=</span><span style=color:#e6db74>&#34;false&#34;</span> <span style=color:#a6e22e>enableDeleteByExample=</span><span style=color:#e6db74>&#34;false&#34;</span> <span style=color:#a6e22e>enableSelectByExample=</span><span style=color:#e6db74>&#34;false&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>enableUpdateByExample=</span><span style=color:#e6db74>&#34;false&#34;</span> <span style=color:#a6e22e>selectByExampleQueryId=</span><span style=color:#e6db74>&#34;false&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--是否使用实际列名,默认为false--&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--&lt;property name=&#34;useActualColumnNames&#34; value=&#34;false&#34; /&gt;--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/table&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/context&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/generatorConfiguration&gt;</span>
</span></span></code></pre></div><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/CvMq6e.png alt=img></p><h3 id=application-devproperties-的配置>application-dev.properties 的配置<a hidden class=anchor aria-hidden=true href=#application-devproperties-的配置>#</a></h3><p>MyBatis Generator Config 引用的外部配置文件内容如下</p><pre tabindex=0><code># mysql
spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://localhost:3306/boot?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai
spring.datasource.username=root
spring.datasource.password=123456
</code></pre><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/1ytj1a.png alt=img></p><h2 id=使用-mybatis-generator-插件>使用 MyBatis Generator 插件<a hidden class=anchor aria-hidden=true href=#使用-mybatis-generator-插件>#</a></h2><p>配置好后，双击 maven 中的 MyBatis Generator 运行 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/chQ2RK.png alt=img></p><h1 id=152-集成-tkmybatis-通用mapper>1.5.2 集成 tk.mybatis (通用mapper)<a hidden class=anchor aria-hidden=true href=#152-集成-tkmybatis-通用mapper>#</a></h1><p>上一节中，MyBatis Generator 为我们生成了一些常用的操作数据库的方法。其实我们也可以通过 集成 tk.mybatis (通用mapper) 来实现，集成之后，会有更多的通用方法，并且这些通用方法是不用配置mapper.xml 的。</p><p>springboot 集成 tk.mybatis (通用mapper) 一般需要3步</p><ol><li>引入依赖</li><li>配置 tk.mybatis 的 MyBatis Generator 插件</li><li>启动类上配置要扫描的 dao 路径</li><li>配置通用 Mapper</li></ol><blockquote><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fabel533%2FMapper%2Fwiki%2F1.3-spring-boot">tk.mybatis 的 GitHub</a></p></blockquote><h2 id=引入依赖-1>引入依赖<a hidden class=anchor aria-hidden=true href=#引入依赖-1>#</a></h2><p>老规矩，还是在父 pom 中配置 tk.mybatis 的版本并申明 tk.mybatis 的依赖 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/hhg631.png alt=img></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;tk.mybatis.mapper-spring-boot-starter.version&gt;</span>2.1.5<span style=color:#f92672>&lt;/tk.mybatis.mapper-spring-boot-starter.version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--申明依赖--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependencyManagement&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!--tk.mybatis 通用mapper--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>tk.mybatis<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>mapper-spring-boot-starter<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>${tk.mybatis.mapper-spring-boot-starter.version}<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependencyManagement&gt;</span>
</span></span></code></pre></div><p>然后在 user 模块的 pom 中引入依赖</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--tk.mybatis 通用mapper--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>tk.mybatis<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>mapper-spring-boot-starter<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span></code></pre></div><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/NPi4ZQ.png alt=img></p><h2 id=配置-tkmybatis-的-mybatis-generator-插件>配置 tk.mybatis 的 MyBatis Generator 插件<a hidden class=anchor aria-hidden=true href=#配置-tkmybatis-的-mybatis-generator-插件>#</a></h2><p>tk.mybatis 为 MyBatis Generator 开发了一个插件，用于改变 MyBatis Generator 的原始生成策略，配置好之后，生成出来的文件更加精练、注释更加有意义。</p><p>整个配置过程分两步</p><ol><li>引入插件依赖</li><li>修改 MyBatis Generator Config</li></ol><h3 id=引入插件依赖>引入插件依赖<a hidden class=anchor aria-hidden=true href=#引入插件依赖>#</a></h3><p>在原来的 MyBatis Generator 插件的 <strong>dependencies</strong> 里面添加如下依赖 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/oQ6vk7.png alt=img></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;!--4.15 是目前最新的版本--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>tk.mybatis<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>mapper<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>4.1.5<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></div><h3 id=修改-mybatis-generator-config>修改 MyBatis Generator Config<a hidden class=anchor aria-hidden=true href=#修改-mybatis-generator-config>#</a></h3><p>主要有一下几点改动</p><p>首先是 <strong>targetRuntime</strong> 的值改为 <strong>MyBatis3Simple</strong>，<strong>defaultModelType</strong> 设置为 <strong>flat</strong> <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/qS4fk6.png alt=img></p><p>如果 <code>targetRuntime="MyBatis3"</code> 的话，生成出来的 mapper.xml 会多出一段无用代码，如下 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/nXQ6Zw.png alt=img></p><p>然后添加 tk.mybatis 插件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;plugin</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;tk.mybatis.mapper.generator.MapperPlugin&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--dao 要继承的接口--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;mappers&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;tk.mybatis.mapper.common.Mapper&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--是否区分大小写，默认false--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;caseSensitive&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;true&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/plugin&gt;</span>
</span></span></code></pre></div><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/grytMg.png alt=img></p><p>其他地方都不需要改动，配置好之后，运行 MyBatis Generator 插件，生成出来的文件如下</p><p><strong>po</strong> <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/cXVeGj.png alt=img>
可以看到，相比与 MyBatis Generator 生成的注释，tk.mybatis 生成的注解跟简洁易懂。除此之外，它还多了几个注解</p><ul><li><strong>@Table(name = &ldquo;user&rdquo;)</strong>：意思是该po对应数据库的user表</li><li><strong>@Id</strong>：表示该属性对应user表的主键</li><li><strong>@Column(name = &ldquo;user_name&rdquo;)</strong>：表示该属性对应user表的 <strong>user_name</strong> 字段</li></ul><p><strong>dao</strong> <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/HICidL.png alt=img>
相比于 MyBatis Generator 生成的代码，少了很多接口，但多继承了一个类，这个类就是你在 tk.mybatis 插件里面配置的类 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/7uYHxp.png alt=img>
你可能猜到了，少的那些接口，都在继承的这个<code>tk.mybatis.mapper.common.Mapper</code>类中有，如下图，userMapper 继承了这么多方法，而且这些方法都是可以直接使用的 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/OEiYUJ.png alt=img></p><p><strong>mapper.xml</strong> <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/RECl9n.png alt=img>
相比于 MyBatis Generator 少了很多代码</p><h2 id=启动类上配置要扫描的-dao-路径>启动类上配置要扫描的 dao 路径<a hidden class=anchor aria-hidden=true href=#启动类上配置要扫描的-dao-路径>#</a></h2><p>这一步我们在集成 mybatis 时已经配置过了 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/mcGpvt.png alt=img></p><p>但是集成 tk.mybatis 后，需要使用 tk.mybatis 包下的 <code>@MapperScan</code> ,因此需要修改一下 <code>@MapperScan</code> 的包路径 ![img](/Users/xh/Library/Application Support/typora-user-images/image-20220315161228552.png)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> tk.mybatis.spring.annotation.MapperScan<span style=color:#f92672>;</span>
</span></span></code></pre></div><h2 id=配置通用-mapper>配置通用 Mapper<a hidden class=anchor aria-hidden=true href=#配置通用-mapper>#</a></h2><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/7cpwzb.png alt=img></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#75715e># 通用 mapper</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 主键自增回写方法,默认值MYSQL</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>mapper.identity=MYSQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 设置 insert 和 update 中，字符串类型!=&#34;&#34;才插入/更新,默认false</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#mapper.not-empty=true</span>
</span></span></code></pre></div><p>tk.mybatis 至此就全部集成完了</p><h1 id=153-集成-pagehelper-分页插件>1.5.3 集成 pagehelper 分页插件<a hidden class=anchor aria-hidden=true href=#153-集成-pagehelper-分页插件>#</a></h1><p>分页查询是web开发中一个很常见的功能，mybatis 虽然也可以实现分页，但那是基于内存的分页，即把数据一次性全查出来，然后放在内存中分多次返回。</p><p>而 pagehelper 分页插件是物理分页，是通过 sql 关键字来实现的。例如mysql中的<strong>limit</strong>，oracle中的<strong>rownum</strong>等。</p><blockquote><p>pagehelper 分页插件和 tk.mybatis 是通一个作者写的<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fpagehelper%2Fpagehelper-spring-boot">pagehelper项目地址</a></p></blockquote><p>集成 pagehelper 需要两步</p><ul><li>引入 pagehelper 依赖</li><li>配置 pagehelper</li></ul><h2 id=引入-pagehelper-依赖>引入 pagehelper 依赖<a hidden class=anchor aria-hidden=true href=#引入-pagehelper-依赖>#</a></h2><p>老规矩，父pom中定义依赖版本，并申明依赖 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/9zftKM.png alt=img></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;properties&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;pagehelper-spring-boot-starter.version&gt;</span>1.2.12<span style=color:#f92672>&lt;/pagehelper-spring-boot-starter.version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/properties&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependencyManagement&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>com.github.pagehelper<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>pagehelper-spring-boot-starter<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>${pagehelper-spring-boot-starter.version}<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependencyManagement&gt;</span>
</span></span></code></pre></div><p>子模块中引入依赖 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/xFSjFs.png alt=img></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;groupId&gt;</span>com.github.pagehelper<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;artifactId&gt;</span>pagehelper-spring-boot-starter<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span></code></pre></div><h2 id=配置-pagehelper>配置 pagehelper<a hidden class=anchor aria-hidden=true href=#配置-pagehelper>#</a></h2><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/WTq9z3.png alt=img></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#75715e># 使用的sql方言</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>pagehelper.helperDialect=mysql</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 是否启用合理化，默认false，启用合理化时，如果 pageNum&lt;1会查询第一页，如果pageNum&gt;pages会查询最后一页</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>pagehelper.reasonable=true</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 是否支持通过Mapper接口参数来传递分页参数，默认false</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#pagehelper.supportMethodsArguments=true</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>pagehelper.params=count=countSql</span>
</span></span></code></pre></div><p>更多配置请参考<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fpagehelper%2FMybatis-PageHelper%2Fblob%2Fmaster%2Fwikis%2Fzh%2FHowToUse.md">官网</a></p><h1 id=160-引入-lombok-插件>1.6.0 引入 lombok 插件<a hidden class=anchor aria-hidden=true href=#160-引入-lombok-插件>#</a></h1><p>lombok 是一个简化代码的插件，能通过一个注解帮你生成 get、set、tostring、hash&mldr; 方法。</p><p>集成 lombok 十分简单</p><ol><li>引入 lombok 依赖</li><li>安装 ide 对应的 lombok 插件</li></ol><p>lombok 使用方法参考这篇文章 <a href=https://juejin.cn/post/6844903961602818061>lombok 插件</a></p><h2 id=引入-lombok-依赖>引入 lombok 依赖<a hidden class=anchor aria-hidden=true href=#引入-lombok-依赖>#</a></h2><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/ZPPJwY.png alt=img></p><p>由于 <code>spring-boot-starter-parent</code> 中已经申明了lombok 依赖，我们只需要在子模块中引入就好了</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/1QmJ99.png alt=img></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;!--lombok--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.projectlombok<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>lombok<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></div><h2 id=安装-ide-对应的-lombok-插件>安装 ide 对应的 lombok 插件<a hidden class=anchor aria-hidden=true href=#安装-ide-对应的-lombok-插件>#</a></h2><h1 id=170-集成-redis>1.7.0 集成 redis<a hidden class=anchor aria-hidden=true href=#170-集成-redis>#</a></h1><p>作为最常用的 nosql 数据库，Spring Boot 对 redis 做了非常好对支持，集成起来也很简单，只需要4步</p><ol><li>引入依赖</li><li>配置 redis</li><li>自定义 RedisTemplate (推荐)</li><li>自定义 redis 操作类 (推荐)</li></ol><p>详细的集成步骤我单独提出来写了篇文章，地址如下</p><blockquote><p><a href=https://juejin.cn/post/6844903990090694663>Spring Boot 2.0 集成 redis</a></p></blockquote><h1 id=171-集成-spring-cache>1.7.1 集成 spring cache<a hidden class=anchor aria-hidden=true href=#171-集成-spring-cache>#</a></h1><p>Spring Cache 是 Spring 为缓存场景提供的一套解决方案。通过使用 @CachePut、@CacheEvict、@Cacheable等注解实现对缓存的，存储、查询、删除等操作</p><p>由于我们已经引入 <strong>redis</strong> ，所以只需要简单配置一下，就可以使用 <strong>spring cache</strong></p><p>详细的集成步骤我单独提出来写了篇文章，地址如下(在 Spring Cache 那一节)</p><blockquote><p><a href=https://juejin.cn/post/6844903990090694663>Spring Boot 2.0 集成 redis</a></p></blockquote><blockquote><p>当然，不用也可以选择不去集成</p></blockquote><h1 id=180-开发用户模块>1.8.0 开发用户模块<a hidden class=anchor aria-hidden=true href=#180-开发用户模块>#</a></h1><p>不同的系统对应不同的用户设计，掘金的用户系统和淘宝的用户系统肯定是不一样的，所以，该项目虽然是一个种子项目，但很难给出通用的用户模块设计。</p><p>因此，我转变思路，并不去追求什么通用的用户模块，而是力求在该模块中，将上面集成的技术，全部都应用起来。</p><p>这样，在以后使用到上面的某项技术的时候，也有一个参照。</p><h2 id=用户表>用户表<a hidden class=anchor aria-hidden=true href=#用户表>#</a></h2><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/IDz7HH.png alt=img>
建表语句在 <strong>配置 mysql</strong> 那一章</p><h2 id=添加-controller-service-dto>添加 controller 、service 、dto<a hidden class=anchor aria-hidden=true href=#添加-controller-service-dto>#</a></h2><p>先创建 controller 、service 、dto 目录 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/TPVPlm.png alt=img></p><p>先从注册接口开始写</p><p>注意校验参数一定要加 <code>@Valid</code> 注解 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/o8oi7N.png alt=img></p><p>其中 <code>@Data</code> 用到了 lombok 插件 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/hNzazO.png alt=r></p><p>数据库存的是密码加盐后的hash，也就是说就连我们自己也看不到用户的密码 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/YRibiI.png alt=img></p><h1 id=181-自定义全局状态码和业务结果类>1.8.1 自定义全局状态码和业务结果类<a hidden class=anchor aria-hidden=true href=#181-自定义全局状态码和业务结果类>#</a></h1><p>虽然向上面这样直接返回 <code>注册成功</code>、<code>注册失败</code> 也没有什么问题，但却不太优雅，因为其他接口返回的可能不是简单的字符串。</p><p>我们其实可以自定义一个业务结果类，所有的接口，都返回该业务结果对象，这个业务结果类，除了有业务结果外，还有业务执行状态、业务消息等。</p><p>除了业务结果类，我还建议创建全局状态码类，就想蚂蚁金服的api接口一样，调用失败会返回一个状态码，方便错误排查</p><h2 id=自定义全局状态码>自定义全局状态码<a hidden class=anchor aria-hidden=true href=#自定义全局状态码>#</a></h2><p>新建 enums 目录 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/JgReQh.png alt=img></p><p>创建 ApplicationEnum 全局状态码类，我这里只写了几个，之后可以往里面加 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/Nn0608.png alt=m></p><h2 id=创建业务结果类>创建业务结果类<a hidden class=anchor aria-hidden=true href=#创建业务结果类>#</a></h2><p>如下，在 vo 目录下下创建 result 目录，并在里面创建业务结果类 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/3TxTv0.png alt=img></p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/5v8woV.png alt=img></p><p>为了方便使用，再创建一个 SuccessResult 和一个 FailResult <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/03FPuP.png alt=img></p><h2 id=改造注册接口>改造注册接口<a hidden class=anchor aria-hidden=true href=#改造注册接口>#</a></h2><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/YTSNwJ.png alt=img></p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/eDPqi0.png alt=img></p><h1 id=182-统一异常处理>1.8.2 统一异常处理<a hidden class=anchor aria-hidden=true href=#182-统一异常处理>#</a></h1><p>业务执行过程中会产生的各种异常，对其进行统一处理是所有web项目的通用需求。Spring 提供了 @RestControllerAdvice、@ExceptionHandler 注解来帮助我们处理异常。</p><p>具体的异常处理该如何设计没有统一的标准，下面是我给出的设计，仅供参考。</p><p>我的做法是自定义一个异常类，然后在业务出错时抛出，最后在自定义异常处理类中处理。</p><blockquote><p>更多内容请参考 <a href=https://juejin.cn/post/6844903822545027080>基于spring 的统一异常处理</a></p></blockquote><h2 id=自定义异常类>自定义异常类<a hidden class=anchor aria-hidden=true href=#自定义异常类>#</a></h2><p>每一种异常都对于一种ApplicationEnum <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/VtXi3s.png alt=img></p><h2 id=自定义异常处理类>自定义异常处理类<a hidden class=anchor aria-hidden=true href=#自定义异常处理类>#</a></h2><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/CJU0iG.png alt=img></p><p>如果一个异常能匹配多个 @ExceptionHandler 时，选择匹配深度最小的Exception(即最匹配的Exception)</p><h2 id=使用自定义异常>使用自定义异常<a hidden class=anchor aria-hidden=true href=#使用自定义异常>#</a></h2><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/CN6vw7.png alt=img></p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/xuPmYc.png alt=img></p><h1 id=183-参数校验及异常处理>1.8.3 参数校验及异常处理<a hidden class=anchor aria-hidden=true href=#183-参数校验及异常处理>#</a></h1><h2 id=参数校验>参数校验<a hidden class=anchor aria-hidden=true href=#参数校验>#</a></h2><p>首先在要校验的对象前加上 <code>@valid</code> 注解 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/CqdFZW.png alt=img></p><p>然后在要校验的对象中使用适当的注解 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/jsepFp.png alt=img></p><p>详细内容请参考</p><blockquote><p><a href=https://juejin.cn/post/6844903961581846535>参数校验 Hibernate-Validator</a>
<a href=https://juejin.cn/post/6844904003310977031>Spring 参数校验详解</a></p></blockquote><h2 id=异常处理>异常处理<a hidden class=anchor aria-hidden=true href=#异常处理>#</a></h2><p>如果参数绑定不成功或者校验不通过，就会抛出异常！但是默认抛出的异常包含很多敏感信息，如下： <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/bng0MW.png alt=img>
因此我们应该对常见的异常进行捕获后再封装。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/lJAMTX.png alt=img></p><pre tabindex=0><code>extends ResponseEntityExceptionHandler` 是为了重写几个常见异常的默认处理方式。当然，你也可以直接通过 `@ExceptionHandler()` 拦截，这样就不用`extends ResponseEntityExceptionHandler
</code></pre><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/RJAMIb.png alt=img>
一般只需要处理这三个异常就可以覆盖大部分需要手动处理参数异常的场景</p><ul><li>org.springframework.validation.BindException</li><li>org.springframework.web.bind.MethodArgumentNotValidException</li><li>javax.validation.ConstraintViolationException</li></ul><p>详细内容请参考</p><blockquote><p><a href=https://juejin.cn/post/6844904003684302861>Spring 参数校验的异常处理</a></p></blockquote><h1 id=184-添加登陆修改密码获取用户信息的接口>1.8.4 添加登陆、修改密码、获取用户信息的接口<a hidden class=anchor aria-hidden=true href=#184-添加登陆修改密码获取用户信息的接口>#</a></h1><p>主要是些业务逻辑，没有什么指的说的，具体代码参考项目源码！唯一指的提一嘴的是 使用 <code>@Value("${}")</code> 注解获取配置文件中的属性 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/e0WpMK.png alt=img></p><h1 id=185-添加认证拦截器>1.8.5 添加认证拦截器<a hidden class=anchor aria-hidden=true href=#185-添加认证拦截器>#</a></h1><p>有些接口我们希望只有登陆的用户能访问，解决方案一般是添加一个登陆拦截器。</p><p>方法也很简单，主要分为3步</p><ul><li>定义哪些接口需要认证(登陆后才能访问)，或者哪些接口不需要认证</li><li>自定义 <code>HandlerInterceptor</code> , 在访问接口前进行拦截处理</li><li>自定义 <code>WebMvcConfigurer</code> ，定义哪些接口需要拦截</li></ul><p>1.确定免认证url <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/Lvbex2.png alt=img></p><p>2.自定义 <code>HandlerInterceptor</code> ，对拦截到的请求进行token有效性校验 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/pKIykI.png alt=img></p><p>3.自定义 <code>WebMvcConfigurer</code> ，拦截除免认证url列表之外的所有请求 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/zPTm1U.png alt=img></p><h1 id=186-统一映射自定义配置>1.8.6 统一映射自定义配置<a hidden class=anchor aria-hidden=true href=#186-统一映射自定义配置>#</a></h1><p>之前我们都是哪里需要用到 <code>properties</code> 中的配置，就在那里使用 <code>@Value("${}")</code> 来获取。如下 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/BgYKIV.png alt=img></p><p>我们也可以创建一个自定义配置类，将所有 <code>properties</code> 中的自定义属性全部映射到对应的属性上，如下 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/ZxDYtO.png alt=img></p><p>然后使用时，直接访问该类 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/HcRk8e.png alt=img></p><h1 id=190-配置日志>1.9.0 配置日志<a hidden class=anchor aria-hidden=true href=#190-配置日志>#</a></h1><p>spring boot 已经对日志系统进行了默认的配置，但是如果你想显示 sql 或将日志输出到文件就需要进行进一步配置。</p><p>详细内容请参考</p><blockquote><p><a href=https://juejin.cn/post/6844904031228264456>java 生态下的日志框架</a>
<a href=https://juejin.cn/post/6844904031224070157>Java 日志实现框架 Logback</a>
<a href=https://juejin.cn/post/6844904036580196359>Logback 配置样例</a>
<a href=https://juejin.cn/post/6844904037301616647>Spring Boot Logging</a></p></blockquote><h2 id=显示-sql>显示 sql<a hidden class=anchor aria-hidden=true href=#显示-sql>#</a></h2><p>在 <code>application.properties</code> 中配置</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#75715e># dao(com.wqlm.boot.user.dao) 层设置成 debug 级别以显示sql</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>logging.level.com.wqlm.boot.user.dao=debug</span>
</span></span></code></pre></div><h2 id=输出日志到文件>输出日志到文件<a hidden class=anchor aria-hidden=true href=#输出日志到文件>#</a></h2><p>在 <code>application.properties</code> 中配置</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#75715e># 当前活动的日志文件名</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>logging.file.name=logs/user/user.log</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 最多保留多少天的日志</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>logging.file.max-history=30</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 单个日志文件最大容量</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>logging.file.max-size=10MB</span>
</span></span></code></pre></div><h2 id=精细化配置>精细化配置<a hidden class=anchor aria-hidden=true href=#精细化配置>#</a></h2><p>在 <code>application.properties</code> 中只能进行有限的配置，如果想进一步配置，就需要使用对应日志框架的配置文件了！</p><p>spring boot 使用 <code>logback</code> 作为日志实现框架，spring boot 推荐使用 <code>logback-spring.xml</code> 作为配置文件的名称。</p><p>以下是一个参考的配置样例</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!-- scan ：开启&#34;热更新&#34; scanPeriod：&#34;热更新&#34;扫描周期，默认 60 seconds(60秒)--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;configuration</span> <span style=color:#a6e22e>scan=</span><span style=color:#e6db74>&#34;true&#34;</span> <span style=color:#a6e22e>scanPeriod=</span><span style=color:#e6db74>&#34;300 seconds&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 引入颜色转换器 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;conversionRule</span> <span style=color:#a6e22e>conversionWord=</span><span style=color:#e6db74>&#34;clr&#34;</span> <span style=color:#a6e22e>converterClass=</span><span style=color:#e6db74>&#34;org.springframework.boot.logging.logback.ColorConverter&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 自定义变量  name ：变量名   scope ： 在哪个环境中查找 source ： 使用哪个属性 defaultValue ：没找到时的默认值--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;springProperty</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;env&#34;</span> <span style=color:#a6e22e>scope=</span><span style=color:#e6db74>&#34;context&#34;</span> <span style=color:#a6e22e>source=</span><span style=color:#e6db74>&#34;spring.profiles.active&#34;</span> <span style=color:#a6e22e>defaultValue=</span><span style=color:#e6db74>&#34;env&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 应用名称 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;APP_NAME&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;user&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 自定义变量，用于配置日志输出格式，这个格式是尽量偏向 spring boot 默认的输出风格
</span></span></span><span style=display:flex><span><span style=color:#75715e>    %date：日期，默认格式 yyyy-MM-dd hhh:mm:ss,SSS 默认使用本机时区，通过 %d{yyyy-MM-dd hhh:mm:ss,SSS} 来自定义
</span></span></span><span style=display:flex><span><span style=color:#75715e>    %-5level：5个占位符的日志级别，例如&#34; info&#34;、&#34;error&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>    %thread : 输出日志的线程
</span></span></span><span style=display:flex><span><span style=color:#75715e>    %class : 输出日志的类的完全限定名，效率低
</span></span></span><span style=display:flex><span><span style=color:#75715e>    %method : 输出日志的方法名
</span></span></span><span style=display:flex><span><span style=color:#75715e>    %line : 输出日志的行号，效率低
</span></span></span><span style=display:flex><span><span style=color:#75715e>    %msg : 日志消息内容
</span></span></span><span style=display:flex><span><span style=color:#75715e>    %n : 换行
</span></span></span><span style=display:flex><span><span style=color:#75715e>    --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;LOG_PATTERN&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;%date %-5level ${PID:- } --- [%thread] %class.%method/%line : %msg%n&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 彩色日志格式 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;LOG_PATTERN_COLOUR&#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;${env} %date %clr(%-5level) %magenta(${PID:- }) --- [%thread] %cyan(%class.%method/%line) : %msg%n&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!--日志输出器. ch.qos.logback.core.ConsoleAppender : 输出到控制台--&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;appender</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;STDOUT&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;ch.qos.logback.core.ConsoleAppender&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;encoder&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 配置日志输出格式 --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;pattern&gt;</span>${LOG_PATTERN_COLOUR}<span style=color:#f92672>&lt;/pattern&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 使用的字符集 --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;charset&gt;</span>UTF-8<span style=color:#f92672>&lt;/charset&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/encoder&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/appender&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 日志输出器。ch.qos.logback.core.rolling.RollingFileAppender : 滚动输出到文件 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;appender</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;ROLLING&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- 活动中的日志文件名(支持绝对和相对路径) --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;file&gt;</span>logs/${APP_NAME}/${APP_NAME}.log<span style=color:#f92672>&lt;/file&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- 滚动策略. ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy : 按照大小和时间滚动--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;rollingPolicy</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 何时触发滚动，如何滚动，以及滚动文件的命名格式
</span></span></span><span style=display:flex><span><span style=color:#75715e>            %d : 日期，默认格式 yyyy-MM-dd，通过 %d{yyyy-MM-dd hhh:mm:ss} 来自定义格式。logback 就是通过 %d 知道了触发滚动的时机
</span></span></span><span style=display:flex><span><span style=color:#75715e>            %i : 单个滚动周期内的日志文件的序列号
</span></span></span><span style=display:flex><span><span style=color:#75715e>            .zip : 将日志文件压缩成zip。不想压缩，可以使用.log 结尾
</span></span></span><span style=display:flex><span><span style=color:#75715e>            如下每天0点以后的第一日志请求触发滚动，将前一天的日志打成 zip 压缩包存放在 logs/app1/backup 下，并命名为 app1_%d_%i.zip
</span></span></span><span style=display:flex><span><span style=color:#75715e>            --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;fileNamePattern&gt;</span>logs/${APP_NAME}/backup/${APP_NAME}_%d{yyyy-MM-dd}_%i.zip<span style=color:#f92672>&lt;/fileNamePattern&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--单个日志文件的最大大小--&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;maxFileSize&gt;</span>10MB<span style=color:#f92672>&lt;/maxFileSize&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!--删除n个滚动周期之前的日志文件(最多保留前n个滚动周期的历史记录)--&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;maxHistory&gt;</span>30<span style=color:#f92672>&lt;/maxHistory&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 在有 maxHistory 的限制下，进一步限制所有日志文件大小之和的上限，超过则从最旧的日志开始删除--&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;totalSizeCap&gt;</span>1GB<span style=color:#f92672>&lt;/totalSizeCap&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/rollingPolicy&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;encoder&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 日志输出格式 --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;pattern&gt;</span>${LOG_PATTERN}<span style=color:#f92672>&lt;/pattern&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>&lt;!-- 使用的字符集 --&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;charset&gt;</span>UTF-8<span style=color:#f92672>&lt;/charset&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/encoder&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/appender&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 非 prod 环境下使用以下配置 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;springProfile</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;!prod&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- 记录器 name : 包名或类名， level : 要记录的日志的起始级别， additivity : 是否追加父类的 appender --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;logger</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;com.wqlm.boot.dao&#34;</span> <span style=color:#a6e22e>level=</span><span style=color:#e6db74>&#34;debug&#34;</span> <span style=color:#a6e22e>additivity=</span><span style=color:#e6db74>&#34;false&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;appender-ref</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>&#34;STDOUT&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;appender-ref</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>&#34;ROLLING&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/logger&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/springProfile&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 根记录器 --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;root</span> <span style=color:#a6e22e>level=</span><span style=color:#e6db74>&#34;info&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- 使用 STDOUT、ROLLING 输出记录的日志--&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;appender-ref</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>&#34;STDOUT&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;appender-ref</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>&#34;ROLLING&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/root&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span></code></pre></div><p>相对路径的位置 <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/03/15/3OpOlj.png alt=img></p><div class=post-meta></hr>注：本作品采用<a rel=license target=view_window href=http://creativecommons.org/licenses/by-nc-sa/4.0/> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议 </a>进行许可。</div></div><footer class=post-footer><ul class=post-tags><li><a href=https://swimminghao1.github.io/tags/springboot/>🏷 SpringBoot</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 超详细从0开始搭建 Spring Boot 项目 on twitter" href="https://twitter.com/intent/tweet/?text=%e8%b6%85%e8%af%a6%e7%bb%86%e4%bb%8e0%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%20Spring%20Boot%20%e9%a1%b9%e7%9b%ae&url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f06_04_spring%2f%25E8%25B6%2585%25E8%25AF%25A6%25E7%25BB%2586%25E4%25BB%258E0%25E5%25BC%2580%25E5%25A7%258B%25E6%2590%25AD%25E5%25BB%25BAspring-boot-%25E9%25A1%25B9%25E7%259B%25AE%2f&hashtags=SpringBoot"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 超详细从0开始搭建 Spring Boot 项目 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f06_04_spring%2f%25E8%25B6%2585%25E8%25AF%25A6%25E7%25BB%2586%25E4%25BB%258E0%25E5%25BC%2580%25E5%25A7%258B%25E6%2590%25AD%25E5%25BB%25BAspring-boot-%25E9%25A1%25B9%25E7%259B%25AE%2f&title=%e8%b6%85%e8%af%a6%e7%bb%86%e4%bb%8e0%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%20Spring%20Boot%20%e9%a1%b9%e7%9b%ae&summary=%e8%b6%85%e8%af%a6%e7%bb%86%e4%bb%8e0%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%20Spring%20Boot%20%e9%a1%b9%e7%9b%ae&source=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f06_04_spring%2f%25E8%25B6%2585%25E8%25AF%25A6%25E7%25BB%2586%25E4%25BB%258E0%25E5%25BC%2580%25E5%25A7%258B%25E6%2590%25AD%25E5%25BB%25BAspring-boot-%25E9%25A1%25B9%25E7%259B%25AE%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 超详细从0开始搭建 Spring Boot 项目 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f06_04_spring%2f%25E8%25B6%2585%25E8%25AF%25A6%25E7%25BB%2586%25E4%25BB%258E0%25E5%25BC%2580%25E5%25A7%258B%25E6%2590%25AD%25E5%25BB%25BAspring-boot-%25E9%25A1%25B9%25E7%259B%25AE%2f&title=%e8%b6%85%e8%af%a6%e7%bb%86%e4%bb%8e0%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%20Spring%20Boot%20%e9%a1%b9%e7%9b%ae"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 超详细从0开始搭建 Spring Boot 项目 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f06_04_spring%2f%25E8%25B6%2585%25E8%25AF%25A6%25E7%25BB%2586%25E4%25BB%258E0%25E5%25BC%2580%25E5%25A7%258B%25E6%2590%25AD%25E5%25BB%25BAspring-boot-%25E9%25A1%25B9%25E7%259B%25AE%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 超详细从0开始搭建 Spring Boot 项目 on whatsapp" href="https://api.whatsapp.com/send?text=%e8%b6%85%e8%af%a6%e7%bb%86%e4%bb%8e0%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%20Spring%20Boot%20%e9%a1%b9%e7%9b%ae%20-%20https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f06_04_spring%2f%25E8%25B6%2585%25E8%25AF%25A6%25E7%25BB%2586%25E4%25BB%258E0%25E5%25BC%2580%25E5%25A7%258B%25E6%2590%25AD%25E5%25BB%25BAspring-boot-%25E9%25A1%25B9%25E7%259B%25AE%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 超详细从0开始搭建 Spring Boot 项目 on telegram" href="https://telegram.me/share/url?text=%e8%b6%85%e8%af%a6%e7%bb%86%e4%bb%8e0%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%20Spring%20Boot%20%e9%a1%b9%e7%9b%ae&url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f06_04_spring%2f%25E8%25B6%2585%25E8%25AF%25A6%25E7%25BB%2586%25E4%25BB%258E0%25E5%25BC%2580%25E5%25A7%258B%25E6%2590%25AD%25E5%25BB%25BAspring-boot-%25E9%25A1%25B9%25E7%259B%25AE%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div><nav class=paginav><a class=prev href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_04_spring/spring-boot-2.0-%E9%9B%86%E6%88%90-redis/><span class=title>« 上一页</span><br><span>Spring Boot 2.0 集成 redis</span></a>
<a class=next href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/11_01_ubuntu/ubuntu/xkeysnail-for-ubuntu-%E9%94%AE%E7%9B%98%E6%98%A0%E5%B0%84/><span class=title>下一页 »</span><br><span>xkeysnail for ubuntu 键盘映射</span></a></nav></footer><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>评论</span><br></div><div id=tcomment></div><script src=https://utteranc.es/client.js repo=swimminghao1/swimminghao1.github.io issue-term=title theme=github-light crossorigin=anonymous async></script></div></article></main><footer class=footer><span>Copyright &copy; 2023 • <a href=https://swimminghao1.github.io/>swimminghao</a></span><div><span><a href=/about/>关于</a>
• <a href=/disclaimer/>免责声明</a>
• <a href=/sitemap.xml target=view_window>站点地图</a>
• <a href=https://www.foreverblog.cn/go.html target=view_window>虫洞</a>
• PV <span id=busuanzi_value_site_pv><i class="fa fa-spinner fa-spin"></i></span></span></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><meta name=”apple-mobile-web-app-capable” content="”yes”"><script>"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js")})</script></body></html>