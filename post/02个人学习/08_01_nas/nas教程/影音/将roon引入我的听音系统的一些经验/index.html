<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>将Roon引入我的听音系统的一些经验 | swimminghao</title><meta name=keywords content="nas,影音"><meta name=description content="将Roon引入我的听音系统的一些经验 系统迁移 我对之前的听音系统还是比较满意的，我并不是发烧友，当系统的音质能达到一定程度，剩下的就是音乐欣赏"><meta name=author content="swimminghao"><link rel=canonical href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/08_01_nas/nas%E6%95%99%E7%A8%8B/%E5%BD%B1%E9%9F%B3/%E5%B0%86roon%E5%BC%95%E5%85%A5%E6%88%91%E7%9A%84%E5%90%AC%E9%9F%B3%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%8F%E9%AA%8C/><meta name=yandex-verification content="73b1a797f62c0e98"><meta name=baidu-site-verification content="code-gnOrbP1RyC"><meta name=baidu_union_verify content="4c552c344295cb984c46ebe74962b067"><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/satouriko/LxgwWenKai_Webfonts@v1.101/dist/LXGWWenKai-Light.css><link crossorigin=anonymous href=/assets/css/stylesheet.min.0a5d9aa21e56d0b7d41b1d4b56af0b911caf526faf5060a8d3717579bf27cb93.css integrity="sha256-Cl2aoh5W0LfUGx1LVq8LkRyvUm+vUGCo03F1eb8ny5M=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://swimminghao1.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://swimminghao1.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://swimminghao1.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://swimminghao1.github.io/apple-touch-icon.png><link rel=mask-icon href=https://swimminghao1.github.io/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.97.0"><link rel=manifest href=/manifest.json><script type=text/javascript>function downloadJSAtOnload(){var e=document.createElement("script");e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7296634171837358",document.body.appendChild(e)}window.addEventListener?window.addEventListener("load",downloadJSAtOnload,!1):window.attachEvent?window.attachEvent("onload",downloadJSAtOnload):window.onload=downloadJSAtOnload</script><script async defer data-website-id=3d947a98-2774-46b0-805f-fe2e4877a1d7 src=https://umami.frytea.com/umami.js></script>
<script async src=https://swimminghao1.github.io/js/busuanzi.pure.mini.js></script>
<link rel=stylesheet href=/libs/font-awesome-4.7.0/css/font-awesome.min.css><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script src=https://swimminghao1.github.io/js/mermaid.min.js crossorigin=anonymous></script>
<script>const config={startOnLoad:!0,theme:"forest",themeVariables:{lineColor:"#fafafa"},flowchart:{useMaxWidth:!1,htmlLabels:!0}};mermaid.initialize(config),window.onload=()=>{window.mermaid.init(void 0,document.querySelectorAll(".language-mermaid"))}</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?c49e2f5be5e009382be07455c33b1394",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-136094326-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="将Roon引入我的听音系统的一些经验"><meta property="og:description" content="将Roon引入我的听音系统的一些经验 系统迁移 我对之前的听音系统还是比较满意的，我并不是发烧友，当系统的音质能达到一定程度，剩下的就是音乐欣赏"><meta property="og:type" content="article"><meta property="og:url" content="https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/08_01_nas/nas%E6%95%99%E7%A8%8B/%E5%BD%B1%E9%9F%B3/%E5%B0%86roon%E5%BC%95%E5%85%A5%E6%88%91%E7%9A%84%E5%90%AC%E9%9F%B3%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%8F%E9%AA%8C/"><meta property="og:image" content="https://swimminghao1.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-08-08T11:42:00+00:00"><meta property="article:modified_time" content="2022-08-08T11:42:00+00:00"><meta property="og:site_name" content="swimminghao"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://swimminghao1.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="将Roon引入我的听音系统的一些经验"><meta name=twitter:description content="将Roon引入我的听音系统的一些经验 系统迁移 我对之前的听音系统还是比较满意的，我并不是发烧友，当系统的音质能达到一定程度，剩下的就是音乐欣赏"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"📚文章","item":"https://swimminghao1.github.io/post/"},{"@type":"ListItem","position":2,"name":"将Roon引入我的听音系统的一些经验","item":"https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/08_01_nas/nas%E6%95%99%E7%A8%8B/%E5%BD%B1%E9%9F%B3/%E5%B0%86roon%E5%BC%95%E5%85%A5%E6%88%91%E7%9A%84%E5%90%AC%E9%9F%B3%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%8F%E9%AA%8C/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"将Roon引入我的听音系统的一些经验","name":"将Roon引入我的听音系统的一些经验","description":"将Roon引入我的听音系统的一些经验 系统迁移 我对之前的听音系统还是比较满意的，我并不是发烧友，当系统的音质能达到一定程度，剩下的就是音乐欣赏","keywords":["nas","影音"],"articleBody":"将Roon引入我的听音系统的一些经验 系统迁移 我对之前的听音系统还是比较满意的，我并不是发烧友，当系统的音质能达到一定程度，剩下的就是音乐欣赏的事情了。 这个系统我用了很多年，也没打算做什么调整。 试用了Roon后，我比较喜欢它的和音乐管理，关联，搜索，流媒体音乐深度集成等特性，就购买了帐号，正式将Roon引入了我的听音系统，并归一化了所有的终端。\n我之前听音系统的网络拓扑 我之前的听音系统终端并没有归一，音频的流动主要以DLNA为主，因为解码器的Bridge卡作为Render，内部通过I2S输入解码板，效果非常好，我又不想折腾各种USB,同轴，光纤的连接，线材不菲且完全不在我的知识范围内。\n群晖NAS作为Media Server， 解码器，Mac软件，智能音箱作为Render，电脑、手机和Pad的软件作为Browser和Controller\n引入Roon后听音系统网络拓扑 Roon的帐号挺贵的，加上我对原来的硬件还算满意，所以想最大限度的利用，思想就是用Roon Core管理音乐，同时将Roon的RAAT协议都转为DLNA，复用现有的设备。 电脑、手机、平板的客户端都统一到Roon Remote。\n感谢philippe开发的SqueezeBox桥接到Upnp的软件squeeze2upnp，使得我复用原有DLNA系统的想法成为了可能，而且他对待用户的反馈是否友好，耐心解答并能很快做出修改。\n安装Roon  在这个网站下载群晖NAS的套件 ： https://roononnas.org/de/synology-2/ 在共享文件夹中创建一个名字叫\"RoonServer\"的共享目录 强烈建议使用SSD安装Roon，因为Roon服务器的随机访问速度很关键，我的NAS没有SSD安装槽位，只能通过USB 3.0的盒子接入SATA3固态硬盘。 如果接入外置存储，将外置存储的名字改为RoonServer   选择手动安装套件，安装过程比较长  手机，PC, MAC, Pad的客户端可以参考官网安装： https://roonlabs.com/downloads\n以Windows为例，在PC上启动Roon，就回发现群晖NAS的Core，连接就可以使用\n如何为Roon增加DLNA输出 Roon本身不支持输出，但是支持Squeezebox设备（就是LMS（Logitech Media Server）体系）\n下图就是在Roon设置中打开对squeezbox的支持。\n打开SqueezeBox设置\n接下来的思路就是做一个桥，将Roon使用Squeezebox协议输出的音频转成DLNA的协议\n使用这个软件实现：Squeeze2upnp，他的目的就是将DLNA设备变成SqueezeBox设备\n软件github地址：https://github.com/philippe44/LMS-to-uPnP 里面有下载地址和提供支持的论坛地址\n安装 安装非常简单，从github网址给出的下载网站下载最新的安装包解压即可。\n！！！重要，需要安装1.49.8之后的版本，这之前的版本不支持Huawei Sound，我和作者squeeze2upnp的作者philippe反馈后并提供日志后，他经过修改，新出了版本用于支持Huawei Sound\n安装包解压后有一个Bin目录，所有平台的可执行文件都在里面。\nls ./Bin cc32160mt.dll libmad-0.dll libopusfile-0.dll pthreadBC2.dll squeeze2upnp-armv5te-static squeeze2upnp-bsd-x64-static squeeze2upnp-ppc-static squeeze2upnp-x86 ssleay32.dll libeay32.dll libogg-0.dll libsoxr.dll squeeze2upnp-aarch64 squeeze2upnp-armv6hf squeeze2upnp-osx-multi squeeze2upnp-sparc squeeze2upnp-x86-64 libfaad2.dll libogg.dll libvorbis.dll squeeze2upnp-aarch64-static squeeze2upnp-armv6hf-static squeeze2upnp-osx-multi-static squeeze2upnp-sparc-static squeeze2upnp-x86-64-static libFLAC.dll libopus-0.dll libvorbisfile.dll squeeze2upnp-armv5te squeeze2upnp-bsd-x64 squeeze2upnp-ppc squeeze2upnp-win.exe squeeze2upnp-x86-static 尽管Squeeze2upnp是LMS的一个插件，但是他并不依赖LMS，可以独立运行。解压后在Bin目录下后缀为_static的可执行程序都是独立执行程序\nSqueeze2upnp支持Windows, OSX, or Linux x86/64, ARM and OSX\n可以从可执行的程序名中看出哪个可执行程序对应什么平台。\n例如树莓派，你可以选择 ： squeeze2upnp-armv6hf-static 例如群晖X86 NAS， 你可以选择 ： squeeze2upnp-x86-64-static\n对于Linux，对应你平台的执行文件需要增加可执行属性，例如\nchomd a+x squeeze2upnp-x86-64-static 以下描述以都以群晖NAS为例，其他的平台将命令中的可执行程序替换为对应平台的执行程序即可。\nDLNA设备发现 对于第一次使用，或者希望重新创建一个配置文件，需要执行以下命令:\n./Bin/squeeze2upnp-x86-64-static -i config.xml [22:18:38.897023] main:1756 Starting squeeze2upnp version: v1.49.6 (Feb 13 2021 @ 14:45:36) [22:18:38.904985] main:1764  !!!!!!!!!!!!!!!!!! ERROR LOADING CONFIG FILE !!!!!!!!!!!!!!!!!!!!!  [22:18:38.943266] Start:1518 Binding to 192.168.1.100:49152 (http:0) [22:18:39.363148] AddMRDevice:1405 [0xc41840]: adding renderer (HUAWEI Sound-0286) [22:18:39.363354] AddMRDevice:1418 [0xc41840]: cannot get mac HUAWEI Sound-0286, creating fake fcceaf23 [22:18:39.371278] MasterHandler:1036 [0xc41840]: subscribe success [22:18:39.395668] AddMRDevice:1405 [0xc43a58]: adding renderer (LIVINGROOM) [22:18:39.395813] AddMRDevice:1418 [0xc43a58]: cannot get mac LIVINGROOM, creating fake 13a64ae6 [22:18:39.428824] MasterHandler:1036 [0xc43a58]: subscribe success [22:19:00.344578] Stop:1540 stopping squeezelite devices ... [22:19:00.344673] Stop:1544 terminate update thread ... [22:19:00.344770] Stop:1549 terminate main thread ... [22:19:00.344824] Stop:1553 stopping UPnP devices ...  等程序执行完，就会生成一个基础配置文件（config.xml，这个名字可以按照你的指定更换），里面包括默认配置和发现的你的局域网的DLNA设备。 注：你的DLNA Render设备需要打开才能被发现并生成配置。\n其中…段是针对你所有设备的通用配置\n每个发现的设备都有一个…段，你可以在段中设置和common中相同的参数，这个参数会针对这个设备覆盖common参数。\n以我的设备为例，生成的设备配置如下:\n  uuid:b8aabe2db4df5481eb8b4f4cf3f302eac9a1539192127404166af840a41a0945  HUAWEI Sound-0286  HUAWEI Sound-0286  bb:bb:23:af:ce:fc  1    uuid:9166ce01-e4b5-4d56-8a1a-6a031b3b416b  LIVINGROOM  LIVINGROOM  bb:bb:e6:4a:a6:13  1  其中LIVINGROOM是我客厅的PS Audio PWD解码器，而HUAWEI Sound-0286则是卧室的Huawei智能音箱\n接下来要对config.xml做一些简单的配置修改。例如, 在\"common\"段设置了设备最大支持48Khz采样率， 但是如果你的设备的最大采样率是192Khz，你可以在\"device\"段进行覆盖:\n  ...  48000  ...    ...  192000  ...  尽管根据测试华为智能音箱支持24bit/192Khz，但是华为给出的规格是24bit/96Khz，所以建议还是把Huawei Sound的采样率设置为96Khz\n每个被发现的设备的\"enable\"属性都是1，表示会为这个设备生成一个桥设备，在Roon设置里面的音频设备列表展现， 如果你不想在Roon中使用这个设备，就将enable设置为0.\n“device\"段里面有一个有个属性是DLNA Render的标识，类似:\nbb:bb:e6:4a:a6:13 这是这个设备的标识，后续发现设备时，设备mac地址和这个段相同，就不会添加新的设备，并使用这个\"device\"设置的属性进行处理。\n！！！！！！最重要的一点: 将roon_mode属性设置为1，否则Roon下可能不工作\n1 !!!!! **另外重要的一点，需要在Huawei Sound的\"device\"段中增加以下属性，否则会不能播放下一首，或者播放进度条不走\n1 后续有新设备发现，squeeze2upnp会为新设备增加一个device段到配置文件。如果你不想自动增加新设备（可能会造成问题），可以将\"common\"段的\"enabled\"属性设置为0\n运行 测试运行：\nsqueeze2upnp-x86-64-static -x config.xml 调试信息会输出在终端\n正式运行\n./Bin/squeeze2upnp-x86-64-static -z -x config.xml 要用-z参数在后台运行，否则即使使用Linux在后台运行，会占用一个CPU核的全部资源\n然后需要开机启动就将上诉命令加入到/etc/rc.local 中即可\nRoon配置 在Roon的“设置”-“音频\"中启用桥设备，并给其命名，例如命名为Huawei Sound\n打开SqueezeBox设置\n对设备进行一些简单配置\n打开SqueezeBox设置\n在右下角的设备选择那里选择需要播放的设备，例如Huawei Sound音箱\n打开SqueezeBox设置\n然后打开设备的DSP选项\n打开SqueezeBox设置\n将Huawei Sound高于96k码率的音乐和DSD音乐进行转换\n打开SqueezeBox设置\n最终效果 这下，就可以在Roon系统中使用Huawei智能音箱了\n打开SqueezeBox设置\n使用docker运行squeeze2upnp 上面的squeeze2upnp安装过程依赖命令行，有点复杂，我简单做了一个docker镜像，在群晖上可以通过docker套件的界面来部署squeeze2upnp\n首先需要在群晖上安装官方的docker套件：\nDocker套件\n打开Docker套件界面搜索镜像hjianhao/hjianhao-squeeze2upnp\n搜索镜像\n搜索到镜像后下载，并在映像界面启动容器\n启动容器\n选择高级设置\n高级设置\n在NAS上创建一个保存配置文件(config.xml)的目录，并挂接到容器的/config目录\n挂载配置目录\n因为squeezeupnp涉及范围端口的使用，所以使用host网络\n配置网络\n应用后，一路“下一步”即可启动容器。\n创建容器\n第一次容器虽然启动了，但是功能是失效的，从上面的说明可以看到此时还没有配置文件（config.xml), 点击“详情”按钮弹出容器信息窗口，从“日志”标签中可以看到，加载配置文件失败\n启动失败日志\n此时我们进入“终端”标签，执行/squeeze2upnp/find.sh，用于发现DLNA Render设备，并生成配置文件\n发现设备\n执行完成后，使用“Ctrl+D”退出并停止容器运行。此时在你挂载的配置文件目录中就会有\"Config.xml\"配置文件。\n配置文件\n然后配置按前面对配置文件的描述修改配置文件，再重启容器即可。重启容器前最好将自动重启勾上\n配置文件\n启动成功后，只有一行日志\n配置文件\n通过桥连接解码器 除了上面提到的通过squeeze2upnp转换用DLNA连接解码器外，还有其他的连接解码器的方式：\n 也可以通过RAAT接入Roon Ready的解码器（前提是解码器支持Roon Ready）  这种方式比较简单，只要你的解码器支持Roon Ready且解码器和Roon core在同一个局域网网段，就可以相互发现，不用配置。因为简单且我的解码器不支持Roon Ready就不在这里赘述了\n Roon Core通过USB输出接入解码器，包括直接接入到解码器的USB输入，或者通过解码器界面转换为同轴和光纤输入解码器   Roon Core通过RAAT协议接入Roon Bridge，然后Roon Bridge接入解码器，接入方式和上面说的Roon Core类似  这里主要介绍第三种，因为Bridge可以:\n 让Roon Core和解码器的位置摆放更为灵活，只要Bridge接近解码器即可。 Bridge使用树莓派这种低功耗设备可以比Core更容易避免干扰，同时电源也更好处理。 多个Bridge可以让Roon接入和控制多个房间的音响设备。  因为我个人的主音响系统以DLNA为主，因为我的解码器出声最好的就是DLNA接入，其他数字接入都稍微差一些。所以树莓派做Bridge一个是做对比测试，另一个方面是作为我一个房间耳放的接入。这样我就可以用Roon控制在我的耳放上播放音乐。\n树莓派做Roon Bridge是性价比非常高的Roon Bridge设备，功耗低，价格低，USB输出较好，I2S数字音频卡多，电源好处理。\n在树莓派上装Roon Bridge 如果树莓派专用于Roon Bridge，则最好安装volumio，moode，RoPieee这类已经预先集成了Bridge软件的，比较简单。\n因为我的树莓派还需要跑其他的软件，所以我是预装了系统再手工安装Roon Bridge。也比较简单\n官方有Linux安装指导：https://help.roonlabs.com/portal/en/kb/articles/linux-install\n要选对架构，对于树莓派4，如果是32位系统，用armv7hf， 我用的系统是64位的，所以使用armv8，安装只有下面三个指令\n$ curl -O http://download.roonlabs.com/builds/roonbridge-installer-linuxarmv8.sh $ chmod +x roonbridge-installer-linuxarmv8.sh $ sudo ./roonbridge-installer-linuxarmv8.sh 取消安装在执行脚本加上参数uninstall，如：\nsudo ./roonbridge-installer-linuxarmv8.sh uninstall 安装完成后会有安装结果提示，看是否安装成功。\n重要提示: 安装完成后，可能会出现在Roon的关于里面可以看到桥，但是在音频里面看不到输出设备，应该是树莓派没有启动音频设备，需要修改config.txt文件，将dtparam=audio=on这一行的注释弃掉（删除前面的#号）\n除了USB输出外，也可以给树莓派添加I2S音频扩展卡，通过同轴/平衡/光纤输出到解码器。\n如果选用的是兼容HiFiBerry系列的显卡，可以参考： https://www.hifiberry.com/docs/software/configuring-linux-3-18-x/\n以我买的带平衡和光纤输出的兼容HiFiBerry Digi+的扩展版为例，修改/boot/config.txt\n 注释掉dtparam=audio=on 添加dtoverlay=hifiberry-dac  重启树莓派即可。然后用aplay指令可以看到I2S声卡\naplay -l **** List of PLAYBACK Hardware Devices **** card 0: sndrpihifiberry [snd_rpi_hifiberry_digi], device 0: HifiBerry Digi HiFi wm8804-spdif-0 [HifiBerry Digi HiFi wm8804-spdif-0]  Subdevices: 1/1  Subdevice #0: subdevice #0 通过VPN实现远程ROON 打通WAN连接服务器  首先要像运营商（如电信宽带）申请公网IP。 申请一个免费域名，同时将域名设置动态映射。这个每家域名提供商具体不一样，根据指导去配。 公网IP一般是动态的，会变化的，使用DDNS来做动态映射，以下以梅林固件的路由器为例：  服务器选择不同域名提供商，然后输入用户名等参数\n搭建VPN服务器 以威联通QVPN为例\n  安装QVPN套件\n  启动L2TP/IPSec服务器\n其中10.2.0.0是VPN虚拟机局域网的网段\n  在路由器做端口映射，将以下端口流量导向NAS UDP:500 UDP:4500 UDP:1701\n  端口映射\n远程机器连接VPN服务器 a. 用户名和密码是你创建VPN服务器的NAS用户用户名和密码 b. 共享密钥是第2步设置的预共享密钥\n 进行连接  在Windows上创建VPN连接\n连接后会增加一个虚拟网卡\nPPP 适配器 myhome:   连接特定的 DNS 后缀 . . . . . . . :  本地链接 IPv6 地址. . . . . . . . : fe80::ecdd:7a2a:228e:9b30%51  IPv4 地址 . . . . . . . . . . . . : 10.2.0.1  子网掩码 . . . . . . . . . . . . : 255.255.255.255  默认网关. . . . . . . . . . . . . : 0.0.0.0 同时你也可以访问NAS所在局域网的地址 例如\nping 192.168.1.100 此时你的Windows和NAS已经处在一个虚拟局域网下，启动远程计算机上的Roon就可以连接NAS上跑的Core了。\n此时你看到Roon Core的IP地址是刚才建立的VPN的网段（Core机器上也有一个虚拟网卡）\n同时也可以发现远程Windows机器上连接的音频设备用于播放\n","wordCount":"5520","inLanguage":"zh","datePublished":"2022-08-08T11:42:00Z","dateModified":"2022-08-08T11:42:00Z","author":{"@type":"Person","name":"swimminghao"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/08_01_nas/nas%E6%95%99%E7%A8%8B/%E5%BD%B1%E9%9F%B3/%E5%B0%86roon%E5%BC%95%E5%85%A5%E6%88%91%E7%9A%84%E5%90%AC%E9%9F%B3%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%8F%E9%AA%8C/"},"publisher":{"@type":"Organization","name":"swimminghao","logo":{"@type":"ImageObject","url":"https://swimminghao1.github.io/favicon.ico"}}}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://swimminghao1.github.io/ accesskey=h title="🍀 swimminghao (Alt + H)">🍀 swimminghao</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://swimminghao1.github.io/categories/ title="🗂 归类"><span>🗂 归类</span></a></li><li><a href=https://swimminghao1.github.io/tags/ title="🏷️ 标签"><span>🏷️ 标签</span></a></li><li><a href=https://swimminghao1.github.io/archives/ title="⏱️ 时间轴"><span>⏱️ 时间轴</span></a></li><li><a href=https://swimminghao1.github.io/search/ title="🔍 索引 (Alt + /)" accesskey=/><span>🔍 索引</span></a></li><li><a href=https://swimminghao1.github.io/friends title="🧑‍🤝‍🧑 友链"><span>🧑‍🤝‍🧑 友链</span></a></li><li><a href=https://www.travellings.cn/go.html title=🚇><span>🚇</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://swimminghao1.github.io/>主页</a>&nbsp;»&nbsp;<a href=https://swimminghao1.github.io/post/>📚文章</a></div><h1 class=post-title><a href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/08_01_nas/nas%E6%95%99%E7%A8%8B/%E5%BD%B1%E9%9F%B3/%E5%B0%86roon%E5%BC%95%E5%85%A5%E6%88%91%E7%9A%84%E5%90%AC%E9%9F%B3%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%8F%E9%AA%8C/>将Roon引入我的听音系统的一些经验</a></h1><div class=post-meta>August 8, 2022&nbsp;·&nbsp;12 分钟&nbsp;·&nbsp;5520 字&nbsp;·&nbsp;swimminghao&nbsp;|&nbsp;<a href=https://github.com/songtianlun/songtianlun.github.io/edit/main/content/post/02%e4%b8%aa%e4%ba%ba%e5%ad%a6%e4%b9%a0/08_01_nas/nas%e6%95%99%e7%a8%8b/%e5%bd%b1%e9%9f%b3/%e5%b0%86Roon%e5%bc%95%e5%85%a5%e6%88%91%e7%9a%84%e5%90%ac%e9%9f%b3%e7%b3%bb%e7%bb%9f%e7%9a%84%e4%b8%80%e4%ba%9b%e7%bb%8f%e9%aa%8c.md rel="noopener noreferrer" target=_blank>PR</a>
<span>| <span class=waline-pageview-count data-path=/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/08_01_nas/nas%E6%95%99%E7%A8%8B/%E5%BD%B1%E9%9F%B3/%E5%B0%86roon%E5%BC%95%E5%85%A5%E6%88%91%E7%9A%84%E5%90%AC%E9%9F%B3%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%8F%E9%AA%8C/><i class="fa fa-spinner fa-spin"></i></span> Hits</span></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e5%b0%86roon%e5%bc%95%e5%85%a5%e6%88%91%e7%9a%84%e5%90%ac%e9%9f%b3%e7%b3%bb%e7%bb%9f%e7%9a%84%e4%b8%80%e4%ba%9b%e7%bb%8f%e9%aa%8c aria-label=将Roon引入我的听音系统的一些经验>将Roon引入我的听音系统的一些经验</a><ul><li><a href=#%e7%b3%bb%e7%bb%9f%e8%bf%81%e7%a7%bb aria-label=系统迁移>系统迁移</a><ul><li><a href=#%e6%88%91%e4%b9%8b%e5%89%8d%e5%90%ac%e9%9f%b3%e7%b3%bb%e7%bb%9f%e7%9a%84%e7%bd%91%e7%bb%9c%e6%8b%93%e6%89%91 aria-label=我之前听音系统的网络拓扑>我之前听音系统的网络拓扑</a></li><li><a href=#%e5%bc%95%e5%85%a5roon%e5%90%8e%e5%90%ac%e9%9f%b3%e7%b3%bb%e7%bb%9f%e7%bd%91%e7%bb%9c%e6%8b%93%e6%89%91 aria-label=引入Roon后听音系统网络拓扑>引入Roon后听音系统网络拓扑</a></li></ul></li><li><a href=#%e5%ae%89%e8%a3%85roon aria-label=安装Roon>安装Roon</a></li><li><a href=#%e5%a6%82%e4%bd%95%e4%b8%baroon%e5%a2%9e%e5%8a%a0dlna%e8%be%93%e5%87%ba aria-label=如何为Roon增加DLNA输出>如何为Roon增加DLNA输出</a><ul><li><a href=#%e5%ae%89%e8%a3%85 aria-label=安装>安装</a></li><li><a href=#dlna%e8%ae%be%e5%a4%87%e5%8f%91%e7%8e%b0 aria-label=DLNA设备发现>DLNA设备发现</a></li><li><a href=#%e8%bf%90%e8%a1%8c aria-label=运行>运行</a></li><li><a href=#roon%e9%85%8d%e7%bd%ae aria-label=Roon配置>Roon配置</a></li><li><a href=#%e6%9c%80%e7%bb%88%e6%95%88%e6%9e%9c aria-label=最终效果>最终效果</a></li><li><a href=#%e4%bd%bf%e7%94%a8docker%e8%bf%90%e8%a1%8csqueeze2upnp aria-label=使用docker运行squeeze2upnp>使用docker运行squeeze2upnp</a></li></ul></li><li><a href=#%e9%80%9a%e8%bf%87%e6%a1%a5%e8%bf%9e%e6%8e%a5%e8%a7%a3%e7%a0%81%e5%99%a8 aria-label=通过桥连接解码器>通过桥连接解码器</a><ul><li><a href=#%e5%9c%a8%e6%a0%91%e8%8e%93%e6%b4%be%e4%b8%8a%e8%a3%85roon-bridge aria-label="在树莓派上装Roon Bridge">在树莓派上装Roon Bridge</a></li></ul></li><li><a href=#%e9%80%9a%e8%bf%87vpn%e5%ae%9e%e7%8e%b0%e8%bf%9c%e7%a8%8broon aria-label=通过VPN实现远程ROON>通过VPN实现远程ROON</a><ul><li><a href=#%e6%89%93%e9%80%9awan%e8%bf%9e%e6%8e%a5%e6%9c%8d%e5%8a%a1%e5%99%a8 aria-label=打通WAN连接服务器>打通WAN连接服务器</a></li><li><a href=#%e6%90%ad%e5%bb%bavpn%e6%9c%8d%e5%8a%a1%e5%99%a8 aria-label=搭建VPN服务器>搭建VPN服务器</a></li><li><a href=#%e8%bf%9c%e7%a8%8b%e6%9c%ba%e5%99%a8%e8%bf%9e%e6%8e%a5vpn%e6%9c%8d%e5%8a%a1%e5%99%a8 aria-label=远程机器连接VPN服务器>远程机器连接VPN服务器</a></li></ul></li></ul></li></ul></div><div><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-7296634171837358 data-ad-slot=9161921641 data-ad-format=auto data-full-width-responsive=true></ins></div><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></details></div><div class=post-content><blockquote style=margin-top:8px><p style=text-align:center;text-indent:0><a href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/08_01_nas/nas%E6%95%99%E7%A8%8B/%E5%BD%B1%E9%9F%B3/%E5%B0%86roon%E5%BC%95%E5%85%A5%E6%88%91%E7%9A%84%E5%90%AC%E9%9F%B3%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%8F%E9%AA%8C/>本文</a>
首发于
<a href=https://swimminghao1.github.io/>🍀 永浩</a>，
<a href=/disclaimer/>转载</a> 请注明
<a href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/08_01_nas/nas%E6%95%99%E7%A8%8B/%E5%BD%B1%E9%9F%B3/%E5%B0%86roon%E5%BC%95%E5%85%A5%E6%88%91%E7%9A%84%E5%90%AC%E9%9F%B3%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%8F%E9%AA%8C/>来源</a>。</p></blockquote><h1 id=将roon引入我的听音系统的一些经验>将Roon引入我的听音系统的一些经验<a hidden class=anchor aria-hidden=true href=#将roon引入我的听音系统的一些经验>#</a></h1><h2 id=系统迁移>系统迁移<a hidden class=anchor aria-hidden=true href=#系统迁移>#</a></h2><p>我对之前的听音系统还是比较满意的，我并不是发烧友，当系统的音质能达到一定程度，剩下的就是音乐欣赏的事情了。
这个系统我用了很多年，也没打算做什么调整。
试用了Roon后，我比较喜欢它的和音乐管理，关联，搜索，流媒体音乐深度集成等特性，就购买了帐号，正式将Roon引入了我的听音系统，并归一化了所有的终端。</p><h3 id=我之前听音系统的网络拓扑>我之前听音系统的网络拓扑<a hidden class=anchor aria-hidden=true href=#我之前听音系统的网络拓扑>#</a></h3><p>我之前的听音系统终端并没有归一，音频的流动主要以DLNA为主，因为解码器的Bridge卡作为Render，内部通过I2S输入解码板，效果非常好，我又不想折腾各种USB,同轴，光纤的连接，线材不菲且完全不在我的知识范围内。</p><p>群晖NAS作为Media Server， 解码器，Mac软件，智能音箱作为Render，电脑、手机和Pad的软件作为Browser和Controller</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/ARStes.png alt=img></p><h3 id=引入roon后听音系统网络拓扑>引入Roon后听音系统网络拓扑<a hidden class=anchor aria-hidden=true href=#引入roon后听音系统网络拓扑>#</a></h3><p>Roon的帐号挺贵的，加上我对原来的硬件还算满意，所以想最大限度的利用，思想就是用Roon Core管理音乐，同时将Roon的RAAT协议都转为DLNA，复用现有的设备。 电脑、手机、平板的客户端都统一到Roon Remote。</p><p>感谢philippe开发的SqueezeBox桥接到Upnp的软件squeeze2upnp，使得我复用原有DLNA系统的想法成为了可能，而且他对待用户的反馈是否友好，耐心解答并能很快做出修改。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/bI0HXd.png alt=img></p><h2 id=安装roon>安装Roon<a hidden class=anchor aria-hidden=true href=#安装roon>#</a></h2><ol><li>在这个网站下载群晖NAS的套件 ： <a href="https://link.zhihu.com/?target=https%3A//roononnas.org/de/synology-2/">https://roononnas.org/de/synology-2/</a></li><li>在共享文件夹中创建一个名字叫"RoonServer"的共享目录
强烈建议使用SSD安装Roon，因为Roon服务器的随机访问速度很关键，我的NAS没有SSD安装槽位，只能通过USB 3.0的盒子接入SATA3固态硬盘。
如果接入外置存储，将外置存储的名字改为RoonServer</li></ol><p><img loading=lazy src=https://pic3.zhimg.com/80/v2-6e0e4162dd90561a3a6ff1849cbff092_1440w.png alt=img></p><ol><li>选择手动安装套件，安装过程比较长</li></ol><p><img loading=lazy src=https://pic3.zhimg.com/80/v2-3547ab297d44f318b02b32cb07946de2_1440w.png alt=img></p><p>手机，PC, MAC, Pad的客户端可以参考官网安装：
<a href="https://link.zhihu.com/?target=https%3A//roonlabs.com/downloads">https://roonlabs.com/downloads</a></p><p>以Windows为例，在PC上启动Roon，就回发现群晖NAS的Core，连接就可以使用</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/xI5wDG.png alt=img></p><h2 id=如何为roon增加dlna输出>如何为Roon增加DLNA输出<a hidden class=anchor aria-hidden=true href=#如何为roon增加dlna输出>#</a></h2><p>Roon本身不支持输出，但是支持Squeezebox设备（就是LMS（Logitech Media Server）体系）</p><p>下图就是在Roon设置中打开对squeezbox的支持。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/1tU9eZ.png alt=img></p><p>打开SqueezeBox设置</p><p>接下来的思路就是做一个桥，将Roon使用Squeezebox协议输出的音频转成DLNA的协议</p><p>使用这个软件实现：Squeeze2upnp，他的目的就是将DLNA设备变成SqueezeBox设备</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/tH8jk8.png alt=img></p><p>软件github地址：<a href="https://link.zhihu.com/?target=https%3A//github.com/philippe44/LMS-to-uPnP">https://github.com/philippe44/LMS-to-uPnP</a>
里面有下载地址和提供支持的论坛地址</p><h3 id=安装>安装<a hidden class=anchor aria-hidden=true href=#安装>#</a></h3><p>安装非常简单，从github网址给出的下载网站下载最新的安装包解压即可。</p><p>！！！重要，需要安装1.49.8之后的版本，这之前的版本不支持Huawei Sound，我和作者squeeze2upnp的作者philippe反馈后并提供日志后，他经过修改，新出了版本用于支持Huawei Sound</p><p>安装包解压后有一个Bin目录，所有平台的可执行文件都在里面。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ls ./Bin
</span></span><span style=display:flex><span>cc32160mt.dll  libmad-0.dll   libopusfile-0.dll  pthreadBC2.dll               squeeze2upnp-armv5te-static  squeeze2upnp-bsd-x64-static    squeeze2upnp-ppc-static    squeeze2upnp-x86            ssleay32.dll
</span></span><span style=display:flex><span>libeay32.dll   libogg-0.dll   libsoxr.dll        squeeze2upnp-aarch64         squeeze2upnp-armv6hf         squeeze2upnp-osx-multi         squeeze2upnp-sparc         squeeze2upnp-x86-64
</span></span><span style=display:flex><span>libfaad2.dll   libogg.dll     libvorbis.dll      squeeze2upnp-aarch64-static  squeeze2upnp-armv6hf-static  squeeze2upnp-osx-multi-static  squeeze2upnp-sparc-static  squeeze2upnp-x86-64-static
</span></span><span style=display:flex><span>libFLAC.dll    libopus-0.dll  libvorbisfile.dll  squeeze2upnp-armv5te         squeeze2upnp-bsd-x64         squeeze2upnp-ppc               squeeze2upnp-win.exe       squeeze2upnp-x86-static
</span></span></code></pre></div><p>尽管Squeeze2upnp是LMS的一个插件，但是他并不依赖LMS，可以独立运行。解压后在Bin目录下后缀为_static的可执行程序都是独立执行程序</p><p>Squeeze2upnp支持Windows, OSX, or Linux x86/64, ARM and OSX</p><p>可以从可执行的程序名中看出哪个可执行程序对应什么平台。</p><p>例如树莓派，你可以选择 ： squeeze2upnp-armv6hf-static
例如群晖X86 NAS， 你可以选择 ： squeeze2upnp-x86-64-static</p><p>对于Linux，对应你平台的执行文件需要增加可执行属性，例如</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chomd a+x squeeze2upnp-x86-64-static
</span></span></code></pre></div><p>以下描述以都以群晖NAS为例，其他的平台将命令中的可执行程序替换为对应平台的执行程序即可。</p><h3 id=dlna设备发现>DLNA设备发现<a hidden class=anchor aria-hidden=true href=#dlna设备发现>#</a></h3><p>对于第一次使用，或者希望重新创建一个配置文件，需要执行以下命令:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./Bin/squeeze2upnp-x86-64-static -i config.xml
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>22:18:38.897023<span style=color:#f92672>]</span> main:1756 Starting squeeze2upnp version: v1.49.6 <span style=color:#f92672>(</span>Feb <span style=color:#ae81ff>13</span> <span style=color:#ae81ff>2021</span> @ 14:45:36<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>22:18:38.904985<span style=color:#f92672>]</span> main:1764
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>!!!!!!!!!!!!!!!!!! ERROR LOADING CONFIG FILE !!!!!!!!!!!!!!!!!!!!!
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>22:18:38.943266<span style=color:#f92672>]</span> Start:1518 Binding to 192.168.1.100:49152 <span style=color:#f92672>(</span>http:0<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>22:18:39.363148<span style=color:#f92672>]</span> AddMRDevice:1405 <span style=color:#f92672>[</span>0xc41840<span style=color:#f92672>]</span>: adding renderer <span style=color:#f92672>(</span>HUAWEI Sound-0286<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>22:18:39.363354<span style=color:#f92672>]</span> AddMRDevice:1418 <span style=color:#f92672>[</span>0xc41840<span style=color:#f92672>]</span>: cannot get mac HUAWEI Sound-0286, creating fake fcceaf23
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>22:18:39.371278<span style=color:#f92672>]</span> MasterHandler:1036 <span style=color:#f92672>[</span>0xc41840<span style=color:#f92672>]</span>: subscribe success
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>22:18:39.395668<span style=color:#f92672>]</span> AddMRDevice:1405 <span style=color:#f92672>[</span>0xc43a58<span style=color:#f92672>]</span>: adding renderer <span style=color:#f92672>(</span>LIVINGROOM<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>22:18:39.395813<span style=color:#f92672>]</span> AddMRDevice:1418 <span style=color:#f92672>[</span>0xc43a58<span style=color:#f92672>]</span>: cannot get mac LIVINGROOM, creating fake 13a64ae6
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>22:18:39.428824<span style=color:#f92672>]</span> MasterHandler:1036 <span style=color:#f92672>[</span>0xc43a58<span style=color:#f92672>]</span>: subscribe success
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>22:19:00.344578<span style=color:#f92672>]</span> Stop:1540 stopping squeezelite devices ...
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>22:19:00.344673<span style=color:#f92672>]</span> Stop:1544 terminate update thread ...
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>22:19:00.344770<span style=color:#f92672>]</span> Stop:1549 terminate main thread ...
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>22:19:00.344824<span style=color:#f92672>]</span> Stop:1553 stopping UPnP devices ...
</span></span><span style=display:flex><span>  
</span></span></code></pre></div><p>等程序执行完，就会生成一个基础配置文件（config.xml，这个名字可以按照你的指定更换），里面包括默认配置和发现的你的局域网的DLNA设备。
注：你的DLNA Render设备需要打开才能被发现并生成配置。</p><p>其中&mldr;段是针对你所有设备的通用配置</p><p>每个发现的设备都有一个&mldr;段，你可以在段中设置和common中相同的参数，这个参数会针对这个设备覆盖common参数。</p><p>以我的设备为例，生成的设备配置如下:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;device&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;udn&gt;</span>uuid:b8aabe2db4df5481eb8b4f4cf3f302eac9a1539192127404166af840a41a0945<span style=color:#f92672>&lt;/udn&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;name&gt;</span>HUAWEI Sound-0286<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;friendly_name&gt;</span>HUAWEI Sound-0286<span style=color:#f92672>&lt;/friendly_name&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;mac&gt;</span>bb:bb:23:af:ce:fc<span style=color:#f92672>&lt;/mac&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;enabled&gt;</span>1<span style=color:#f92672>&lt;/enabled&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/device&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;device&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;udn&gt;</span>uuid:9166ce01-e4b5-4d56-8a1a-6a031b3b416b<span style=color:#f92672>&lt;/udn&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;name&gt;</span>LIVINGROOM<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;friendly_name&gt;</span>LIVINGROOM<span style=color:#f92672>&lt;/friendly_name&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;mac&gt;</span>bb:bb:e6:4a:a6:13<span style=color:#f92672>&lt;/mac&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;enabled&gt;</span>1<span style=color:#f92672>&lt;/enabled&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/device&gt;</span>
</span></span></code></pre></div><p>其中LIVINGROOM是我客厅的PS Audio PWD解码器，而HUAWEI Sound-0286则是卧室的Huawei智能音箱</p><p>接下来要对config.xml做一些简单的配置修改。例如, 在"common"段设置了设备最大支持48Khz采样率， 但是如果你的设备的最大采样率是192Khz，你可以在"device"段进行覆盖:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;common&gt;</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;sample_rate&gt;</span>48000<span style=color:#f92672>&lt;/sample_rate&gt;</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/common&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;device&gt;</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;sample_rate&gt;</span>192000<span style=color:#f92672>&lt;/sample_rate&gt;</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/device&gt;</span>
</span></span></code></pre></div><p>尽管根据测试华为智能音箱支持24bit/192Khz，但是华为给出的规格是24bit/96Khz，所以建议还是把Huawei Sound的采样率设置为96Khz</p><p>每个被发现的设备的"enable"属性都是1，表示会为这个设备生成一个桥设备，在Roon设置里面的音频设备列表展现， 如果你不想在Roon中使用这个设备，就将enable设置为0.</p><p>&ldquo;device"段里面有一个有个属性是DLNA Render的标识，类似:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;mac&gt;</span>bb:bb:e6:4a:a6:13<span style=color:#f92672>&lt;/mac&gt;</span>
</span></span></code></pre></div><p>这是这个设备的标识，后续发现设备时，设备mac地址和这个段相同，就不会添加新的设备，并使用这个"device"设置的属性进行处理。</p><p>！！！！！！<strong>最重要的一点: 将roon_mode属性设置为1，否则Roon下可能不工作</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;roon_mode&gt;</span>1<span style=color:#f92672>&lt;/roon_mode&gt;</span>
</span></span></code></pre></div><p>!!!!! **另外重要的一点，需要在Huawei Sound的"device"段中增加以下属性，否则会不能播放下一首，或者播放进度条不走</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;accept_nexturi&gt;</span>1<span style=color:#f92672>&lt;/accept_nexturi&gt;</span>
</span></span></code></pre></div><p>后续有新设备发现，squeeze2upnp会为新设备增加一个device段到配置文件。如果你不想自动增加新设备（可能会造成问题），可以将"common"段的"enabled"属性设置为0</p><h3 id=运行>运行<a hidden class=anchor aria-hidden=true href=#运行>#</a></h3><p>测试运行：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>squeeze2upnp-x86-64-static -x config.xml
</span></span></code></pre></div><p>调试信息会输出在终端</p><p>正式运行</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./Bin/squeeze2upnp-x86-64-static -z -x config.xml
</span></span></code></pre></div><p><strong>要用-z参数在后台运行，否则即使使用Linux在后台运行，会占用一个CPU核的全部资源</strong></p><p>然后需要开机启动就将上诉命令加入到/etc/rc.local 中即可</p><h3 id=roon配置>Roon配置<a hidden class=anchor aria-hidden=true href=#roon配置>#</a></h3><p>在Roon的“设置”->&ldquo;音频"中启用桥设备，并给其命名，例如命名为Huawei Sound</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/Iy4CJZ.png alt=img>
打开SqueezeBox设置</p><p>对设备进行一些简单配置</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/7mMaKv.png alt=img>
打开SqueezeBox设置</p><p>在右下角的设备选择那里选择需要播放的设备，例如Huawei Sound音箱</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/k8yphX.png alt=img></p><p>打开SqueezeBox设置</p><p>然后打开设备的DSP选项</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/upQYiY.png alt=img></p><p>打开SqueezeBox设置</p><p>将Huawei Sound高于96k码率的音乐和DSD音乐进行转换</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/PJD3kH.png alt=img></p><p>打开SqueezeBox设置</p><h3 id=最终效果>最终效果<a hidden class=anchor aria-hidden=true href=#最终效果>#</a></h3><p>这下，就可以在Roon系统中使用Huawei智能音箱了</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/aNWfx5.png alt=img></p><p>打开SqueezeBox设置</p><h3 id=使用docker运行squeeze2upnp>使用docker运行squeeze2upnp<a hidden class=anchor aria-hidden=true href=#使用docker运行squeeze2upnp>#</a></h3><p>上面的squeeze2upnp安装过程依赖命令行，有点复杂，我简单做了一个docker镜像，在群晖上可以通过docker套件的界面来部署squeeze2upnp</p><p>首先需要在群晖上安装官方的docker套件：</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/NYNGnt.png alt=img></p><p>Docker套件</p><p>打开Docker套件界面搜索镜像hjianhao/hjianhao-squeeze2upnp</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/FUUdkE.png alt=img></p><p>搜索镜像</p><p>搜索到镜像后下载，并在映像界面启动容器</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/JHcoGG.png alt=img></p><p>启动容器</p><p>选择高级设置</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/xyI5MY.png alt=img></p><p>高级设置</p><p>在NAS上创建一个保存配置文件(config.xml)的目录，并挂接到容器的/config目录</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/emPGbd.png alt=img>
挂载配置目录</p><p>因为squeezeupnp涉及范围端口的使用，所以使用host网络</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/92EmTA.png alt=img></p><p>配置网络</p><p>应用后，一路“下一步”即可启动容器。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/bUOzYT.png alt=img></p><p>创建容器</p><p>第一次容器虽然启动了，但是功能是失效的，从上面的说明可以看到此时还没有配置文件（config.xml), 点击“详情”按钮弹出容器信息窗口，从“日志”标签中可以看到，加载配置文件失败</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/0h8vfs.png alt=img></p><p>启动失败日志</p><p>此时我们进入“终端”标签，执行/squeeze2upnp/find.sh，用于发现DLNA Render设备，并生成配置文件</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/W7nS4q.png alt=img></p><p>发现设备</p><p>执行完成后，使用“Ctrl+D”退出并停止容器运行。此时在你挂载的配置文件目录中就会有"Config.xml"配置文件。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/4RnZnH.png alt=img></p><p>配置文件</p><p>然后配置按前面对配置文件的描述修改配置文件，再重启容器即可。重启容器前最好将自动重启勾上</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/kELb20.png alt=img></p><p>配置文件</p><p>启动成功后，只有一行日志</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/vGoRhB.png alt=img></p><p>配置文件</p><h2 id=通过桥连接解码器>通过桥连接解码器<a hidden class=anchor aria-hidden=true href=#通过桥连接解码器>#</a></h2><p>除了上面提到的通过squeeze2upnp转换用DLNA连接解码器外，还有其他的连接解码器的方式：</p><ol><li>也可以通过RAAT接入Roon Ready的解码器（前提是解码器支持Roon Ready）</li></ol><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/i0oUff.png alt=img></p><p>这种方式比较简单，只要你的解码器支持Roon Ready且解码器和Roon core在同一个局域网网段，就可以相互发现，不用配置。因为简单且我的解码器不支持Roon Ready就不在这里赘述了</p><ol><li>Roon Core通过USB输出接入解码器，包括直接接入到解码器的USB输入，或者通过解码器界面转换为同轴和光纤输入解码器</li></ol><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/JyNZAA.png alt=img></p><ol><li>Roon Core通过RAAT协议接入Roon Bridge，然后Roon Bridge接入解码器，接入方式和上面说的Roon Core类似</li></ol><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/e3nyvO.png alt=img></p><p>这里主要介绍第三种，因为Bridge可以:</p><ol><li>让Roon Core和解码器的位置摆放更为灵活，只要Bridge接近解码器即可。</li><li>Bridge使用树莓派这种低功耗设备可以比Core更容易避免干扰，同时电源也更好处理。</li><li>多个Bridge可以让Roon接入和控制多个房间的音响设备。</li></ol><p>因为我个人的主音响系统以DLNA为主，因为我的解码器出声最好的就是DLNA接入，其他数字接入都稍微差一些。所以树莓派做Bridge一个是做对比测试，另一个方面是作为我一个房间耳放的接入。这样我就可以用Roon控制在我的耳放上播放音乐。</p><p>树莓派做Roon Bridge是性价比非常高的Roon Bridge设备，功耗低，价格低，USB输出较好，I2S数字音频卡多，电源好处理。</p><h3 id=在树莓派上装roon-bridge>在树莓派上装Roon Bridge<a hidden class=anchor aria-hidden=true href=#在树莓派上装roon-bridge>#</a></h3><p>如果树莓派专用于Roon Bridge，则最好安装volumio，moode，RoPieee这类已经预先集成了Bridge软件的，比较简单。</p><p>因为我的树莓派还需要跑其他的软件，所以我是预装了系统再手工安装Roon Bridge。也比较简单</p><p>官方有Linux安装指导：<a href="https://link.zhihu.com/?target=https%3A//help.roonlabs.com/portal/en/kb/articles/linux-install">https://help.roonlabs.com/portal/en/kb/articles/linux-install</a></p><p>要选对架构，对于树莓派4，如果是32位系统，用armv7hf， 我用的系统是64位的，所以使用armv8，安装只有下面三个指令</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ curl -O http://download.roonlabs.com/builds/roonbridge-installer-linuxarmv8.sh
</span></span><span style=display:flex><span>$ chmod +x roonbridge-installer-linuxarmv8.sh
</span></span><span style=display:flex><span>$ sudo ./roonbridge-installer-linuxarmv8.sh
</span></span></code></pre></div><p>取消安装在执行脚本加上参数uninstall，如：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ./roonbridge-installer-linuxarmv8.sh uninstall
</span></span></code></pre></div><p>安装完成后会有安装结果提示，看是否安装成功。</p><p><strong>重要提示:</strong> 安装完成后，可能会出现在Roon的关于里面可以看到桥，但是在音频里面看不到输出设备，应该是树莓派没有启动音频设备，需要修改config.txt文件，将dtparam=audio=on这一行的注释弃掉（删除前面的#号）</p><p>除了USB输出外，也可以给树莓派添加I2S音频扩展卡，通过同轴/平衡/光纤输出到解码器。</p><p>如果选用的是兼容HiFiBerry系列的显卡，可以参考：
<a href="https://link.zhihu.com/?target=https%3A//www.hifiberry.com/docs/software/configuring-linux-3-18-x/">https://www.hifiberry.com/docs/software/configuring-linux-3-18-x/</a></p><p>以我买的带平衡和光纤输出的兼容HiFiBerry Digi+的扩展版为例，修改/boot/config.txt</p><ol><li>注释掉dtparam=audio=on</li><li>添加dtoverlay=hifiberry-dac</li></ol><p>重启树莓派即可。然后用aplay指令可以看到I2S声卡</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aplay -l
</span></span><span style=display:flex><span>**** List of PLAYBACK Hardware Devices ****
</span></span><span style=display:flex><span>card 0: sndrpihifiberry <span style=color:#f92672>[</span>snd_rpi_hifiberry_digi<span style=color:#f92672>]</span>, device 0: HifiBerry Digi HiFi wm8804-spdif-0 <span style=color:#f92672>[</span>HifiBerry Digi HiFi wm8804-spdif-0<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  Subdevices: 1/1
</span></span><span style=display:flex><span>  Subdevice <span style=color:#75715e>#0: subdevice #0</span>
</span></span></code></pre></div><h2 id=通过vpn实现远程roon>通过VPN实现远程ROON<a hidden class=anchor aria-hidden=true href=#通过vpn实现远程roon>#</a></h2><h3 id=打通wan连接服务器>打通WAN连接服务器<a hidden class=anchor aria-hidden=true href=#打通wan连接服务器>#</a></h3><ol><li>首先要像运营商（如电信宽带）申请公网IP。</li><li>申请一个免费域名，同时将域名设置动态映射。这个每家域名提供商具体不一样，根据指导去配。</li><li>公网IP一般是动态的，会变化的，使用DDNS来做动态映射，以下以梅林固件的路由器为例：</li></ol><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/SGqe84.png alt=img></p><p>服务器选择不同域名提供商，然后输入用户名等参数</p><h3 id=搭建vpn服务器>搭建VPN服务器<a hidden class=anchor aria-hidden=true href=#搭建vpn服务器>#</a></h3><p>以威联通QVPN为例</p><ol><li><p>安装QVPN套件</p></li><li><p>启动L2TP/IPSec服务器</p><p>其中10.2.0.0是VPN虚拟机局域网的网段</p></li><li><p>在路由器做端口映射，将以下端口流量导向NAS
UDP:500
UDP:4500
UDP:1701</p></li></ol><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/SIDPjB.png alt=img></p><p>端口映射</p><h3 id=远程机器连接vpn服务器>远程机器连接VPN服务器<a hidden class=anchor aria-hidden=true href=#远程机器连接vpn服务器>#</a></h3><p>a. 用户名和密码是你创建VPN服务器的NAS用户用户名和密码
b. 共享密钥是第2步设置的预共享密钥</p><ol><li>进行连接</li></ol><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/nEdvdx.png alt=img></p><p>在Windows上创建VPN连接</p><p>连接后会增加一个虚拟网卡</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>PPP 适配器 myhome:
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>   连接特定的 DNS 后缀 . . . . . . . :
</span></span><span style=display:flex><span>   本地链接 IPv6 地址. . . . . . . . : fe80::ecdd:7a2a:228e:9b30%51
</span></span><span style=display:flex><span>   IPv4 地址 . . . . . . . . . . . . : 10.2.0.1
</span></span><span style=display:flex><span>   子网掩码  . . . . . . . . . . . . : 255.255.255.255
</span></span><span style=display:flex><span>   默认网关. . . . . . . . . . . . . : 0.0.0.0
</span></span></code></pre></div><p>同时你也可以访问NAS所在局域网的地址
例如</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ping 192.168.1.100
</span></span></code></pre></div><p>此时你的Windows和NAS已经处在一个虚拟局域网下，启动远程计算机上的Roon就可以连接NAS上跑的Core了。</p><p>此时你看到Roon Core的IP地址是刚才建立的VPN的网段（Core机器上也有一个虚拟网卡）</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/rEux8b.png alt=img></p><p>同时也可以发现远程Windows机器上连接的音频设备用于播放</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/2022/08/08/ZUXu4N.png alt=img></p><div class=post-meta></hr>注：本作品采用<a rel=license target=view_window href=http://creativecommons.org/licenses/by-nc-sa/4.0/> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议 </a>进行许可。</div></div><footer class=post-footer><ul class=post-tags><li><a href=https://swimminghao1.github.io/tags/nas/>🏷 nas</a></li><li><a href=https://swimminghao1.github.io/tags/%E5%BD%B1%E9%9F%B3/>🏷 影音</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 将Roon引入我的听音系统的一些经验 on twitter" href="https://twitter.com/intent/tweet/?text=%e5%b0%86Roon%e5%bc%95%e5%85%a5%e6%88%91%e7%9a%84%e5%90%ac%e9%9f%b3%e7%b3%bb%e7%bb%9f%e7%9a%84%e4%b8%80%e4%ba%9b%e7%bb%8f%e9%aa%8c&url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f08_01_nas%2fnas%25E6%2595%2599%25E7%25A8%258B%2f%25E5%25BD%25B1%25E9%259F%25B3%2f%25E5%25B0%2586roon%25E5%25BC%2595%25E5%2585%25A5%25E6%2588%2591%25E7%259A%2584%25E5%2590%25AC%25E9%259F%25B3%25E7%25B3%25BB%25E7%25BB%259F%25E7%259A%2584%25E4%25B8%2580%25E4%25BA%259B%25E7%25BB%258F%25E9%25AA%258C%2f&hashtags=nas%2c%e5%bd%b1%e9%9f%b3"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 将Roon引入我的听音系统的一些经验 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f08_01_nas%2fnas%25E6%2595%2599%25E7%25A8%258B%2f%25E5%25BD%25B1%25E9%259F%25B3%2f%25E5%25B0%2586roon%25E5%25BC%2595%25E5%2585%25A5%25E6%2588%2591%25E7%259A%2584%25E5%2590%25AC%25E9%259F%25B3%25E7%25B3%25BB%25E7%25BB%259F%25E7%259A%2584%25E4%25B8%2580%25E4%25BA%259B%25E7%25BB%258F%25E9%25AA%258C%2f&title=%e5%b0%86Roon%e5%bc%95%e5%85%a5%e6%88%91%e7%9a%84%e5%90%ac%e9%9f%b3%e7%b3%bb%e7%bb%9f%e7%9a%84%e4%b8%80%e4%ba%9b%e7%bb%8f%e9%aa%8c&summary=%e5%b0%86Roon%e5%bc%95%e5%85%a5%e6%88%91%e7%9a%84%e5%90%ac%e9%9f%b3%e7%b3%bb%e7%bb%9f%e7%9a%84%e4%b8%80%e4%ba%9b%e7%bb%8f%e9%aa%8c&source=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f08_01_nas%2fnas%25E6%2595%2599%25E7%25A8%258B%2f%25E5%25BD%25B1%25E9%259F%25B3%2f%25E5%25B0%2586roon%25E5%25BC%2595%25E5%2585%25A5%25E6%2588%2591%25E7%259A%2584%25E5%2590%25AC%25E9%259F%25B3%25E7%25B3%25BB%25E7%25BB%259F%25E7%259A%2584%25E4%25B8%2580%25E4%25BA%259B%25E7%25BB%258F%25E9%25AA%258C%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 将Roon引入我的听音系统的一些经验 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f08_01_nas%2fnas%25E6%2595%2599%25E7%25A8%258B%2f%25E5%25BD%25B1%25E9%259F%25B3%2f%25E5%25B0%2586roon%25E5%25BC%2595%25E5%2585%25A5%25E6%2588%2591%25E7%259A%2584%25E5%2590%25AC%25E9%259F%25B3%25E7%25B3%25BB%25E7%25BB%259F%25E7%259A%2584%25E4%25B8%2580%25E4%25BA%259B%25E7%25BB%258F%25E9%25AA%258C%2f&title=%e5%b0%86Roon%e5%bc%95%e5%85%a5%e6%88%91%e7%9a%84%e5%90%ac%e9%9f%b3%e7%b3%bb%e7%bb%9f%e7%9a%84%e4%b8%80%e4%ba%9b%e7%bb%8f%e9%aa%8c"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 将Roon引入我的听音系统的一些经验 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f08_01_nas%2fnas%25E6%2595%2599%25E7%25A8%258B%2f%25E5%25BD%25B1%25E9%259F%25B3%2f%25E5%25B0%2586roon%25E5%25BC%2595%25E5%2585%25A5%25E6%2588%2591%25E7%259A%2584%25E5%2590%25AC%25E9%259F%25B3%25E7%25B3%25BB%25E7%25BB%259F%25E7%259A%2584%25E4%25B8%2580%25E4%25BA%259B%25E7%25BB%258F%25E9%25AA%258C%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 将Roon引入我的听音系统的一些经验 on whatsapp" href="https://api.whatsapp.com/send?text=%e5%b0%86Roon%e5%bc%95%e5%85%a5%e6%88%91%e7%9a%84%e5%90%ac%e9%9f%b3%e7%b3%bb%e7%bb%9f%e7%9a%84%e4%b8%80%e4%ba%9b%e7%bb%8f%e9%aa%8c%20-%20https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f08_01_nas%2fnas%25E6%2595%2599%25E7%25A8%258B%2f%25E5%25BD%25B1%25E9%259F%25B3%2f%25E5%25B0%2586roon%25E5%25BC%2595%25E5%2585%25A5%25E6%2588%2591%25E7%259A%2584%25E5%2590%25AC%25E9%259F%25B3%25E7%25B3%25BB%25E7%25BB%259F%25E7%259A%2584%25E4%25B8%2580%25E4%25BA%259B%25E7%25BB%258F%25E9%25AA%258C%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 将Roon引入我的听音系统的一些经验 on telegram" href="https://telegram.me/share/url?text=%e5%b0%86Roon%e5%bc%95%e5%85%a5%e6%88%91%e7%9a%84%e5%90%ac%e9%9f%b3%e7%b3%bb%e7%bb%9f%e7%9a%84%e4%b8%80%e4%ba%9b%e7%bb%8f%e9%aa%8c&url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f08_01_nas%2fnas%25E6%2595%2599%25E7%25A8%258B%2f%25E5%25BD%25B1%25E9%259F%25B3%2f%25E5%25B0%2586roon%25E5%25BC%2595%25E5%2585%25A5%25E6%2588%2591%25E7%259A%2584%25E5%2590%25AC%25E9%259F%25B3%25E7%25B3%25BB%25E7%25BB%259F%25E7%259A%2584%25E4%25B8%2580%25E4%25BA%259B%25E7%25BB%258F%25E9%25AA%258C%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div><nav class=paginav><a class=prev href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/16_01_%E6%96%87%E6%A1%A3%E6%95%B4%E7%90%86%E6%80%BB%E7%BB%93/%E6%96%87%E6%A1%A3%E6%95%B4%E7%90%86%E6%80%BB%E7%BB%93/><span class=title>« 上一页</span><br><span>文档整理总结</span></a>
<a class=next href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/17_01_%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AE/hexo-start/><span class=title>下一页 »</span><br><span>hexo-start</span></a></nav></footer></article></main><footer class=footer><span>Copyright &copy; 2023 • <a href=https://swimminghao1.github.io/>swimminghao</a></span><div><span><a href=/about/>关于</a>
• <a href=/disclaimer/>免责声明</a>
• <a href=/sitemap.xml target=view_window>站点地图</a>
• <a href=https://www.foreverblog.cn/go.html target=view_window>虫洞</a>
• PV <span id=busuanzi_value_site_pv><i class="fa fa-spinner fa-spin"></i></span></span></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><meta name=”apple-mobile-web-app-capable” content="”yes”"><script>"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js")})</script></body></html>