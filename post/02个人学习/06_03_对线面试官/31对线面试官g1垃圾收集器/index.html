<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>31、【对线面试官】G1垃圾收集器 | swimminghao</title><meta name=keywords content="面试,记录"><meta name=description content="31、【对线面试官】G1垃圾收集器 要不这次来聊聊G1垃圾收集器？ CMS垃圾收集器的升级 G1垃圾收集器可以给你设定一个你希望Stop The Word"><meta name=author content="swimminghao"><link rel=canonical href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_03_%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98/31%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98g1%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8/><meta name=yandex-verification content="73b1a797f62c0e98"><meta name=baidu-site-verification content="code-gnOrbP1RyC"><meta name=baidu_union_verify content="4c552c344295cb984c46ebe74962b067"><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/satouriko/LxgwWenKai_Webfonts@v1.101/dist/LXGWWenKai-Light.css><link crossorigin=anonymous href=/assets/css/stylesheet.min.0a5d9aa21e56d0b7d41b1d4b56af0b911caf526faf5060a8d3717579bf27cb93.css integrity="sha256-Cl2aoh5W0LfUGx1LVq8LkRyvUm+vUGCo03F1eb8ny5M=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://swimminghao1.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://swimminghao1.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://swimminghao1.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://swimminghao1.github.io/apple-touch-icon.png><link rel=mask-icon href=https://swimminghao1.github.io/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.97.0"><link rel=manifest href=/manifest.json><script type=text/javascript>function downloadJSAtOnload(){var e=document.createElement("script");e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7296634171837358",document.body.appendChild(e)}window.addEventListener?window.addEventListener("load",downloadJSAtOnload,!1):window.attachEvent?window.attachEvent("onload",downloadJSAtOnload):window.onload=downloadJSAtOnload</script><script async defer data-website-id=3d947a98-2774-46b0-805f-fe2e4877a1d7 src=https://umami.frytea.com/umami.js></script>
<script async src=https://swimminghao1.github.io/js/busuanzi.pure.mini.js></script>
<link rel=stylesheet href=/libs/font-awesome-4.7.0/css/font-awesome.min.css><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script src=https://swimminghao1.github.io/js/mermaid.min.js crossorigin=anonymous></script>
<script>const config={startOnLoad:!0,theme:"forest",themeVariables:{lineColor:"#fafafa"},flowchart:{useMaxWidth:!1,htmlLabels:!0}};mermaid.initialize(config),window.onload=()=>{window.mermaid.init(void 0,document.querySelectorAll(".language-mermaid"))}</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?c49e2f5be5e009382be07455c33b1394",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-136094326-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="31、【对线面试官】G1垃圾收集器"><meta property="og:description" content="31、【对线面试官】G1垃圾收集器 要不这次来聊聊G1垃圾收集器？ CMS垃圾收集器的升级 G1垃圾收集器可以给你设定一个你希望Stop The Word"><meta property="og:type" content="article"><meta property="og:url" content="https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_03_%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98/31%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98g1%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8/"><meta property="og:image" content="https://swimminghao1.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-02-28T19:57:47+00:00"><meta property="article:modified_time" content="2022-02-28T19:57:47+00:00"><meta property="og:site_name" content="swimminghao"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://swimminghao1.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="31、【对线面试官】G1垃圾收集器"><meta name=twitter:description content="31、【对线面试官】G1垃圾收集器 要不这次来聊聊G1垃圾收集器？ CMS垃圾收集器的升级 G1垃圾收集器可以给你设定一个你希望Stop The Word"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"📚文章","item":"https://swimminghao1.github.io/post/"},{"@type":"ListItem","position":2,"name":"31、【对线面试官】G1垃圾收集器","item":"https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_03_%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98/31%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98g1%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"31、【对线面试官】G1垃圾收集器","name":"31、【对线面试官】G1垃圾收集器","description":"31、【对线面试官】G1垃圾收集器 要不这次来聊聊G1垃圾收集器？ CMS垃圾收集器的升级 G1垃圾收集器可以给你设定一个你希望Stop The Word","keywords":["面试","记录"],"articleBody":"31、【对线面试官】G1垃圾收集器 要不这次来聊聊G1垃圾收集器？   CMS垃圾收集器的升级\n  G1垃圾收集器可以给你设定一个你希望Stop The Word停顿时间，G1垃圾收集器会根据这个时间尽量满足你\n  在前面我在介绍JM堆的时候，堆的内存分布是以「物理」空间进行隔离\n  在G1垃圾收集器的世界上，堆的划分不再是「物理」形式，而是以「逻辑」的形式进行划分\n  不过的「分代」概念在G1垃圾收集器的世界还是一样奏效的\n  比如说：新对象一般会分配到Eden区经过默认15次的 Minor GC新生代的对象如果还存活，会移交到老年代等等。\n  堆被划分了多个同等份的区域，在G1里每个区域叫做Region\n  G1中，还有一种叫 Humongous（大对象）区域，其实就是用来存储特别大的对象（大于 Region内存的一半）\n  一旦发现没有引用指向大对象，就可直接在年轻代的 Minor GC中被回收掉\n  之所以要将「堆空间」进行「细分」多个小的区域，是因为像以前的垃圾收集器都是对堆进行「物理」划分，如果堆空间（内存）大的时候，每次进行「垃圾回收」都需要对一整块大的区域进行回收，那收集的时间是不好控制的；而划分多个小区域之后，那对这些「小区域」回收就容易控制它的「收集时间」了\n    GC过程   在G1收集器中，可以主要分为有Minor GC（ Young GC）和 Mixed GC，也有些特殊场景可能会发生 Full GC\n  Minor GC\n  G1的 Minor GC其实触发时机跟前面提到过的垃圾收集器都是一样的\n  等到Eden区满了之后，会触发 Minor GC。 Minor GCI同样也是会发生 Stop The World的\n  要补充说明的是：在G1的世界里，新生代和老年代所占堆的空间是没那么固定的（会动态根据「最大停顿时间」进行调整）\n  这块会给我们提供参数进行配置就好了\n  所以，动态地改变收集年轻代 Region的个数可以「控制」 Minor GCI的开销\n  Minor GC我认为可以简单分为为三个步骤：根扫描、更新\u0026\u0026处理RSet、复制对象\n1）第一步应该很好理解，因为这跟之前CMS是类似的，可以理解为初始标记的过程\n2）第二步就是处理RSet的信息并且扫描，将老年代对象持有年轻代对象的相关引用都加入到 GC Roots下，避免被回收掉\n​\t涉及到「Rset」的概念\n​\t（1）上ー次我们聊CMS回收过程的时候，同样讲到了 Minor GC，它是通过「卡表」（ cart table）来避免全表扫描老年代的对象\n​\t（2）因为 Minor GC是回收年轻代的对象，但如果老年代有对象引用着年轻代，那这些被老年代引用的对象也不能回收掉\n​\t（3）同样的，在G1也有这种问题（毕竟是Minor GC）。CMS是卡表，而G1解决「跨代引用」的问题的存储一般叫做RSet\n​\t（4）只要记住，RSet这种存储在每个 Region都会有，它记录着「其他 Region引用了当前 Regiong的对象关系」\n​\t​\t（5）对于年轻代的 Region，它的RSet只保存了来自老年代的引用（因为年轻代的没必要存储啊，自己都要做 Minor GC了\n​\t（6）而对于老年代的 Region来说，它的RSet也只会保存老年代对它的引用（在G1垃圾收集器，老年代回收之前，都会先对年轻代进行回收，所以没必要保存年轻代的引用）\n3）第三步：把扫描之后存活的对象往「空的 Survivor区」或者老年代」存放，其他的Eden区进行清除\n​\t（1）这里要提下的是，在G1还有另一个名词，叫做CSet\n​\t（2）它的全称是 Collection Set，保存了一次GC中「将执行垃圾回收」的 Region。CSet中的所有存活对象都会被转移到别的可用 Region上\n​\t（3）在 Minor GC的最后，会处理下软引用、弱引用、 JNI Weak等引用，结束收集\n      总结\n  总结起来就是：扫描、处理跨 Region引用、收集至CSet、复制清除、处理引用\n    MixedGC过程  当堆空间的占用率达到一定阈值后会触发 Mixed GC（默认45%，由参数决定） Mixed GC会依赖「全局并发标记」统计后的 Region数据 「全局并发标记」它的过程跟CMS非常类型，步骤大概是：初始标记（STW）、并发标记、最终标记（ST）以及清理（ST）  说明： Mixed GC它一定会回收年轻代，并会采集部分老年代的Region进行回收的，所以它是一个混合GC 「初始标记」，  这个过程是「共用」了 Minor GC的 Stop The World（Mixed GC一定会发生 Minor GC），复用了「扫描 GC Roots的操作 在这个过程中，老年代和新生代都会扫 总的来说，「初始标记」这个过程还是比较快的，毕竟没有追溯遍历嘛   「并发标记」  这个阶段不会 Stop The World，GC线程与用户线程一起执行，GC线程负责收集各个 Region的存活对象信息 从 GC Roots往下追溯，査找整个堆存活的对象，比较耗时   「重新标记」  跟CMS又一样，标记那些在「并发标记」阶段发生变化的对象 CMS在「重新标记」阶段，应该会重新扫描所有的线程栈和整个年轻代作为root,G1不是  在G1中解決「并发标记」阶段导致引用变更的问题，使用的是SATB算法 可以简单理解为：在GC开始的时候，它为存活的对象做了一次「快照」 在「并发阶段」时，把每一次发生引用关系变化时旧的引用值给记下来 然后在「重新标记」阶段只扫描着块「发生过变化」的引用，看有没有对象还是存活的，加入到「 GC Roots」上 不过SATB算法有个小的问题，就是：如果在开始时，G1就认为它是活的，那就在此次GC中不会对它回收，即便可能在「并发阶段」上对象已经变为了垃圾。 所以，G1也有可能会存在「浮动垃圾」 但是总的来说，对于G1而言，问题不大（毕竟它不是追求一次把所有的垃圾都清除掉，而是注重 Stop The Worlde时间）     「清理」  这个阶段也是会 Stop The World的，主要清点和重置标记状态，会根据「停顿预模型」（其实就是设定的停顿时间），来决定本次GC回收多少 Region 一般来说， Mixed GC会选定所有的年轻代 Region，部分「回收价值高」的老年代 Region（回收价值高其实就是垃圾多）进行采集 最后 Mixed GC进行清除还是通过「拷贝」/「复制」的方式去干的 所以在G1中，一次回收未必是将所有的垃圾进行回收的，G1会依据停顿时间做出选择 Region数量      什么时候发生full GC  如果在 Mixed GC中无法跟上用户线程分配内存的速度，导致老年代填满无法继续进行 Mixed GC，就又会降级到 serial oldGC来收集整个 GC heap 其实跟CMS是非常类似的都是因为空间不足 不过uGC这个场景相较于CMS还是很少的，毕竟G1没有像CMS「内存碎片」这种问题  G1垃圾收集器特点：  从原来的「物理」分代，变成现在的「逻辑」分代，将堆内存「逻辑」划分为多个Region 使用CSet来存储可回收Region的集合 使用RSet来处理跨代引用的问题（注意：RSet不保留 年轻代相关的引用关系） G1可简单分为：Minor GC 和Mixed GC以及Full GC 【Eden区满则触发】Minor GC 回收过程可简单分为：(STW) 扫描 GC Roots、更新\u0026\u0026处理Rset、复制清除 全局并发标记的过程跟CMS过程差不多：初始标记（STW）、并发标记、最终标记（STW）以及清理（STW） 【整堆空间占一定比例则触发】Mixed GC 依赖「全局并发标记」，得到CSet(可回收Region)，就进行「复制清除」 使用SATB算法来处理「并发标记」阶段对象引用存在变更的问题 亮点\u0026\u0026重点：提供可停顿时间参数供用户设置（G1会尽量满足该停顿时间来调整 GC时回收Region的数量） R大描述G1原理的时候，他提到：从宏观的角度看G1，主要分为两块「全局并发标记」和「拷贝存活对象」  ","wordCount":"3005","inLanguage":"zh","datePublished":"2022-02-28T19:57:47Z","dateModified":"2022-02-28T19:57:47Z","author":{"@type":"Person","name":"swimminghao"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_03_%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98/31%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98g1%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8/"},"publisher":{"@type":"Organization","name":"swimminghao","logo":{"@type":"ImageObject","url":"https://swimminghao1.github.io/favicon.ico"}}}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://swimminghao1.github.io/ accesskey=h title="🍀 swimminghao (Alt + H)">🍀 swimminghao</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://swimminghao1.github.io/categories/ title="🗂 归类"><span>🗂 归类</span></a></li><li><a href=https://swimminghao1.github.io/tags/ title="🏷️ 标签"><span>🏷️ 标签</span></a></li><li><a href=https://swimminghao1.github.io/archives/ title="⏱️ 时间轴"><span>⏱️ 时间轴</span></a></li><li><a href=https://swimminghao1.github.io/search/ title="🔍 索引 (Alt + /)" accesskey=/><span>🔍 索引</span></a></li><li><a href=https://swimminghao1.github.io/friends title="🧑‍🤝‍🧑 友链"><span>🧑‍🤝‍🧑 友链</span></a></li><li><a href=https://www.travellings.cn/go.html title=🚇><span>🚇</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://swimminghao1.github.io/>主页</a>&nbsp;»&nbsp;<a href=https://swimminghao1.github.io/post/>📚文章</a></div><h1 class=post-title><a href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_03_%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98/31%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98g1%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8/>31、【对线面试官】G1垃圾收集器</a></h1><div class=post-meta>February 28, 2022&nbsp;·&nbsp;6 分钟&nbsp;·&nbsp;3005 字&nbsp;·&nbsp;swimminghao&nbsp;|&nbsp;<a href=https://github.com/songtianlun/songtianlun.github.io/edit/main/content/post/02%e4%b8%aa%e4%ba%ba%e5%ad%a6%e4%b9%a0/06_03_%e5%af%b9%e7%ba%bf%e9%9d%a2%e8%af%95%e5%ae%98/31%e3%80%81%e3%80%90%e5%af%b9%e7%ba%bf%e9%9d%a2%e8%af%95%e5%ae%98%e3%80%91G1%e5%9e%83%e5%9c%be%e6%94%b6%e9%9b%86%e5%99%a8.md rel="noopener noreferrer" target=_blank>PR</a>
<span>| <span class=waline-pageview-count data-path=/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_03_%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98/31%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98g1%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8/><i class="fa fa-spinner fa-spin"></i></span> Hits</span></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#31%e5%af%b9%e7%ba%bf%e9%9d%a2%e8%af%95%e5%ae%98g1%e5%9e%83%e5%9c%be%e6%94%b6%e9%9b%86%e5%99%a8 aria-label=31、【对线面试官】G1垃圾收集器>31、【对线面试官】G1垃圾收集器</a><ul><li><a href=#%e8%a6%81%e4%b8%8d%e8%bf%99%e6%ac%a1%e6%9d%a5%e8%81%8a%e8%81%8ag1%e5%9e%83%e5%9c%be%e6%94%b6%e9%9b%86%e5%99%a8 aria-label=要不这次来聊聊G1垃圾收集器？>要不这次来聊聊G1垃圾收集器？</a></li><li><a href=#gc%e8%bf%87%e7%a8%8b aria-label=GC过程>GC过程</a></li><li><a href=#mixedgc%e8%bf%87%e7%a8%8b aria-label=MixedGC过程>MixedGC过程</a></li><li><a href=#%e4%bb%80%e4%b9%88%e6%97%b6%e5%80%99%e5%8f%91%e7%94%9ffull-gc aria-label="什么时候发生full GC">什么时候发生full GC</a></li><li><a href=#g1%e5%9e%83%e5%9c%be%e6%94%b6%e9%9b%86%e5%99%a8%e7%89%b9%e7%82%b9 aria-label=G1垃圾收集器特点：><strong>G1垃圾收集器特点</strong>：</a></li></ul></li></ul></div><div><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-7296634171837358 data-ad-slot=9161921641 data-ad-format=auto data-full-width-responsive=true></ins></div><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></details></div><div class=post-content><blockquote style=margin-top:8px><p style=text-align:center;text-indent:0><a href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_03_%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98/31%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98g1%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8/>本文</a>
首发于
<a href=https://swimminghao1.github.io/>🍀 永浩</a>，
<a href=/disclaimer/>转载</a> 请注明
<a href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_03_%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98/31%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98g1%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8/>来源</a>。</p></blockquote><h1 id=31对线面试官g1垃圾收集器>31、【对线面试官】G1垃圾收集器<a hidden class=anchor aria-hidden=true href=#31对线面试官g1垃圾收集器>#</a></h1><h2 id=要不这次来聊聊g1垃圾收集器>要不这次来聊聊G1垃圾收集器？<a hidden class=anchor aria-hidden=true href=#要不这次来聊聊g1垃圾收集器>#</a></h2><ul><li><p>CMS垃圾收集器的升级</p></li><li><p>G1垃圾收集器可以给你设定一个你希望Stop The Word停顿时间，G1垃圾收集器会根据这个时间尽量满足你</p><ul><li><p>在前面我在介绍JM堆的时候，堆的内存分布是以「物理」空间进行隔离</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/qjMhU8_20211229164725.png alt></p></li><li><p>在G1垃圾收集器的世界上，堆的划分不再是「物理」形式，而是以「逻辑」的形式进行划分</p></li><li><p>不过的「分代」概念在G1垃圾收集器的世界还是一样奏效的</p></li><li><p>比如说：新对象一般会分配到Eden区经过默认15次的 Minor GC新生代的对象如果还存活，会移交到老年代等等。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/SwXVef_20211229165004.png alt></p></li><li><p>堆被划分了多个同等份的区域，在G1里每个区域叫做Region</p></li><li><p>G1中，还有一种叫 Humongous（大对象）区域，其实就是用来存储特别大的对象（大于 Region内存的一半）</p></li><li><p>一旦发现没有引用指向大对象，就可直接在年轻代的 Minor GC中被回收掉</p></li><li><p>之所以要将「堆空间」进行「细分」多个小的区域，是因为像以前的垃圾收集器都是对堆进行「物理」划分，如果堆空间（内存）大的时候，每次进行「垃圾回收」都需要对一整块大的区域进行回收，那收集的时间是不好控制的；而划分多个小区域之后，那对这些「小区域」回收就容易控制它的「收集时间」了</p></li></ul></li></ul><h2 id=gc过程>GC过程<a hidden class=anchor aria-hidden=true href=#gc过程>#</a></h2><ul><li><p>在G1收集器中，可以主要分为有Minor GC（ Young GC）和 Mixed GC，也有些特殊场景可能会发生 Full GC</p><ul><li><p>Minor GC</p><ul><li><p>G1的 Minor GC其实触发时机跟前面提到过的垃圾收集器都是一样的</p></li><li><p>等到Eden区满了之后，会触发 Minor GC。 Minor GCI同样也是会发生 Stop The World的</p></li><li><p>要补充说明的是：在G1的世界里，新生代和老年代所占堆的空间是没那么固定的（会动态根据「最大停顿时间」进行调整）</p></li><li><p>这块会给我们提供参数进行配置就好了</p></li><li><p>所以，动态地改变收集年轻代 Region的个数可以「控制」 Minor GCI的开销</p></li><li><p>Minor GC我认为可以简单分为为三个步骤：根扫描、更新&&处理RSet、复制对象</p><p>1）第一步应该很好理解，因为这跟之前CMS是类似的，可以理解为初始标记的过程</p><p>2）第二步就是处理RSet的信息并且扫描，将老年代对象持有年轻代对象的相关引用都加入到 GC Roots下，避免被回收掉</p><p>​ 涉及到「Rset」的概念</p><p>​ （1）上ー次我们聊CMS回收过程的时候，同样讲到了 Minor GC，它是通过「卡表」（ cart table）来避免全表扫描老年代的对象</p><p>​ （2）因为 Minor GC是回收年轻代的对象，但如果老年代有对象引用着年轻代，那这些被老年代引用的对象也不能回收掉</p><p>​ （3）同样的，在G1也有这种问题（毕竟是Minor GC）。CMS是卡表，而G1解决「跨代引用」的问题的存储一般叫做RSet</p><p>​ （4）只要记住，RSet这种存储在每个 Region都会有，它记录着「其他 Region引用了当前 Regiong的对象关系」</p><p>​ <img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/FpUxzX_20211229170010.png alt></p><p>​ （5）对于年轻代的 Region，它的RSet只保存了来自老年代的引用（因为年轻代的没必要存储啊，自己都要做 Minor GC了</p><p>​ （6）而对于老年代的 Region来说，它的RSet也只会保存老年代对它的引用（在G1垃圾收集器，老年代回收之前，都会先对年轻代进行回收，所以没必要保存年轻代的引用）</p><p>3）第三步：把扫描之后存活的对象往「空的 Survivor区」或者老年代」存放，其他的Eden区进行清除</p><p>​ （1）这里要提下的是，在G1还有另一个名词，叫做CSet</p><p>​ （2）它的全称是 Collection Set，保存了一次GC中「将执行垃圾回收」的 Region。CSet中的所有存活对象都会被转移到别的可用 Region上</p><p>​ （3）在 Minor GC的最后，会处理下软引用、弱引用、 JNI Weak等引用，结束收集</p></li></ul></li></ul></li><li><p>总结</p><ul><li><p>总结起来就是：扫描、处理跨 Region引用、收集至CSet、复制清除、处理引用</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/swimminghao/picture@main/img/WZo9bF_20211229170433.png alt></p></li></ul></li></ul><h2 id=mixedgc过程>MixedGC过程<a hidden class=anchor aria-hidden=true href=#mixedgc过程>#</a></h2><ul><li>当堆空间的占用率达到一定阈值后会触发 Mixed GC（默认45%，由参数决定）</li><li>Mixed GC会依赖「全局并发标记」统计后的 Region数据</li><li>「全局并发标记」它的过程跟CMS非常类型，步骤大概是：初始标记（STW）、并发标记、最终标记（ST）以及清理（ST）<ul><li>说明： Mixed GC它一定会回收年轻代，并会采集部分老年代的Region进行回收的，所以它是一个混合GC</li><li>「初始标记」，<ul><li>这个过程是「共用」了 Minor GC的 Stop The World（Mixed GC一定会发生 Minor GC），复用了「扫描 GC Roots的操作</li><li>在这个过程中，老年代和新生代都会扫</li><li>总的来说，「初始标记」这个过程还是比较快的，毕竟没有追溯遍历嘛</li></ul></li><li>「并发标记」<ul><li>这个阶段不会 Stop The World，GC线程与用户线程一起执行，GC线程负责收集各个 Region的存活对象信息</li><li>从 GC Roots往下追溯，査找整个堆存活的对象，比较耗时</li></ul></li><li>「重新标记」<ul><li>跟CMS又一样，标记那些在「并发标记」阶段发生变化的对象</li><li>CMS在「重新标记」阶段，应该会重新扫描所有的线程栈和整个年轻代作为root,G1不是<ul><li>在G1中解決「并发标记」阶段导致引用变更的问题，使用的是SATB算法</li><li>可以简单理解为：在GC开始的时候，它为存活的对象做了一次「快照」</li><li>在「并发阶段」时，把每一次发生引用关系变化时旧的引用值给记下来</li><li>然后在「重新标记」阶段只扫描着块「发生过变化」的引用，看有没有对象还是存活的，加入到「 GC Roots」上</li><li>不过SATB算法有个小的问题，就是：如果在开始时，G1就认为它是活的，那就在此次GC中不会对它回收，即便可能在「并发阶段」上对象已经变为了垃圾。</li><li>所以，G1也有可能会存在「浮动垃圾」</li><li>但是总的来说，对于G1而言，问题不大（毕竟它不是追求一次把所有的垃圾都清除掉，而是注重 Stop The Worlde时间）</li></ul></li></ul></li><li>「清理」<ul><li>这个阶段也是会 Stop The World的，主要清点和重置标记状态，会根据「停顿预模型」（其实就是设定的停顿时间），来决定本次GC回收多少 Region</li><li>一般来说， Mixed GC会选定所有的年轻代 Region，部分「回收价值高」的老年代 Region（回收价值高其实就是垃圾多）进行采集</li><li>最后 Mixed GC进行清除还是通过「拷贝」/「复制」的方式去干的</li><li>所以在G1中，一次回收未必是将所有的垃圾进行回收的，G1会依据停顿时间做出选择 Region数量</li></ul></li></ul></li></ul><h2 id=什么时候发生full-gc>什么时候发生full GC<a hidden class=anchor aria-hidden=true href=#什么时候发生full-gc>#</a></h2><ul><li>如果在 Mixed GC中无法跟上用户线程分配内存的速度，导致老年代填满无法继续进行 Mixed GC，就又会降级到 serial oldGC来收集整个 GC heap</li><li>其实跟CMS是非常类似的都是因为空间不足</li><li>不过uGC这个场景相较于CMS还是很少的，毕竟G1没有像CMS「内存碎片」这种问题</li></ul><h2 id=g1垃圾收集器特点><strong>G1垃圾收集器特点</strong>：<a hidden class=anchor aria-hidden=true href=#g1垃圾收集器特点>#</a></h2><ul><li>从原来的「物理」分代，变成现在的「逻辑」分代，将堆内存「逻辑」划分为多个Region</li><li>使用CSet来存储可回收Region的集合</li><li>使用RSet来处理跨代引用的问题（注意：RSet不保留 年轻代相关的引用关系）</li><li>G1可简单分为：Minor GC 和Mixed GC以及Full GC</li><li>【Eden区满则触发】Minor GC 回收过程可简单分为：(STW) 扫描 GC Roots、更新&&处理Rset、复制清除</li><li>全局并发标记的过程跟CMS过程差不多：初始标记（STW）、并发标记、最终标记（STW）以及清理（STW）</li><li>【整堆空间占一定比例则触发】Mixed GC 依赖「全局并发标记」，得到CSet(可回收Region)，就进行「复制清除」</li><li>使用SATB算法来处理「并发标记」阶段对象引用存在变更的问题</li><li><strong>亮点&&重点</strong>：提供可停顿时间参数供用户设置（<strong>G1会尽量满足该停顿时间来调整 GC时回收Region的数量</strong>）</li><li>R大描述G1原理的时候，他提到：从宏观的角度看G1，主要分为两块「<strong>全局并发标记</strong>」和「<strong>拷贝存活对象</strong>」</li></ul><div class=post-meta></hr>注：本作品采用<a rel=license target=view_window href=http://creativecommons.org/licenses/by-nc-sa/4.0/> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议 </a>进行许可。</div></div><footer class=post-footer><ul class=post-tags><li><a href=https://swimminghao1.github.io/tags/%E9%9D%A2%E8%AF%95/>🏷 面试</a></li><li><a href=https://swimminghao1.github.io/tags/%E8%AE%B0%E5%BD%95/>🏷 记录</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 31、【对线面试官】G1垃圾收集器 on twitter" href="https://twitter.com/intent/tweet/?text=31%e3%80%81%e3%80%90%e5%af%b9%e7%ba%bf%e9%9d%a2%e8%af%95%e5%ae%98%e3%80%91G1%e5%9e%83%e5%9c%be%e6%94%b6%e9%9b%86%e5%99%a8&url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f06_03_%25E5%25AF%25B9%25E7%25BA%25BF%25E9%259D%25A2%25E8%25AF%2595%25E5%25AE%2598%2f31%25E5%25AF%25B9%25E7%25BA%25BF%25E9%259D%25A2%25E8%25AF%2595%25E5%25AE%2598g1%25E5%259E%2583%25E5%259C%25BE%25E6%2594%25B6%25E9%259B%2586%25E5%2599%25A8%2f&hashtags=%e9%9d%a2%e8%af%95%2c%e8%ae%b0%e5%bd%95"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 31、【对线面试官】G1垃圾收集器 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f06_03_%25E5%25AF%25B9%25E7%25BA%25BF%25E9%259D%25A2%25E8%25AF%2595%25E5%25AE%2598%2f31%25E5%25AF%25B9%25E7%25BA%25BF%25E9%259D%25A2%25E8%25AF%2595%25E5%25AE%2598g1%25E5%259E%2583%25E5%259C%25BE%25E6%2594%25B6%25E9%259B%2586%25E5%2599%25A8%2f&title=31%e3%80%81%e3%80%90%e5%af%b9%e7%ba%bf%e9%9d%a2%e8%af%95%e5%ae%98%e3%80%91G1%e5%9e%83%e5%9c%be%e6%94%b6%e9%9b%86%e5%99%a8&summary=31%e3%80%81%e3%80%90%e5%af%b9%e7%ba%bf%e9%9d%a2%e8%af%95%e5%ae%98%e3%80%91G1%e5%9e%83%e5%9c%be%e6%94%b6%e9%9b%86%e5%99%a8&source=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f06_03_%25E5%25AF%25B9%25E7%25BA%25BF%25E9%259D%25A2%25E8%25AF%2595%25E5%25AE%2598%2f31%25E5%25AF%25B9%25E7%25BA%25BF%25E9%259D%25A2%25E8%25AF%2595%25E5%25AE%2598g1%25E5%259E%2583%25E5%259C%25BE%25E6%2594%25B6%25E9%259B%2586%25E5%2599%25A8%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 31、【对线面试官】G1垃圾收集器 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f06_03_%25E5%25AF%25B9%25E7%25BA%25BF%25E9%259D%25A2%25E8%25AF%2595%25E5%25AE%2598%2f31%25E5%25AF%25B9%25E7%25BA%25BF%25E9%259D%25A2%25E8%25AF%2595%25E5%25AE%2598g1%25E5%259E%2583%25E5%259C%25BE%25E6%2594%25B6%25E9%259B%2586%25E5%2599%25A8%2f&title=31%e3%80%81%e3%80%90%e5%af%b9%e7%ba%bf%e9%9d%a2%e8%af%95%e5%ae%98%e3%80%91G1%e5%9e%83%e5%9c%be%e6%94%b6%e9%9b%86%e5%99%a8"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 31、【对线面试官】G1垃圾收集器 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f06_03_%25E5%25AF%25B9%25E7%25BA%25BF%25E9%259D%25A2%25E8%25AF%2595%25E5%25AE%2598%2f31%25E5%25AF%25B9%25E7%25BA%25BF%25E9%259D%25A2%25E8%25AF%2595%25E5%25AE%2598g1%25E5%259E%2583%25E5%259C%25BE%25E6%2594%25B6%25E9%259B%2586%25E5%2599%25A8%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 31、【对线面试官】G1垃圾收集器 on whatsapp" href="https://api.whatsapp.com/send?text=31%e3%80%81%e3%80%90%e5%af%b9%e7%ba%bf%e9%9d%a2%e8%af%95%e5%ae%98%e3%80%91G1%e5%9e%83%e5%9c%be%e6%94%b6%e9%9b%86%e5%99%a8%20-%20https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f06_03_%25E5%25AF%25B9%25E7%25BA%25BF%25E9%259D%25A2%25E8%25AF%2595%25E5%25AE%2598%2f31%25E5%25AF%25B9%25E7%25BA%25BF%25E9%259D%25A2%25E8%25AF%2595%25E5%25AE%2598g1%25E5%259E%2583%25E5%259C%25BE%25E6%2594%25B6%25E9%259B%2586%25E5%2599%25A8%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 31、【对线面试官】G1垃圾收集器 on telegram" href="https://telegram.me/share/url?text=31%e3%80%81%e3%80%90%e5%af%b9%e7%ba%bf%e9%9d%a2%e8%af%95%e5%ae%98%e3%80%91G1%e5%9e%83%e5%9c%be%e6%94%b6%e9%9b%86%e5%99%a8&url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f02%25E4%25B8%25AA%25E4%25BA%25BA%25E5%25AD%25A6%25E4%25B9%25A0%2f06_03_%25E5%25AF%25B9%25E7%25BA%25BF%25E9%259D%25A2%25E8%25AF%2595%25E5%25AE%2598%2f31%25E5%25AF%25B9%25E7%25BA%25BF%25E9%259D%25A2%25E8%25AF%2595%25E5%25AE%2598g1%25E5%259E%2583%25E5%259C%25BE%25E6%2594%25B6%25E9%259B%2586%25E5%2599%25A8%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div><nav class=paginav><a class=prev href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_03_%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98/30%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98cms%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8/><span class=title>« 上一页</span><br><span>30、【对线面试官】CMS垃圾回收器</span></a>
<a class=next href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/06_03_%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98/32%E5%AF%B9%E7%BA%BF%E9%9D%A2%E8%AF%95%E5%AE%98%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%B9%82%E7%AD%89%E5%92%8C%E5%8E%BB%E9%87%8D/><span class=title>下一页 »</span><br><span>32、【对线面试官】如何实现幂等和去重？</span></a></nav></footer><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>评论</span><br></div><div id=tcomment></div><script src=https://utteranc.es/client.js repo=swimminghao1/swimminghao1.github.io issue-term=title theme=github-light crossorigin=anonymous async></script></div></article></main><footer class=footer><span>Copyright &copy; 2023 • <a href=https://swimminghao1.github.io/>swimminghao</a></span><div><span><a href=/about/>关于</a>
• <a href=/disclaimer/>免责声明</a>
• <a href=/sitemap.xml target=view_window>站点地图</a>
• <a href=https://www.foreverblog.cn/go.html target=view_window>虫洞</a>
• PV <span id=busuanzi_value_site_pv><i class="fa fa-spinner fa-spin"></i></span></span></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><meta name=”apple-mobile-web-app-capable” content="”yes”"><script>"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js")})</script></body></html>