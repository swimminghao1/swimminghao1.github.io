<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Mysql获取每组前N条记录 | swimminghao</title><meta name=keywords content="sql,理解"><meta name=description content="Mysql获取每组前N条记录 Select基础知识 我们在实现select语句的时候,通用的sql格式如下: select *columns* from *tables* where *predicae1* group by *columns* having *predicae1* order by *columns* limit *start*, *offset*; 很"><meta name=author content="swimminghao"><link rel=canonical href=https://swimminghao1.github.io/post/08%E5%AD%98%E6%A1%A3%E6%96%87%E4%BB%B6/%E6%96%87%E6%A1%A3/mysql%E8%8E%B7%E5%8F%96%E6%AF%8F%E7%BB%84%E5%89%8Dn%E6%9D%A1%E8%AE%B0%E5%BD%95/><meta name=yandex-verification content="73b1a797f62c0e98"><meta name=baidu-site-verification content="code-gnOrbP1RyC"><meta name=baidu_union_verify content="4c552c344295cb984c46ebe74962b067"><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/satouriko/LxgwWenKai_Webfonts@v1.101/dist/LXGWWenKai-Light.css><link crossorigin=anonymous href=/assets/css/stylesheet.min.0a5d9aa21e56d0b7d41b1d4b56af0b911caf526faf5060a8d3717579bf27cb93.css integrity="sha256-Cl2aoh5W0LfUGx1LVq8LkRyvUm+vUGCo03F1eb8ny5M=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://swimminghao1.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://swimminghao1.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://swimminghao1.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://swimminghao1.github.io/apple-touch-icon.png><link rel=mask-icon href=https://swimminghao1.github.io/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.97.0"><link rel=manifest href=/manifest.json><script type=text/javascript>function downloadJSAtOnload(){var e=document.createElement("script");e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7296634171837358",document.body.appendChild(e)}window.addEventListener?window.addEventListener("load",downloadJSAtOnload,!1):window.attachEvent?window.attachEvent("onload",downloadJSAtOnload):window.onload=downloadJSAtOnload</script><script async defer data-website-id=3d947a98-2774-46b0-805f-fe2e4877a1d7 src=https://umami.frytea.com/umami.js></script>
<script async src=https://swimminghao1.github.io/js/busuanzi.pure.mini.js></script>
<link rel=stylesheet href=/libs/font-awesome-4.7.0/css/font-awesome.min.css><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script src=https://swimminghao1.github.io/js/mermaid.min.js crossorigin=anonymous></script>
<script>const config={startOnLoad:!0,theme:"forest",themeVariables:{lineColor:"#fafafa"},flowchart:{useMaxWidth:!1,htmlLabels:!0}};mermaid.initialize(config),window.onload=()=>{window.mermaid.init(void 0,document.querySelectorAll(".language-mermaid"))}</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?c49e2f5be5e009382be07455c33b1394",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-136094326-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="Mysql获取每组前N条记录"><meta property="og:description" content="Mysql获取每组前N条记录 Select基础知识 我们在实现select语句的时候,通用的sql格式如下: select *columns* from *tables* where *predicae1* group by *columns* having *predicae1* order by *columns* limit *start*, *offset*; 很"><meta property="og:type" content="article"><meta property="og:url" content="https://swimminghao1.github.io/post/08%E5%AD%98%E6%A1%A3%E6%96%87%E4%BB%B6/%E6%96%87%E6%A1%A3/mysql%E8%8E%B7%E5%8F%96%E6%AF%8F%E7%BB%84%E5%89%8Dn%E6%9D%A1%E8%AE%B0%E5%BD%95/"><meta property="og:image" content="https://swimminghao1.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-02-28T19:57:47+00:00"><meta property="article:modified_time" content="2022-02-28T19:57:47+00:00"><meta property="og:site_name" content="swimminghao"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://swimminghao1.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Mysql获取每组前N条记录"><meta name=twitter:description content="Mysql获取每组前N条记录 Select基础知识 我们在实现select语句的时候,通用的sql格式如下: select *columns* from *tables* where *predicae1* group by *columns* having *predicae1* order by *columns* limit *start*, *offset*; 很"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"📚文章","item":"https://swimminghao1.github.io/post/"},{"@type":"ListItem","position":2,"name":"Mysql获取每组前N条记录","item":"https://swimminghao1.github.io/post/08%E5%AD%98%E6%A1%A3%E6%96%87%E4%BB%B6/%E6%96%87%E6%A1%A3/mysql%E8%8E%B7%E5%8F%96%E6%AF%8F%E7%BB%84%E5%89%8Dn%E6%9D%A1%E8%AE%B0%E5%BD%95/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Mysql获取每组前N条记录","name":"Mysql获取每组前N条记录","description":"Mysql获取每组前N条记录 Select基础知识 我们在实现select语句的时候,通用的sql格式如下: select *columns* from *tables* where *predicae1* group by *columns* having *predicae1* order by *columns* limit *start*, *offset*; 很","keywords":["sql","理解"],"articleBody":"Mysql获取每组前N条记录 Select基础知识 我们在实现select语句的时候,通用的sql格式如下:\nselect *columns* from *tables*  where *predicae1*  group by *columns*  having *predicae1*  order by *columns*  limit *start*, *offset*; 很多同学想当然的认为select的执行顺序和其书写顺序一致,其实这是非常错误的主观意愿,也导致了很多SQL语句的执行错误.\n这里给出SQL语句正确的执行顺序:\nfrom *tables* where *predicae1* group by *columns* having *predicae1* select *columns* order by *columns* limit *start*, *offset*; 举个例子,讲解一下group by和order by联合使用时,大家常犯的错误.\n创建一个student的表:\ncreate table student (Id ine1ger primary key autoincrement, Name e1xt, Score ine1ger, ClassId ine1ger); 插入5条虚拟数据:\ninsert into student(Name, Score, ClassId) values(\"lqh\", 60, 1); insert into student(Name, Score, ClassId) values(\"cs\", 99, 1); insert into student(Name, Score, ClassId) values(\"wzy\", 60, 1); insert into student(Name, Score, ClassId) values(\"zqc\", 88, 2); insert into student(Name, Score, ClassId) values(\"bll\", 100, 2); 表格数据如下:\n   Id Name Score ClassId     1 lqh 60 1   2 cs 99 1   3 wzy 60 1   4 zqc 88 2   5 bll 100 2    我们想找每个组分数排名第一的学生.\n大部分SQL语言的初学者可能会写出如下代码:\nselect * from student group by ClassId order by Score;1 结果:\n   Id Name Score ClassId     3 wzy 60 1   5 bll 100 2    明显不是我们想要的结果,大家用上面的执行顺序一分析就知道具体原因了.\n 原因: group by 先于order by执行,order by是针对group by之后的结果进行的排序,而我们想要的group by结果其实应该是在order by之后.\n 正确的sql语句:\nselect * from (select * from student order by Score) group by ClassId; 结果:\n   Id Name Score ClassId     2 cs 99 1   5 bll 100 2     获取每组的前N个记录 这里以LeetCode上难度为hard的一道数据库题目为例。\nDepartment Top Three Salaries 题目内容 The Employee table holds all employees. Every employee has an Id, and there is also a column for the department Id.\n   Id Name Salary DepartmentId     1 Joe 70000 1   2 Henry 80000 2   3 Sam 60000 2   4 Max 90000 1   5 Janet 69000 1   6 Randy 85000 1    The Department table holds all departments of the company.\n   Id Name     1 IT   2 Sales    Wrie1 a SQL query to find employees who earn the top three salaries in each of the department. For the above tables, your SQL query should return the following rows.\n   Department Employee Salary     IT Max 90000   IT Randy 85000   IT Joe 70000   Sales Henry 80000   Sales Sam 60000    题目的意思是：求每个组中工资最高的三个人。(ps：且每个组中，同一名中允许多个员工存在，因为工资是一样高.)\n解决思路  我们先来获取每个组中的前3名工资最高的员工  select * from Employee as e  where (select count(distinct(e1.salary)) from Employee as e1 where e1.DepartmentId = e.DepartmentId and e1.salary  e.salary)  3;12 where中的select是保证：遍历所有记录，取每条记录与当前记录做比较，只有当Employee表中同一部门不超过3个人工资比当前员工高时，这个员工才算是工资排行的前三名。\n 有了第一步的基础，接下来我们只需要使用as去构造新表，并且与Department表做个内联，同时注意排序就好了  select d.Name as Department, e.Name as Employee, e.Salary as Salary  from Employee as e inner join Department as d  on e.DepartmentId = d.Id  where (select count(distinct(e1.Salary)) from Employee as e1 where e1.DepartmentId = e.DepartmentId and e1.Salary  e.Salary)  3  order by e.Salary desc; ","wordCount":"969","inLanguage":"zh","datePublished":"2022-02-28T19:57:47Z","dateModified":"2022-02-28T19:57:47Z","author":{"@type":"Person","name":"swimminghao"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://swimminghao1.github.io/post/08%E5%AD%98%E6%A1%A3%E6%96%87%E4%BB%B6/%E6%96%87%E6%A1%A3/mysql%E8%8E%B7%E5%8F%96%E6%AF%8F%E7%BB%84%E5%89%8Dn%E6%9D%A1%E8%AE%B0%E5%BD%95/"},"publisher":{"@type":"Organization","name":"swimminghao","logo":{"@type":"ImageObject","url":"https://swimminghao1.github.io/favicon.ico"}}}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://swimminghao1.github.io/ accesskey=h title="🍀 swimminghao (Alt + H)">🍀 swimminghao</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://swimminghao1.github.io/categories/ title="🗂 归类"><span>🗂 归类</span></a></li><li><a href=https://swimminghao1.github.io/tags/ title="🏷️ 标签"><span>🏷️ 标签</span></a></li><li><a href=https://swimminghao1.github.io/archives/ title="⏱️ 时间轴"><span>⏱️ 时间轴</span></a></li><li><a href=https://swimminghao1.github.io/search/ title="🔍 索引 (Alt + /)" accesskey=/><span>🔍 索引</span></a></li><li><a href=https://swimminghao1.github.io/friends title="🧑‍🤝‍🧑 友链"><span>🧑‍🤝‍🧑 友链</span></a></li><li><a href=https://www.travellings.cn/go.html title=🚇><span>🚇</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://swimminghao1.github.io/>主页</a>&nbsp;»&nbsp;<a href=https://swimminghao1.github.io/post/>📚文章</a></div><h1 class=post-title><a href=https://swimminghao1.github.io/post/08%E5%AD%98%E6%A1%A3%E6%96%87%E4%BB%B6/%E6%96%87%E6%A1%A3/mysql%E8%8E%B7%E5%8F%96%E6%AF%8F%E7%BB%84%E5%89%8Dn%E6%9D%A1%E8%AE%B0%E5%BD%95/>Mysql获取每组前N条记录</a></h1><div class=post-meta>February 28, 2022&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;969 字&nbsp;·&nbsp;swimminghao&nbsp;|&nbsp;<a href=https://github.com/songtianlun/songtianlun.github.io/edit/main/content/post/08%e5%ad%98%e6%a1%a3%e6%96%87%e4%bb%b6/%e6%96%87%e6%a1%a3/Mysql%e8%8e%b7%e5%8f%96%e6%af%8f%e7%bb%84%e5%89%8dN%e6%9d%a1%e8%ae%b0%e5%bd%95.md rel="noopener noreferrer" target=_blank>PR</a>
<span>| <span class=waline-pageview-count data-path=/post/08%E5%AD%98%E6%A1%A3%E6%96%87%E4%BB%B6/%E6%96%87%E6%A1%A3/mysql%E8%8E%B7%E5%8F%96%E6%AF%8F%E7%BB%84%E5%89%8Dn%E6%9D%A1%E8%AE%B0%E5%BD%95/><i class="fa fa-spinner fa-spin"></i></span> Hits</span></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#mysql%e8%8e%b7%e5%8f%96%e6%af%8f%e7%bb%84%e5%89%8dn%e6%9d%a1%e8%ae%b0%e5%bd%95 aria-label=Mysql获取每组前N条记录>Mysql获取每组前N条记录</a><ul><li><a href=#select%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86 aria-label=Select基础知识>Select基础知识</a></li><li><a href=#%e8%8e%b7%e5%8f%96%e6%af%8f%e7%bb%84%e7%9a%84%e5%89%8dn%e4%b8%aa%e8%ae%b0%e5%bd%95 aria-label=获取每组的前N个记录>获取每组的前N个记录</a></li><li><a href=#department-top-three-salarieshttpsleetcodecomproblemsdepartment-top-three-salaries aria-label="Department Top Three Salaries"><a href=https://leetcode.com/problems/department-top-three-salaries/>Department Top Three Salaries</a></a><ul><li><a href=#%e9%a2%98%e7%9b%ae%e5%86%85%e5%ae%b9 aria-label=题目内容>题目内容</a></li><li><a href=#%e8%a7%a3%e5%86%b3%e6%80%9d%e8%b7%af aria-label=解决思路>解决思路</a></li></ul></li></ul></li></ul></div><div><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-7296634171837358 data-ad-slot=9161921641 data-ad-format=auto data-full-width-responsive=true></ins></div><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></details></div><div class=post-content><blockquote style=margin-top:8px><p style=text-align:center;text-indent:0><a href=https://swimminghao1.github.io/post/08%E5%AD%98%E6%A1%A3%E6%96%87%E4%BB%B6/%E6%96%87%E6%A1%A3/mysql%E8%8E%B7%E5%8F%96%E6%AF%8F%E7%BB%84%E5%89%8Dn%E6%9D%A1%E8%AE%B0%E5%BD%95/>本文</a>
首发于
<a href=https://swimminghao1.github.io/>🍀 永浩</a>，
<a href=/disclaimer/>转载</a> 请注明
<a href=https://swimminghao1.github.io/post/08%E5%AD%98%E6%A1%A3%E6%96%87%E4%BB%B6/%E6%96%87%E6%A1%A3/mysql%E8%8E%B7%E5%8F%96%E6%AF%8F%E7%BB%84%E5%89%8Dn%E6%9D%A1%E8%AE%B0%E5%BD%95/>来源</a>。</p></blockquote><h1 id=mysql获取每组前n条记录>Mysql获取每组前N条记录<a hidden class=anchor aria-hidden=true href=#mysql获取每组前n条记录>#</a></h1><h2 id=select基础知识>Select基础知识<a hidden class=anchor aria-hidden=true href=#select基础知识>#</a></h2><p>我们在实现select语句的时候,通用的sql格式如下:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span>columns<span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> <span style=color:#f92672>*</span>tables<span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>where</span> <span style=color:#f92672>*</span>predicae1<span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>group</span> <span style=color:#66d9ef>by</span> <span style=color:#f92672>*</span>columns<span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>having</span> <span style=color:#f92672>*</span>predicae1<span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>order</span> <span style=color:#66d9ef>by</span> <span style=color:#f92672>*</span>columns<span style=color:#f92672>*</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>limit</span> <span style=color:#f92672>*</span><span style=color:#66d9ef>start</span><span style=color:#f92672>*</span>, <span style=color:#f92672>*</span><span style=color:#66d9ef>offset</span><span style=color:#f92672>*</span>;
</span></span></code></pre></div><p>很多同学想当然的认为select的执行顺序和其书写顺序一致,其实这是非常错误的主观意愿,也导致了很多SQL语句的执行错误.</p><p>这里给出SQL语句正确的执行顺序:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>from</span> <span style=color:#f92672>*</span>tables<span style=color:#f92672>*</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>where</span> <span style=color:#f92672>*</span>predicae1<span style=color:#f92672>*</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>group</span> <span style=color:#66d9ef>by</span> <span style=color:#f92672>*</span>columns<span style=color:#f92672>*</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>having</span> <span style=color:#f92672>*</span>predicae1<span style=color:#f92672>*</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span>columns<span style=color:#f92672>*</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>order</span> <span style=color:#66d9ef>by</span> <span style=color:#f92672>*</span>columns<span style=color:#f92672>*</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>limit</span> <span style=color:#f92672>*</span><span style=color:#66d9ef>start</span><span style=color:#f92672>*</span>, <span style=color:#f92672>*</span><span style=color:#66d9ef>offset</span><span style=color:#f92672>*</span>;
</span></span></code></pre></div><p>举个例子,讲解一下group by和order by联合使用时,大家常犯的错误.</p><p>创建一个student的表:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>create</span> <span style=color:#66d9ef>table</span> student (Id ine1ger <span style=color:#66d9ef>primary</span> <span style=color:#66d9ef>key</span> autoincrement, Name e1xt, Score ine1ger, ClassId ine1ger);
</span></span></code></pre></div><p>插入5条虚拟数据:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>insert</span> <span style=color:#66d9ef>into</span> student(Name, Score, ClassId) <span style=color:#66d9ef>values</span>(<span style=color:#e6db74>&#34;lqh&#34;</span>, <span style=color:#ae81ff>60</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>insert</span> <span style=color:#66d9ef>into</span> student(Name, Score, ClassId) <span style=color:#66d9ef>values</span>(<span style=color:#e6db74>&#34;cs&#34;</span>, <span style=color:#ae81ff>99</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>insert</span> <span style=color:#66d9ef>into</span> student(Name, Score, ClassId) <span style=color:#66d9ef>values</span>(<span style=color:#e6db74>&#34;wzy&#34;</span>, <span style=color:#ae81ff>60</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>insert</span> <span style=color:#66d9ef>into</span> student(Name, Score, ClassId) <span style=color:#66d9ef>values</span>(<span style=color:#e6db74>&#34;zqc&#34;</span>, <span style=color:#ae81ff>88</span>, <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>insert</span> <span style=color:#66d9ef>into</span> student(Name, Score, ClassId) <span style=color:#66d9ef>values</span>(<span style=color:#e6db74>&#34;bll&#34;</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>2</span>);
</span></span></code></pre></div><p>表格数据如下:</p><table><thead><tr><th>Id</th><th>Name</th><th>Score</th><th>ClassId</th></tr></thead><tbody><tr><td>1</td><td>lqh</td><td>60</td><td>1</td></tr><tr><td>2</td><td>cs</td><td>99</td><td>1</td></tr><tr><td>3</td><td>wzy</td><td>60</td><td>1</td></tr><tr><td>4</td><td>zqc</td><td>88</td><td>2</td></tr><tr><td>5</td><td>bll</td><td>100</td><td>2</td></tr></tbody></table><p>我们想找每个组分数排名第一的学生.</p><p>大部分SQL语言的初学者可能会写出如下代码:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> student <span style=color:#66d9ef>group</span> <span style=color:#66d9ef>by</span> ClassId <span style=color:#66d9ef>order</span> <span style=color:#66d9ef>by</span> Score;<span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>结果:</p><table><thead><tr><th>Id</th><th>Name</th><th>Score</th><th>ClassId</th></tr></thead><tbody><tr><td>3</td><td>wzy</td><td>60</td><td>1</td></tr><tr><td>5</td><td>bll</td><td>100</td><td>2</td></tr></tbody></table><p>明显不是我们想要的结果,大家用上面的执行顺序一分析就知道具体原因了.</p><blockquote><p>原因: group by 先于order by执行,order by是针对group by之后的结果进行的排序,而我们想要的group by结果其实应该是在order by之后.</p></blockquote><p>正确的sql语句:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> (<span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> student <span style=color:#66d9ef>order</span> <span style=color:#66d9ef>by</span> Score) <span style=color:#66d9ef>group</span> <span style=color:#66d9ef>by</span> ClassId;
</span></span></code></pre></div><p>结果:</p><table><thead><tr><th>Id</th><th>Name</th><th>Score</th><th>ClassId</th></tr></thead><tbody><tr><td>2</td><td>cs</td><td>99</td><td>1</td></tr><tr><td>5</td><td>bll</td><td>100</td><td>2</td></tr></tbody></table><hr><h2 id=获取每组的前n个记录>获取每组的前N个记录<a hidden class=anchor aria-hidden=true href=#获取每组的前n个记录>#</a></h2><p>这里以LeetCode上难度为hard的一道数据库题目为例。</p><h2 id=department-top-three-salarieshttpsleetcodecomproblemsdepartment-top-three-salaries><a href=https://leetcode.com/problems/department-top-three-salaries/>Department Top Three Salaries</a><a hidden class=anchor aria-hidden=true href=#department-top-three-salarieshttpsleetcodecomproblemsdepartment-top-three-salaries>#</a></h2><h3 id=题目内容>题目内容<a hidden class=anchor aria-hidden=true href=#题目内容>#</a></h3><p>The Employee table holds all employees. Every employee has an Id, and there is also a column for the department Id.</p><table><thead><tr><th>Id</th><th>Name</th><th>Salary</th><th>DepartmentId</th></tr></thead><tbody><tr><td>1</td><td>Joe</td><td>70000</td><td>1</td></tr><tr><td>2</td><td>Henry</td><td>80000</td><td>2</td></tr><tr><td>3</td><td>Sam</td><td>60000</td><td>2</td></tr><tr><td>4</td><td>Max</td><td>90000</td><td>1</td></tr><tr><td>5</td><td>Janet</td><td>69000</td><td>1</td></tr><tr><td>6</td><td>Randy</td><td>85000</td><td>1</td></tr></tbody></table><p>The Department table holds all departments of the company.</p><table><thead><tr><th>Id</th><th>Name</th></tr></thead><tbody><tr><td>1</td><td>IT</td></tr><tr><td>2</td><td>Sales</td></tr></tbody></table><p>Wrie1 a SQL query to find employees who earn the top three salaries in each of the department. For the above tables, your SQL query should return the following rows.</p><table><thead><tr><th>Department</th><th>Employee</th><th>Salary</th></tr></thead><tbody><tr><td>IT</td><td>Max</td><td>90000</td></tr><tr><td>IT</td><td>Randy</td><td>85000</td></tr><tr><td>IT</td><td>Joe</td><td>70000</td></tr><tr><td>Sales</td><td>Henry</td><td>80000</td></tr><tr><td>Sales</td><td>Sam</td><td>60000</td></tr></tbody></table><p>题目的意思是：求每个组中工资最高的三个人。(ps：且每个组中，同一名中允许多个员工存在，因为工资是一样高.)</p><h3 id=解决思路>解决思路<a hidden class=anchor aria-hidden=true href=#解决思路>#</a></h3><ol><li>我们先来获取每个组中的前3名工资最高的员工</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> Employee <span style=color:#66d9ef>as</span> e
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>where</span> (<span style=color:#66d9ef>select</span> <span style=color:#66d9ef>count</span>(<span style=color:#66d9ef>distinct</span>(e1.salary)) <span style=color:#66d9ef>from</span> Employee <span style=color:#66d9ef>as</span> e1 <span style=color:#66d9ef>where</span>  e1.DepartmentId <span style=color:#f92672>=</span> e.DepartmentId <span style=color:#66d9ef>and</span> e1.salary <span style=color:#f92672>&gt;</span> e.salary) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span>;<span style=color:#ae81ff>12</span>
</span></span></code></pre></div><p>where中的select是保证：遍历所有记录，取每条记录与当前记录做比较，只有当Employee表中同一部门不超过3个人工资比当前员工高时，这个员工才算是工资排行的前三名。</p><ol><li>有了第一步的基础，接下来我们只需要使用as去构造新表，并且与Department表做个内联，同时注意排序就好了</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> d.Name <span style=color:#66d9ef>as</span> Department, e.Name <span style=color:#66d9ef>as</span> Employee, e.Salary <span style=color:#66d9ef>as</span> Salary
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>from</span> Employee <span style=color:#66d9ef>as</span> e <span style=color:#66d9ef>inner</span> <span style=color:#66d9ef>join</span> Department <span style=color:#66d9ef>as</span> d
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>on</span> e.DepartmentId <span style=color:#f92672>=</span> d.Id
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>where</span> (<span style=color:#66d9ef>select</span> <span style=color:#66d9ef>count</span>(<span style=color:#66d9ef>distinct</span>(e1.Salary)) <span style=color:#66d9ef>from</span> Employee <span style=color:#66d9ef>as</span> e1 <span style=color:#66d9ef>where</span> e1.DepartmentId <span style=color:#f92672>=</span> e.DepartmentId <span style=color:#66d9ef>and</span> e1.Salary <span style=color:#f92672>&gt;</span> e.Salary) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>order</span> <span style=color:#66d9ef>by</span> e.Salary <span style=color:#66d9ef>desc</span>;
</span></span></code></pre></div><div class=post-meta></hr>注：本作品采用<a rel=license target=view_window href=http://creativecommons.org/licenses/by-nc-sa/4.0/> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议 </a>进行许可。</div></div><footer class=post-footer><ul class=post-tags><li><a href=https://swimminghao1.github.io/tags/sql/>🏷 sql</a></li><li><a href=https://swimminghao1.github.io/tags/%E7%90%86%E8%A7%A3/>🏷 理解</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Mysql获取每组前N条记录 on twitter" href="https://twitter.com/intent/tweet/?text=Mysql%e8%8e%b7%e5%8f%96%e6%af%8f%e7%bb%84%e5%89%8dN%e6%9d%a1%e8%ae%b0%e5%bd%95&url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f08%25E5%25AD%2598%25E6%25A1%25A3%25E6%2596%2587%25E4%25BB%25B6%2f%25E6%2596%2587%25E6%25A1%25A3%2fmysql%25E8%258E%25B7%25E5%258F%2596%25E6%25AF%258F%25E7%25BB%2584%25E5%2589%258Dn%25E6%259D%25A1%25E8%25AE%25B0%25E5%25BD%2595%2f&hashtags=sql%2c%e7%90%86%e8%a7%a3"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Mysql获取每组前N条记录 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f08%25E5%25AD%2598%25E6%25A1%25A3%25E6%2596%2587%25E4%25BB%25B6%2f%25E6%2596%2587%25E6%25A1%25A3%2fmysql%25E8%258E%25B7%25E5%258F%2596%25E6%25AF%258F%25E7%25BB%2584%25E5%2589%258Dn%25E6%259D%25A1%25E8%25AE%25B0%25E5%25BD%2595%2f&title=Mysql%e8%8e%b7%e5%8f%96%e6%af%8f%e7%bb%84%e5%89%8dN%e6%9d%a1%e8%ae%b0%e5%bd%95&summary=Mysql%e8%8e%b7%e5%8f%96%e6%af%8f%e7%bb%84%e5%89%8dN%e6%9d%a1%e8%ae%b0%e5%bd%95&source=https%3a%2f%2fswimminghao1.github.io%2fpost%2f08%25E5%25AD%2598%25E6%25A1%25A3%25E6%2596%2587%25E4%25BB%25B6%2f%25E6%2596%2587%25E6%25A1%25A3%2fmysql%25E8%258E%25B7%25E5%258F%2596%25E6%25AF%258F%25E7%25BB%2584%25E5%2589%258Dn%25E6%259D%25A1%25E8%25AE%25B0%25E5%25BD%2595%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Mysql获取每组前N条记录 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f08%25E5%25AD%2598%25E6%25A1%25A3%25E6%2596%2587%25E4%25BB%25B6%2f%25E6%2596%2587%25E6%25A1%25A3%2fmysql%25E8%258E%25B7%25E5%258F%2596%25E6%25AF%258F%25E7%25BB%2584%25E5%2589%258Dn%25E6%259D%25A1%25E8%25AE%25B0%25E5%25BD%2595%2f&title=Mysql%e8%8e%b7%e5%8f%96%e6%af%8f%e7%bb%84%e5%89%8dN%e6%9d%a1%e8%ae%b0%e5%bd%95"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Mysql获取每组前N条记录 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fswimminghao1.github.io%2fpost%2f08%25E5%25AD%2598%25E6%25A1%25A3%25E6%2596%2587%25E4%25BB%25B6%2f%25E6%2596%2587%25E6%25A1%25A3%2fmysql%25E8%258E%25B7%25E5%258F%2596%25E6%25AF%258F%25E7%25BB%2584%25E5%2589%258Dn%25E6%259D%25A1%25E8%25AE%25B0%25E5%25BD%2595%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Mysql获取每组前N条记录 on whatsapp" href="https://api.whatsapp.com/send?text=Mysql%e8%8e%b7%e5%8f%96%e6%af%8f%e7%bb%84%e5%89%8dN%e6%9d%a1%e8%ae%b0%e5%bd%95%20-%20https%3a%2f%2fswimminghao1.github.io%2fpost%2f08%25E5%25AD%2598%25E6%25A1%25A3%25E6%2596%2587%25E4%25BB%25B6%2f%25E6%2596%2587%25E6%25A1%25A3%2fmysql%25E8%258E%25B7%25E5%258F%2596%25E6%25AF%258F%25E7%25BB%2584%25E5%2589%258Dn%25E6%259D%25A1%25E8%25AE%25B0%25E5%25BD%2595%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Mysql获取每组前N条记录 on telegram" href="https://telegram.me/share/url?text=Mysql%e8%8e%b7%e5%8f%96%e6%af%8f%e7%bb%84%e5%89%8dN%e6%9d%a1%e8%ae%b0%e5%bd%95&url=https%3a%2f%2fswimminghao1.github.io%2fpost%2f08%25E5%25AD%2598%25E6%25A1%25A3%25E6%2596%2587%25E4%25BB%25B6%2f%25E6%2596%2587%25E6%25A1%25A3%2fmysql%25E8%258E%25B7%25E5%258F%2596%25E6%25AF%258F%25E7%25BB%2584%25E5%2589%258Dn%25E6%259D%25A1%25E8%25AE%25B0%25E5%25BD%2595%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div><nav class=paginav><a class=prev href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/07_01_macos/macos/mac%E5%BF%AB%E6%8D%B7%E9%94%AE/><span class=title>« 上一页</span><br><span>mac快捷键</span></a>
<a class=next href=https://swimminghao1.github.io/post/02%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/10_01_sql/sql/mysql%E8%BF%9E%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%90%8E%E5%AD%97%E7%AC%A6%E9%9B%86%E4%B8%8D%E5%90%8C%E5%AF%BC%E8%87%B4%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/><span class=title>下一页 »</span><br><span>mysql连表操作后字符集不同导致索引失效问题</span></a></nav></footer></article></main><footer class=footer><span>Copyright &copy; 2023 • <a href=https://swimminghao1.github.io/>swimminghao</a></span><div><span><a href=/about/>关于</a>
• <a href=/disclaimer/>免责声明</a>
• <a href=/sitemap.xml target=view_window>站点地图</a>
• <a href=https://www.foreverblog.cn/go.html target=view_window>虫洞</a>
• PV <span id=busuanzi_value_site_pv><i class="fa fa-spinner fa-spin"></i></span></span></div></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><meta name=”apple-mobile-web-app-capable” content="”yes”"><script>"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js")})</script></body></html>